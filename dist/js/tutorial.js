!function(e){var t={};function r(n){var i;return(t[n]||(i=t[n]={i:n,l:!1,exports:{}},e[n].call(i.exports,i,i.exports,r),i.l=!0,i)).exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=153)}([function(e,t,r){"use strict";r.d(t,"a",(function(){return ye})),r.d(t,"b",(function(){return M})),r.d(t,"c",(function(){return ie})),r.d(t,"d",(function(){return R})),r.d(t,"e",(function(){return pe})),r.d(t,"f",(function(){return ve})),r.d(t,"g",(function(){return j})),r.d(t,"h",(function(){return J})),r.d(t,"i",(function(){return me})),r.d(t,"j",(function(){return be})),r.d(t,"k",(function(){return fe})),r.d(t,"l",(function(){return he})),r.d(t,"m",(function(){return K})),r.d(t,"n",(function(){return P})),r.d(t,"o",(function(){return oe})),r.d(t,"p",(function(){return G})),r.d(t,"q",(function(){return L})),r.d(t,"r",(function(){return N})),r.d(t,"s",(function(){return le})),r.d(t,"t",(function(){return Se})),r.d(t,"u",(function(){return we})),r.d(t,"v",(function(){return z})),r.d(t,"w",(function(){return X})),r.d(t,"x",(function(){return ue})),r.d(t,"y",(function(){return ge})),r.d(t,"z",(function(){return ae})),r.d(t,"A",(function(){return re})),r.d(t,"B",(function(){return ce})),r.d(t,"C",(function(){return de})),r.d(t,"D",(function(){return Ae})),r.d(t,"E",(function(){return O}));var n=r(4),i=r(1);
/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function s(){if("undefined"==typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function a(e){let t=0,r=0;for(let r=0;r<e.length;r++){t+=e[r].byteLength}var n=new Uint8Array(t);for(let t=0;t<e.length;t++){var i=e[t];n.set(new Uint8Array(i),r),r+=i.byteLength}return n.buffer}function o(e,t,r,n){if(t instanceof Uint8Array)if(t.byteLength)if(r<0)e.error="Wrong parameter: inputOffset less than zero";else if(n<0)e.error="Wrong parameter: inputLength less than zero";else{if(!(t.byteLength-r-n<0))return 1;e.error="End of input reached before message was fully decoded (inconsistent offset and length values)"}else e.error="Wrong parameter: inputBuffer has zero length";else e.error="Wrong parameter: inputBuffer must be 'Uint8Array'"}class l{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return a(this.items)}}const u=[new Uint8Array([1])],c="0123456789",h="name",f="valueHexView",d="",m=new ArrayBuffer(0),p=new Uint8Array(0),g="EndOfContent",b="OCTET STRING",y="BIT STRING";function v(e){return(e=class extends e{constructor(...e){super(...e);var t;e=e[0]||{};this.isHexOnly=null!=(t=e.isHexOnly)&&t,this.valueHexView=e.valueHex?n.BufferSourceConverter.toUint8Array(e.valueHex):p}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}fromBER(e,t,r){return o(this,e=e instanceof ArrayBuffer?new Uint8Array(e):e,t,r)?(this.valueHexView=e.subarray(t,e=t+r),this.valueHexView.length?(this.blockLength=r,e):(this.warnings.push("Zero buffer length"),t)):-1}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):(this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView:this.valueHexView.slice()).buffer:(this.error="Flag 'isHexOnly' is not set, abort",m)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:n.Convert.ToHex(this.valueHexView)}}}).NAME="hexBlock",e}class w{constructor({blockLength:e=0,error:t="",warnings:r=[],valueBeforeDecode:i=p}={}){this.blockLength=e,this.error=t,this.warnings=r,this.valueBeforeDecodeView=n.BufferSourceConverter.toUint8Array(i)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:n.Convert.ToHex(this.valueBeforeDecodeView)}}}w.NAME="baseBlock";class S extends w{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}S.NAME="valueBlock";class A extends(v(w)){constructor({idBlock:e={}}={}){var t;super(),e?(this.isHexOnly=null!=(t=e.isHexOnly)&&t,this.valueHexView=e.valueHex?n.BufferSourceConverter.toUint8Array(e.valueHex):p,this.tagClass=null!=(t=e.tagClass)?t:-1,this.tagNumber=null!=(t=e.tagNumber)?t:-1,this.isConstructed=null!=(t=e.isConstructed)&&t):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",m}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);return e||(r=this.tagNumber,t|=r&=31,n[0]=t),n.buffer}if(!this.isHexOnly){var r=i.p(this.tagNumber,7),n=new Uint8Array(r),s=r.byteLength;const a=new Uint8Array(s+1);if(a[0]=31|t,!e){for(let e=0;e<s-1;e++)a[e+1]=128|n[e];a[s]=n[s-1]}return a.buffer}const a=new Uint8Array(this.valueHexView.byteLength+1);if(a[0]=31|t,!e){var o=this.valueHexView;for(let e=0;e<o.length-1;e++)a[e+1]=128|o[e];a[this.valueHexView.byteLength]=o[o.length-1]}return a.buffer}fromBER(e,t,r){if(!o(this,e=n.BufferSourceConverter.toUint8Array(e),t,r))return-1;var s=e.subarray(t,t+r);if(0===s.length)return this.error="Zero buffer length",-1;switch(192&s[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}if(this.isConstructed=32==(32&s[0]),this.isHexOnly=!1,31!=(e=31&s[0]))this.tagNumber=e,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),r=255;for(;128&s[e];){if(t[e-1]=127&s[e],++e>=s.length)return this.error="End of input reached before message was fully decoded",-1;if(e===r){r+=255;var a=new Uint8Array(r);for(let e=0;e<t.length;e++)a[e]=t[e];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1,t[e-1]=127&s[e];var l=new Uint8Array(e);for(let r=0;r<e;r++)l[r]=t[r];(t=this.valueHexView=new Uint8Array(e)).set(l),this.blockLength<=9?this.tagNumber=i.o(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}A.NAME="identificationBlock";class E extends w{constructor({lenBlock:e={}}={}){var t;super(),this.isIndefiniteForm=null!=(t=e.isIndefiniteForm)&&t,this.longFormUsed=null!=(t=e.longFormUsed)&&t,this.length=null!=(t=e.length)?t:0}fromBER(e,t,r){if(!o(this,e=n.BufferSourceConverter.toUint8Array(e),t,r))return-1;if(0===(r=e.subarray(t,t+r)).length)return this.error="Zero buffer length",-1;if(255===r[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===r[0],this.isIndefiniteForm)this.blockLength=1;else if(this.longFormUsed=!!(128&r[0]),!1===this.longFormUsed)this.length=r[0],this.blockLength=1;else{var s=127&r[0];if(8<s)return this.error="Too big integer",-1;if(1+s>r.length)return this.error="End of input reached before message was fully decoded",-1;r=t+1,0===(e=e.subarray(r,r+s))[s-1]&&this.warnings.push("Needlessly long encoded length"),this.length=i.o(e,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=1+s}return t+this.blockLength}toBER(e=!1){let t,r;if(127<this.length&&(this.longFormUsed=!0),this.isIndefiniteForm)t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=128);else if(this.longFormUsed){var n=i.p(this.length,8);if(127<n.byteLength)return this.error="Too big length",m;if(t=new ArrayBuffer(n.byteLength+1),!e){var s=new Uint8Array(n);(r=new Uint8Array(t))[0]=128|n.byteLength;for(let e=0;e<n.byteLength;e++)r[e+1]=s[e]}}else t=new ArrayBuffer(1),!1===e&&((r=new Uint8Array(t))[0]=this.length);return t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}E.NAME="lengthBlock";const k={};class I extends w{constructor({name:e="",optional:t=!1,primitiveSchema:r,...n}={},i){super(n),this.name=e,this.optional=t,r&&(this.primitiveSchema=r),this.idBlock=new A(n),this.lenBlock=new E(n),this.valueBlock=new(i||S)(n)}fromBER(e,t,r){return-1===(e=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length))?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),e}toBER(e,t){var r=t||new l,n=(t||function e(t){if(t instanceof k.Constructed)for(const r of t.valueBlock.value)e(r)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}(this),this.idBlock.toBER(e));return r.write(n),this.lenBlock.isIndefiniteForm?(r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2))):(n=this.valueBlock.toBER(e),this.lenBlock.length=n.byteLength,e=this.lenBlock.toBER(e),r.write(e),r.write(n)),t?m:r.final()}toJSON(){var e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():n.Convert.ToHex(this.toBER())}onAsciiEncoding(){return this.constructor.NAME+" : "+n.Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}isEqual(e){var t;return this===e||e instanceof this.constructor&&(t=this.toBER(),e=e.toBER(),i.f(t,e))}}I.NAME="BaseBlock";class _ extends I{constructor({value:e="",...t}={},r){super(t,r),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,t,r){return-1===(e=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length))?this.error=this.valueBlock.error:(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),e}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}_.NAME="BaseStringBlock";class B extends(v(S)){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}B.NAME="PrimitiveValueBlock";class N extends I{constructor(e={}){super(e,B),this.idBlock.isConstructed=!1}}function C(e,t=0,r=e.length){var n=t;let i=new I({},S);if(!o(l=new w,e,t,r))return i.error=l.error,{offset:-1,result:i};if(!e.subarray(t,t+r).length)return i.error="Zero buffer length",{offset:-1,result:i};var s,a,l=i.idBlock.fromBER(e,t,r);if(i.idBlock.warnings.length&&i.warnings.concat(i.idBlock.warnings),-1===l)return i.error=i.idBlock.error,{offset:-1,result:i};if(t=l,r-=i.idBlock.blockLength,l=i.lenBlock.fromBER(e,t,r),i.lenBlock.warnings.length&&i.warnings.concat(i.lenBlock.warnings),-1===l)return i.error=i.lenBlock.error,{offset:-1,result:i};if(t=l,r-=i.lenBlock.blockLength,!i.idBlock.isConstructed&&i.lenBlock.isIndefiniteForm)return i.error="Indefinite length form used for primitive encoding form",{offset:-1,result:i};let u=I;if(1===i.idBlock.tagClass){if(37<=i.idBlock.tagNumber&&!1===i.idBlock.isHexOnly)return i.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:i};switch(i.idBlock.tagNumber){case 0:if(i.idBlock.isConstructed&&0<i.lenBlock.length)return i.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:i};u=k.EndOfContent;break;case 1:u=k.Boolean;break;case 2:u=k.Integer;break;case 3:u=k.BitString;break;case 4:u=k.OctetString;break;case 5:u=k.Null;break;case 6:u=k.ObjectIdentifier;break;case 10:u=k.Enumerated;break;case 12:u=k.Utf8String;break;case 13:u=k.RelativeObjectIdentifier;break;case 14:u=k.TIME;break;case 15:return i.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:i};case 16:u=k.Sequence;break;case 17:u=k.Set;break;case 18:u=k.NumericString;break;case 19:u=k.PrintableString;break;case 20:u=k.TeletexString;break;case 21:u=k.VideotexString;break;case 22:u=k.IA5String;break;case 23:u=k.UTCTime;break;case 24:u=k.GeneralizedTime;break;case 25:u=k.GraphicString;break;case 26:u=k.VisibleString;break;case 27:u=k.GeneralString;break;case 28:u=k.UniversalString;break;case 29:u=k.CharacterString;break;case 30:u=k.BmpString;break;case 31:u=k.DATE;break;case 32:u=k.TimeOfDay;break;case 33:u=k.DateTime;break;case 34:u=k.Duration;break;default:var c=new(i.idBlock.isConstructed?k.Constructed:k.Primitive);c.idBlock=i.idBlock,c.lenBlock=i.lenBlock,c.warnings=i.warnings,i=c}}else u=i.idBlock.isConstructed?k.Constructed:k.Primitive;return l=(s=i,a=u,i=s instanceof a?s:((a=new a).idBlock=s.idBlock,a.lenBlock=s.lenBlock,a.warnings=s.warnings,a.valueBeforeDecodeView=s.valueBeforeDecodeView,a)).fromBER(e,t,i.lenBlock.isIndefiniteForm?r:i.lenBlock.length),i.valueBeforeDecodeView=e.subarray(n,n+i.blockLength),{offset:l,result:i}}function O(e){return e.byteLength?C(n.BufferSourceConverter.toUint8Array(e).slice(),0,e.byteLength):((e=new I({},S)).error="Input buffer has zero length",{offset:-1,result:e})}t=N,k.Primitive=t,N.NAME="PRIMITIVE";class x extends S{constructor({value:e=[],isIndefiniteForm:t=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,r){var i=n.BufferSourceConverter.toUint8Array(e);if(!o(this,i,t,r))return-1;if(this.valueBeforeDecodeView=i.subarray(t,t+r),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let s=t;for(;0<((a=this.isIndefiniteForm)?1:r);){var a=C(i,s,r);if(-1===a.offset)return this.error=a.result.error,this.warnings.concat(a.result.warnings),-1;if(s=a.offset,this.blockLength+=a.result.blockLength,r-=a.result.blockLength,this.value.push(a.result),this.isIndefiniteForm&&a.result.constructor.NAME===g)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===g?this.value.pop():this.warnings.push("No EndOfContent block encoded")),s}toBER(e,t){var r=t||new l;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,r);return t?m:r.final()}toJSON(){var e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}x.NAME="ConstructedValueBlock";class j extends I{constructor(e={}){super(e,x),this.idBlock.isConstructed=!0}fromBER(e,t,r){return this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,-1===(e=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length))?this.error=this.valueBlock.error:(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength)),e}onAsciiEncoding(){var e=[];for(const t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map(e=>"  "+e).join("\n"));var t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?t+" :\n"+e.join("\n"):t+" :"}}r=j,k.Constructed=r,j.NAME="CONSTRUCTED";class T extends S{fromBER(e,t,r){return t}toBER(e){return m}}T.override="EndOfContentValueBlock";(k.EndOfContent=class extends I{constructor(e={}){super(e,T),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}).NAME=g;class P extends I{constructor(e={}){super(e,S),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,r){return 0<this.lenBlock.length&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e,t){var r=new ArrayBuffer(2);return e||((e=new Uint8Array(r))[0]=5,e[1]=0),t&&t.write(r),r}onAsciiEncoding(){return""+this.constructor.NAME}}t=P,k.Null=t,P.NAME="NULL";class D extends(v(S)){constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=n.BufferSourceConverter.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(0<e)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,t,r){return o(this,e=n.BufferSourceConverter.toUint8Array(e),t,r)?(this.valueHexView=e.subarray(t,t+r),1<r&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,i.m.call(this),t+(this.blockLength=r)):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}D.NAME="BooleanValueBlock";class R extends I{constructor(e={}){super(e,D),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}onAsciiEncoding(){return this.constructor.NAME+" : "+this.getValue}}r=R,k.Boolean=r,R.NAME="BOOLEAN";class U extends(v(x)){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,r){let n=0;if(this.isConstructed){if(this.isHexOnly=!1,-1===(n=x.prototype.fromBER.call(this,e,t,r)))return n;for(let e=0;e<this.value.length;e++){var i=this.value[e].constructor.NAME;if(i===g){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(i!==b)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(e,t,r),this.blockLength=r;return n}toBER(e,t){return this.isConstructed?x.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}U.NAME="OctetStringValueBlock";class L extends I{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n;null==r.isConstructed&&(r.isConstructed=!(null==(n=r.value)||!n.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},U),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){var n,i=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+r);try{i.byteLength&&-1!==(n=C(i,0,i.byteLength)).offset&&n.offset===r&&(this.valueBlock.value=[n.result])}catch(e){}}return super.fromBER(e,t,r)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?j.prototype.onAsciiEncoding.call(this):this.constructor.NAME+" : "+n.Convert.ToHex(this.valueBlock.valueHexView)}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;var e=[];for(const t of this.valueBlock.value)t instanceof L&&e.push(t.valueBlock.valueHexView);return n.BufferSourceConverter.concat(e)}}t=L,k.OctetString=t,L.NAME=b;class V extends(v(x)){constructor({unusedBits:e=0,isConstructed:t=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r)return t;if(this.isConstructed){if(-1!==(a=x.prototype.fromBER.call(this,e,t,r)))for(const e of this.value){var i=e.constructor.NAME;if(i===g){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(i!==y)return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(i=e.valueBlock,0<this.unusedBits&&0<i.unusedBits)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=i.unusedBits}return a}if(!o(this,a=n.BufferSourceConverter.toUint8Array(e),t,r))return-1;if(e=a.subarray(t,t+r),this.unusedBits=e[0],7<this.unusedBits)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){var s,a=e.subarray(1);try{a.byteLength&&-1!==(s=C(a,0,a.byteLength)).offset&&s.offset===r-1&&(this.value=[s.result])}catch(e){}}return this.valueHexView=e.subarray(1),this.blockLength=e.length,t+r}toBER(e,t){return this.isConstructed?x.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength+1):this.valueHexView.byteLength?((t=new Uint8Array(this.valueHexView.length+1))[0]=this.unusedBits,t.set(this.valueHexView,1),t.buffer):m}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}V.NAME="BitStringValueBlock";class M extends I{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n;null==r.isConstructed&&(r.isConstructed=!(null==(n=r.value)||!n.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},V),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return j.prototype.onAsciiEncoding.call(this);var e=[];for(const t of this.valueBlock.valueHexView)e.push(t.toString(2).padStart(8,"0"));var t=e.join("");return this.constructor.NAME+" : "+t.substring(0,t.length-this.valueBlock.unusedBits)}}function H(e){if(e>=u.length)for(let n=u.length;n<=e;n++){var t=new Uint8Array([0]);let e=u[n-1].slice(0);for(let n=e.length-1;0<=n;n--){var r=new Uint8Array([(e[n]<<1)+t[0]]);t[0]=r[0]/10,e[n]=r[0]%10}0<t[0]&&(e=i.l(t,e)),u.push(e)}return u[e]}r=M,k.BitString=r,M.NAME=y;class F extends(v(S)){constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}setValueHex(){4<=this.valueHexView.length?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,0<this.valueHexView.length&&(this._valueDec=i.m.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(i.n(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){return-1!==(e=this.fromBER(e,t,r))&&(0===(t=this.valueHexView)[0]&&0!=(128&t[1])?this.valueHexView=t.subarray(1):0!==n&&t.length<n&&(1<n-t.length&&(n=t.length+1),this.valueHexView=t.subarray(n-t.length))),e}toDER(e=!1){var t=this.valueHexView;switch(!0){case 0!=(128&t[0]):var r=new Uint8Array(this.valueHexView.length+1);r[0]=0,r.set(t,1),this.valueHexView=r;break;case 0===t[0]&&0==(128&t[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,r){return-1!==(e=super.fromBER(e,t,r))&&this.setValueHex(),e}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){var e=8*this.valueHexView.length-1;let t,r=new Uint8Array(8*this.valueHexView.length/3),n=0;var s=this.valueHexView;let a="",o=!1;for(let o=s.byteLength-1;0<=o;o--){t=s[o];for(let s=0;s<8;s++)1==(1&t)&&(n===e?(r=function(e,t){let r=0;e=new Uint8Array(e),t=new Uint8Array(t);var n=e.slice(0),i=n.length-1,s=t.slice(0),a=s.length-1;let o,l=0;for(let e=a;0<=e;e--,l++)1==(o=n[i-l]-s[a-l]-r)<0?(r=1,n[i-l]=o+10):(r=0,n[i-l]=o);if(0<r)for(let e=i-a+1;0<=e;e--,l++){if(!((o=n[i-l]-r)<0)){r=0,n[i-l]=o;break}r=1,n[i-l]=o+10}return n.slice()}(H(n),r),a="-"):r=function(e,t){var r=new Uint8Array([0]);e=new Uint8Array(e),t=new Uint8Array(t);let n=e.slice(0);var s=n.length-1,a=t.slice(0),o=a.length-1;let l=0,u=0;for(let e=o<s?s:o;0<=e;e--,u++)l=1==u<a.length?n[s-u]+a[o-u]+r[0]:n[s-u]+r[0],r[0]=l/10,1==u>=n.length?n=i.l(new Uint8Array([l%10]),n):n[s-u]=l%10;return 0<r[0]?i.l(r,n):n}(r,H(n))),n++,t>>=1}for(let e=0;e<r.length;e++)(o=!!r[e]||o)&&(a+=c.charAt(r[e]));return!1===o&&(a+=c.charAt(0)),a}}(t=F).NAME="IntegerValueBlock",Object.defineProperty(t.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class K extends I{constructor(e={}){super(e,F),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return s(),BigInt(this.valueBlock.toString())}static fromBigInt(e){s();e=BigInt(e);var t,r=new l,i=e.toString(16).replace(/^-/,"");i=new Uint8Array(n.Convert.FromHex(i));return e=(e<0?((t=new Uint8Array(i.length+(128&i[0]?1:0)))[0]|=128,t=BigInt("0x"+n.Convert.ToHex(t)),(t=n.BufferSourceConverter.toUint8Array(n.Convert.FromHex((t+e).toString(16))))[0]|=128,r.write(t)):(128&i[0]&&r.write(new Uint8Array([0])),r.write(i)),new K({valueHex:r.final()}))}convertToDER(){var e=new K({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new K({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return this.constructor.NAME+" : "+this.valueBlock.toString()}}r=K,k.Integer=r,K.NAME="INTEGER";class J extends K{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}t=J,k.Enumerated=t,J.NAME="ENUMERATED";class q extends(v(S)){constructor({valueDec:e=-1,isFirstSid:t=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,r){if(!r)return t;if(!o(this,e=n.BufferSourceConverter.toUint8Array(e),t,r))return-1;var s=e.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&s[e],this.blockLength++,0!=(128&s[e]));e++);var a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)a[e]=this.valueHexView[e];return this.valueHexView=a,0!=(128&s[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=i.o(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){s();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;var r=new Uint8Array(t.length/7);for(let e=0;e<r.length;e++)r[e]=parseInt(t.slice(7*e,7*e+7),2)+(e+1<r.length?128:0);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);var t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}var r=i.p(this.valueDec,7);if(0===r.byteLength)return this.error="Error during encoding SID value",m;const n=new Uint8Array(r.byteLength);if(!e){var s=new Uint8Array(r),a=r.byteLength-1;for(let e=0;e<a;e++)n[e]=128|s[e];n[a]=s[a]}return n}toString(){let e="";if(this.isHexOnly)e=n.Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}q.NAME="sidBlock";class W extends S{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;0<r;){var i=new q;if(-1===(n=i.fromBER(e,n,r)))return this.blockLength=0,this.error=i.error,n;0===this.value.length&&(i.isFirstSid=!0),this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return n}toBER(e){var t=[];for(let n=0;n<this.value.length;n++){var r=this.value[n].toBER(e);if(0===r.byteLength)return this.error=this.value[n].error,m;t.push(r)}return a(t)}fromString(e){let t=0;var r;let n="",i=!(this.value=[]);do{if(n=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1,i){var a=this.value[0];let e=0;switch(a.valueDec){case 0:break;case 1:e=40;break;case 2:e=80;break;default:return void(this.value=[])}var o=parseInt(n,10);if(isNaN(o))return;a.valueDec=o+e,i=!1}else{if(a=new q,n>Number.MAX_SAFE_INTEGER)s(),o=BigInt(n),a.valueBigInt=o;else if(a.valueDec=parseInt(n,10),isNaN(a.valueDec))return;this.value.length||(a.isFirstSid=!0,i=!0),this.value.push(a)}}while(-1!==r)}toString(){let e="";var t;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e+="."),t&&(n=`{${n}}`,this.value[r].isFirstSid)?e=`2.{${n} - 80}`:e+=n}return e}toJSON(){var e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}W.NAME="ObjectIdentifierValueBlock";class G extends I{constructor(e={}){super(e,W),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return this.constructor.NAME+" : "+(this.valueBlock.toString()||"empty")}toJSON(){return{...super.toJSON(),value:this.getValue()}}}r=G,k.ObjectIdentifier=r,G.NAME="OBJECT IDENTIFIER";class $ extends(v(w)){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,r){if(0===r)return t;if(!o(this,e=n.BufferSourceConverter.toUint8Array(e),t,r))return-1;var s=e.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let e=0;e<r&&(this.valueHexView[e]=127&s[e],this.blockLength++,0!=(128&s[e]));e++);var a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)a[e]=this.valueHexView[e];return this.valueHexView=a,0!=(128&s[this.blockLength-1])?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=i.o(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);var t=this.valueHexView;const r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}var r=i.p(this.valueDec,7);if(0===r.byteLength)return this.error="Error during encoding SID value",m;const n=new Uint8Array(r.byteLength);if(!e){var s=new Uint8Array(r),a=r.byteLength-1;for(let e=0;e<a;e++)n[e]=128|s[e];n[a]=s[a]}return n.buffer}toString(){return this.isHexOnly?n.Convert.ToHex(this.valueHexView):this.valueDec.toString()}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}$.NAME="relativeSidBlock";class Y extends S{constructor({value:e="",...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;0<r;){var i=new $;if(-1===(n=i.fromBER(e,n,r)))return this.blockLength=0,this.error=i.error,n;this.blockLength+=i.blockLength,r-=i.blockLength,this.value.push(i)}return n}toBER(e,t){var r=[];for(let t=0;t<this.value.length;t++){var n=this.value[t].toBER(e);if(0===n.byteLength)return this.error=this.value[t].error,m;r.push(n)}return a(r)}fromString(e){this.value=[];let t=0;var r;let n="";do{n=-1===(r=e.indexOf(".",t))?e.substring(t):e.substring(t,r),t=r+1;var i=new $;if(i.valueDec=parseInt(n,10),isNaN(i.valueDec))return!0;this.value.push(i)}while(-1!==r);return!0}toString(){let e="";var t;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e+="."),t&&(n=`{${n}}`),e+=n}return e}toJSON(){var e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}Y.NAME="RelativeObjectIdentifierValueBlock";(k.RelativeObjectIdentifier=class extends I{constructor(e={}){super(e,Y),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return this.constructor.NAME+" : "+(this.valueBlock.toString()||"empty")}toJSON(){return{...super.toJSON(),value:this.getValue()}}}).NAME="RelativeObjectIdentifier";class z extends j{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}t=z,k.Sequence=t,z.NAME="SEQUENCE";class X extends j{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}r=X,k.Set=r,X.NAME="SET";class Q extends(v(S)){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=d}toJSON(){return{...super.toJSON(),value:this.value}}}Q.NAME="StringValueBlock";class Z extends Q{}Z.NAME="SimpleStringValueBlock";class ee extends _{constructor({...e}={}){super(e,Z)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,n.BufferSourceConverter.toUint8Array(e))}fromString(e){var t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}ee.NAME="SIMPLE STRING";class te extends ee{fromBuffer(e){this.valueBlock.valueHexView=n.BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=n.Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=n.Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(n.Convert.FromUtf8String(e)),this.valueBlock.value=e}}te.NAME="Utf8StringValueBlock";class re extends te{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}t=re,k.Utf8String=t,re.NAME="UTF8String";class ne extends ee{fromBuffer(e){this.valueBlock.value=n.Convert.ToUtf16String(e),this.valueBlock.valueHexView=n.BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(n.Convert.FromUtf16String(e))}}ne.NAME="BmpStringValueBlock";class ie extends ne{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}r=ie,k.BmpString=r,ie.NAME="BMPString";class se extends ee{fromBuffer(e){e=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0);var t=new Uint8Array(e);for(let e=0;e<t.length;e+=4)t[e]=t[e+3],t[e+1]=t[e+2],t[e+2]=0,t[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(e))}fromString(e){var t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let o=0;o<t;o++){var n=i.p(e.charCodeAt(o),8),s=new Uint8Array(n);if(!(4<s.length)){var a=4-s.length;for(let e=s.length-1;0<=e;e--)r[4*o+e+a]=s[e]}}this.valueBlock.value=e}}se.NAME="UniversalStringValueBlock";class ae extends se{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}t=ae,k.UniversalString=t,ae.NAME="UniversalString";class oe extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}r=oe,k.NumericString=r,oe.NAME="NumericString";class le extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}t=le,k.PrintableString=t,le.NAME="PrintableString";class ue extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}r=ue,k.TeletexString=r,ue.NAME="TeletexString";class ce extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}t=ce,k.VideotexString=t,ce.NAME="VideotexString";class he extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}r=he,k.IA5String=r,he.NAME="IA5String";class fe extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}t=fe,k.GraphicString=t,fe.NAME="GraphicString";class de extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}r=de,k.VisibleString=r,de.NAME="VisibleString";class me extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}t=me,k.GeneralString=t,me.NAME="GeneralString";class pe extends ee{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}r=pe,k.CharacterString=r,pe.NAME="CharacterString";class ge extends de{constructor({value:e,valueDate:t,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,n.BufferSourceConverter.toUint8Array(e)))}toBuffer(){var e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let t=0;t<e.length;t++)r[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){var t;null===(e=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e))?this.error="Wrong input string for conversion":(t=parseInt(e[1],10),this.year=50<=t?1900+t:2e3+t,this.month=parseInt(e[2],10),this.day=parseInt(e[3],10),this.hour=parseInt(e[4],10),this.minute=parseInt(e[5],10),this.second=parseInt(e[6],10))}toString(e="iso"){var t;return"iso"===e?((t=new Array(7))[0]=i.h(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=i.h(this.month,2),t[2]=i.h(this.day,2),t[3]=i.h(this.hour,2),t[4]=i.h(this.minute,2),t[5]=i.h(this.second,2),t[6]="Z",t.join("")):super.toString(e)}onAsciiEncoding(){return this.constructor.NAME+" : "+this.toDate().toISOString()}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}t=ge,k.UTCTime=t,ge.NAME="UTCTime";class be extends ge{constructor(e={}){super(e),null==this.millisecond&&(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let t,r=!1,n="",i="",s=0,a=0,o=0;if("Z"===e[e.length-1])n=e.substring(0,e.length-1),r=!0;else{var l=new Number(e[e.length-1]);if(isNaN(l.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let e=1,t=n.indexOf("+");if(l="",-1===t&&(t=n.indexOf("-"),e=-1),-1!==t){if(l=n.substring(t+1),n=n.substring(0,t),2!==l.length&&4!==l.length)throw new Error("Wrong input string for conversion");let r=parseInt(l.substring(0,2),10);if(isNaN(r.valueOf()))throw new Error("Wrong input string for conversion");if(a=e*r,4===l.length){if(r=parseInt(l.substring(2,4),10),isNaN(r.valueOf()))throw new Error("Wrong input string for conversion");o=e*r}}}let u=n.indexOf(".");if(-1!==(u=-1===u?n.indexOf(","):u)){if(e=new Number("0"+n.substring(u)),isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");s=e.valueOf(),i=n.substring(0,u)}else i=n;switch(!0){case 8===i.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==u)throw new Error("Wrong input string for conversion");break;case 10===i.length:t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==u&&(c=60*s,this.minute=Math.floor(c),c=60*(c-this.minute),this.second=Math.floor(c),c=1e3*(c-this.second),this.millisecond=Math.floor(c));break;case 12===i.length:t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u&&(c=60*s,this.second=Math.floor(c),c=1e3*(c-this.second),this.millisecond=Math.floor(c));break;case 14===i.length:var c;t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==u&&(c=1e3*s,this.millisecond=Math.floor(c));break;default:throw new Error("Wrong input string for conversion")}var h=t.exec(i);if(null===h)throw new Error("Wrong input string for conversion");for(let e=1;e<h.length;e++)switch(e){case 1:this.year=parseInt(h[e],10);break;case 2:this.month=parseInt(h[e],10);break;case 3:this.day=parseInt(h[e],10);break;case 4:this.hour=parseInt(h[e],10)+a;break;case 5:this.minute=parseInt(h[e],10)+o;break;case 6:this.second=parseInt(h[e],10);break;default:throw new Error("Wrong input string for conversion")}!1===r&&(l=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond),this.year=l.getUTCFullYear(),this.month=l.getUTCMonth(),this.day=l.getUTCDay(),this.hour=l.getUTCHours(),this.minute=l.getUTCMinutes(),this.second=l.getUTCSeconds(),this.millisecond=l.getUTCMilliseconds())}toString(e="iso"){var t;return"iso"===e?((t=[]).push(i.h(this.year,4)),t.push(i.h(this.month,2)),t.push(i.h(this.day,2)),t.push(i.h(this.hour,2)),t.push(i.h(this.minute,2)),t.push(i.h(this.second,2)),0!==this.millisecond&&(t.push("."),t.push(i.h(this.millisecond,3))),t.push("Z"),t.join("")):super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}r=be,k.GeneralizedTime=r,be.NAME="GeneralizedTime";(k.DATE=class extends re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}).NAME="DATE";(k.TimeOfDay=class extends re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}).NAME="TimeOfDay";(k.DateTime=class extends re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}).NAME="DateTime";(k.Duration=class extends re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}).NAME="Duration";(k.TIME=class extends re{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}).NAME="TIME";class ye{constructor({name:e="",optional:t=!1}={}){this.name=e,this.optional=t}}class ve extends ye{constructor({value:e=[],...t}={}){super(t),this.value=e}}class we extends ye{constructor({value:e=new ye,local:t=!1,...r}={}){super(r),this.value=e,this.local=t}}class Se{constructor({data:e=p}={}){this.dataView=n.BufferSourceConverter.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=n.BufferSourceConverter.toUint8Array(e)}fromBER(e,t,r){return r=t+r,this.dataView=n.BufferSourceConverter.toUint8Array(e).subarray(t,r),r}toBER(e){return this.dataView.slice().buffer}}function Ae(e,t,r){if(r instanceof ve){for(let n=0;n<r.value.length;n++)if(Ae(e,t,r.value[n]).verified)return{verified:!0,result:e};var n={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(h)&&(n.name=r.name),n}if(r instanceof ye)return r.hasOwnProperty(h)&&(e[r.name]=t),{verified:!0,result:e};if(e instanceof Object==0)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(r instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("idBlock"in r==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var i,s;if(0===(n=r.idBlock.toBER(!1)).byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===r.idBlock.fromBER(n,0,n.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===r.idBlock.hasOwnProperty("tagClass"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("tagNumber"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===r.idBlock.hasOwnProperty("isConstructed"))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!("isHexOnly"in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(r.idBlock.isHexOnly){if(f in r.idBlock==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var a=r.idBlock.valueHexView,o=t.idBlock.valueHexView;if(a.length!==o.length)return{verified:!1,result:e};for(let t=0;t<a.length;t++)if(a[t]!==o[1])return{verified:!1,result:e}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,d),r.name)&&(e[r.name]=t),r instanceof k.Constructed){let s=0,a={verified:!1,result:{error:"Unknown error"}},o=r.valueBlock.value.length;if(0===(o=0<o&&r.valueBlock.value[0]instanceof we?t.valueBlock.value.length:o))return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==r.valueBlock.value.length){let t=!0;for(let e=0;e<r.valueBlock.value.length;e++)t=t&&(r.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,d),r.name)&&delete e[r.name],{verified:!(e.error="Inconsistent object length"),result:e})}for(let n=0;n<o;n++)if(n-s>=t.valueBlock.value.length){if(!1===r.valueBlock.value[n].optional)return i={verified:!1,result:e},e.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,d),r.name)&&(delete e[r.name],i.name=r.name),i}else if(r.valueBlock.value[0]instanceof we){if(!1===(a=Ae(e,t.valueBlock.value[n],r.valueBlock.value[0].value)).verified){if(!r.valueBlock.value[0].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,d),r.name)&&delete e[r.name],a;s++}if(h in r.valueBlock.value[0]&&0<r.valueBlock.value[0].name.length){let i={};void 0===(i="local"in r.valueBlock.value[0]&&r.valueBlock.value[0].local?t:e)[r.valueBlock.value[0].name]&&(i[r.valueBlock.value[0].name]=[]),i[r.valueBlock.value[0].name].push(t.valueBlock.value[n])}}else if(!1===(a=Ae(e,t.valueBlock.value[n-s],r.valueBlock.value[n])).verified){if(!r.valueBlock.value[n].optional)return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,d),r.name)&&delete e[r.name],a;s++}return!1===a.verified?(n={verified:!1,result:e},r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,d),r.name)&&(delete e[r.name],n.name=r.name),n):{verified:!0,result:e}}return r.primitiveSchema&&f in t.valueBlock?-1===(n=C(t.valueBlock.valueHexView)).offset?(s={verified:!1,result:n.result},r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,d),r.name)&&(delete e[r.name],s.name=r.name),s):Ae(e,n.result,r.primitiveSchema):{verified:!0,result:e}}},function(e,t,r){"use strict";function n(e,t,r){return e instanceof Object!=0&&null!=(e=e[t])?e:r}function i(e,t=0,r=e.byteLength-t,n=!1){let i="";for(const a of new Uint8Array(e,t,r)){var s=a.toString(16).toUpperCase();1===s.length&&(i+="0"),i+=s,n&&(i+=" ")}return i.trim()}function s(e,t){let r=0;if(1===e.length)return e[0];for(let n=e.length-1;0<=n;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function a(e,t,r=-1){var n=r;let i=e,s=0,a=Math.pow(2,t);for(let r=1;r<8;r++){if(e<a){let e;if(n<0)e=new ArrayBuffer(r),s=r;else{if(n<r)return new ArrayBuffer(0);e=new ArrayBuffer(n),s=n}var o=new Uint8Array(e);for(let e=r-1;0<=e;e--){var l=Math.pow(2,e*t);o[s-e-1]=Math.floor(i/l),i-=o[s-e-1]*l}return e}a*=Math.pow(2,t)}return new ArrayBuffer(0)}function o(...e){let t=0,r=0;for(const r of e)t+=r.byteLength;var n=new ArrayBuffer(t),i=new Uint8Array(n);for(const t of e)i.set(new Uint8Array(t),r),r+=t.byteLength;return n}function l(...e){let t=0,r=0;for(const r of e)t+=r.length;var n=new ArrayBuffer(t),i=new Uint8Array(n);for(const t of e)i.set(t,r),r+=t.length;return i}function u(){var e=new Uint8Array(this.valueHex),t=(2<=this.valueHex.byteLength&&(t=255===e[0]&&128&e[1],n=0===e[0]&&0==(128&e[1]),t||n)&&this.warnings.push("Needlessly long format"),new ArrayBuffer(this.valueHex.byteLength)),r=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++)r[e]=0;r[0]=128&e[0];var n=s(r,8),i=(t=new ArrayBuffer(this.valueHex.byteLength),new Uint8Array(t));for(let t=0;t<this.valueHex.byteLength;t++)i[t]=e[t];return i[0]&=127,s(i,8)-n}function c(e){var t,r=e<0?-1*e:e;let n=128;for(let l=1;l<8;l++){if(r<=n){if(e<0)return t=a(n-r,8,l),new Uint8Array(t)[0]|=128,t;let u=a(r,8,l);var i=new Uint8Array(u);if(128&i[0]){var s=u.slice(0),o=new Uint8Array(s);u=new ArrayBuffer(u.byteLength+1),i=new Uint8Array(u);for(let e=0;e<s.byteLength;e++)i[e+1]=o[e];i[0]=0}return u}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function h(e,t){if(e.byteLength!==t.byteLength)return!1;var r=new Uint8Array(e),n=new Uint8Array(t);for(let e=0;e<r.length;e++)if(r[e]!==n[e])return!1;return!0}function f(e,t){if(t<(e=e.toString(10)).length)return"";var r=t-e.length,n=new Array(r);for(let e=0;e<r;e++)n[e]="0";return n.join("").concat(e)}r.d(t,"a",(function(){return b})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return S})),r.d(t,"d",(function(){return g})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return w})),r.d(t,"h",(function(){return f})),r.d(t,"i",(function(){return y})),r.d(t,"j",(function(){return p})),r.d(t,"k",(function(){return o})),r.d(t,"l",(function(){return l})),r.d(t,"m",(function(){return u})),r.d(t,"n",(function(){return c})),r.d(t,"o",(function(){return s})),r.d(t,"p",(function(){return a}));const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function p(e,t=!1,r=!1,n=!1){let i=0,s=0,a=0,o="";var l=t?m:d;if(n){let t=0;for(let r=0;r<e.length;r++)if(0!==e.charCodeAt(r)){t=r;break}e=e.slice(t)}for(;i<e.length;){var u=e.charCodeAt(i++),c=(i>=e.length&&(s=1),e.charCodeAt(i++)),h=(i>=e.length&&(a=1),e.charCodeAt(i++)),f=u>>2;u=(3&u)<<4|c>>4;let t=(15&c)<<2|h>>6,n=63&h;1===s?t=n=64:1===a&&(n=64),o+=r?64===t?""+l.charAt(f)+l.charAt(u):64===n?""+l.charAt(f)+l.charAt(u)+l.charAt(t):""+l.charAt(f)+l.charAt(u)+l.charAt(t)+l.charAt(n):""+l.charAt(f)+l.charAt(u)+l.charAt(t)+l.charAt(n)}return o}function g(e,t=!1,r=!1){const n=t?m:d;function i(e){for(let t=0;t<64;t++)if(n.charAt(t)===e)return t;return 64}function s(e){return 64===e?0:e}let a=0,o="";for(;a<e.length;){var l=i(e.charAt(a++)),u=a>=e.length?0:i(e.charAt(a++)),c=a>=e.length?0:i(e.charAt(a++)),h=a>=e.length?0:i(e.charAt(a++)),f=(l=s(l)<<2|s(u)>>4,u=(15&s(u))<<4|s(c)>>2,(3&s(c))<<6|s(h));o+=String.fromCharCode(l),64!==c&&(o+=String.fromCharCode(u)),64!==h&&(o+=String.fromCharCode(f))}if(r){let e=-1;for(let t=o.length-1;0<=t;t--)if(0!==o.charCodeAt(t)){e=t;break}o=-1!==e?o.slice(0,e+1):""}return o}function b(e){let t="";for(const r of new Uint8Array(e))t+=String.fromCharCode(r);return t}function y(e){var t=e.length,r=new ArrayBuffer(t),n=new Uint8Array(r);for(let r=0;r<t;r++)n[r]=e.charCodeAt(r);return r}const v=Math.log(2);function w(e){e=Math.log(e)/v;var t=Math.floor(e);return t===(e=Math.round(e))?t:e}function S(e,t){for(const r of t)delete e[r]}},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(0),i=r(1);class s{constructor(e={}){this.algorithmId=Object(i.e)(e,"algorithmId",s.defaultValues("algorithmId")),"algorithmParams"in e&&(this.algorithmParams=Object(i.e)(e,"algorithmParams",s.defaultValues("algorithmParams"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"algorithmId":return"";case"algorithmParams":return new n.a;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}static compareWithDefault(e,t){switch(e){case"algorithmId":return""===t;case"algorithmParams":return t instanceof n.a;default:throw new Error("Invalid member name for AlgorithmIdentifier class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",optional:e.optional||!1,value:[new n.p({name:e.algorithmIdentifier||""}),new n.a({name:e.algorithmParams||"",optional:!0})]})}fromSchema(e){if(Object(i.c)(e,["algorithm","params"]),!1===(e=n.D(e,e,s.schema({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}))).verified)throw new Error("Object's schema was not verified against input data for AlgorithmIdentifier");this.algorithmId=e.result.algorithm.valueBlock.toString(),"params"in e.result&&(this.algorithmParams=e.result.params)}toSchema(){var e=[];return e.push(new n.p({value:this.algorithmId})),"algorithmParams"in this&&this.algorithmParams instanceof n.a==0&&e.push(this.algorithmParams),new n.v({value:e})}toJSON(){var e={algorithmId:this.algorithmId};return"algorithmParams"in this&&this.algorithmParams instanceof n.a==0&&(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof s!=0&&this.algorithmId===e.algorithmId&&("algorithmParams"in this?"algorithmParams"in e&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!("algorithmParams"in e))}}},function(e,t,r){"use strict";(function(e,n){r.d(t,"e",(function(){return l})),r.d(t,"d",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"f",(function(){return d})),r.d(t,"a",(function(){return m})),r.d(t,"i",(function(){return p})),r.d(t,"b",(function(){return g})),r.d(t,"c",(function(){return b})),r.d(t,"h",(function(){return y}));var i=r(0),s=r(1),a=r(43);let o={name:"none",crypto:null,subtle:null};function l(){if(void 0!==e&&"pid"in e&&void 0!==n&&"undefined"==typeof window){let t;try{t=n[e.pid].pkijs.engine}catch(e){throw new Error('Please call "setEngine" before call to "getEngine"')}return t}return o}if("undefined"!=typeof self&&"crypto"in self){let e="webcrypto";var u=self.crypto;let t;if("webkitSubtle"in self.crypto){try{t=self.crypto.webkitSubtle}catch(c){t=self.crypto.subtle}e="safari"}"subtle"in self.crypto&&(t=self.crypto.subtle),o=void 0===t?{name:e,crypto:u,subtle:null}:{name:e,crypto:u,subtle:new a.a({name:e,crypto:self.crypto,subtle:t})}}u=o.name,a=o.crypto;var c=o.subtle;if(void 0!==e&&"pid"in e&&void 0!==n&&"undefined"==typeof window){if(void 0===n[e.pid])n[e.pid]={};else if("object"!=typeof n[e.pid])throw new Error(`Name global.${e.pid} already exists and it is not an object`);if(void 0===n[e.pid].pkijs)n[e.pid].pkijs={};else if("object"!=typeof n[e.pid].pkijs)throw new Error(`Name global.${e.pid}.pkijs already exists and it is not an object`);n[e.pid].pkijs.engine={name:u,crypto:a,subtle:c}}else o.name!==u&&(o={name:u,crypto:a,subtle:c});function h(){var e=l();if(null!==e.subtle)return e.subtle}function f(e){return l().subtle.getRandomValues(e)}function d(e){return l().subtle.getOIDByAlgorithm(e)}function m(e){var t,r,n;return e.byteLength%2!=0?new ArrayBuffer(0):(t=e.byteLength/2,r=new ArrayBuffer(t),new Uint8Array(r).set(new Uint8Array(e,0,t)),r=new i.m({valueHex:r}),n=new ArrayBuffer(t),new Uint8Array(n).set(new Uint8Array(e,t,t)),e=new i.m({valueHex:n}),new i.v({value:[r.convertToDER(),e.convertToDER()]}).toBER(!1))}function p(e){let t=!1,r="";var n=e.trim();for(let e=0;e<n.length;e++)32===n.charCodeAt(e)?!1===t&&(t=!0):(t&&(r+=" ",t=!1),r+=n[e]);return r.toLowerCase()}function g(e){if(e instanceof i.v==0)return new ArrayBuffer(0);if(2!==e.valueBlock.value.length)return new ArrayBuffer(0);if(e.valueBlock.value[0]instanceof i.m==0)return new ArrayBuffer(0);if(e.valueBlock.value[1]instanceof i.m==0)return new ArrayBuffer(0);var t,r=e.valueBlock.value[0].convertFromDER(),n=e.valueBlock.value[1].convertFromDER();switch(!0){case r.valueBlock.valueHex.byteLength<n.valueBlock.valueHex.byteLength:if(n.valueBlock.valueHex.byteLength-r.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");var a=n.valueBlock.valueHex.byteLength,o=new Uint8Array(r.valueBlock.valueHex);a=new ArrayBuffer(a);return(l=new Uint8Array(a)).set(o,1),l[0]=0,Object(s.k)(a,n.valueBlock.valueHex);case r.valueBlock.valueHex.byteLength>n.valueBlock.valueHex.byteLength:if(r.valueBlock.valueHex.byteLength-n.valueBlock.valueHex.byteLength!=1)throw new Error("Incorrect DER integer decoding");o=r.valueBlock.valueHex.byteLength;var l=new Uint8Array(n.valueBlock.valueHex);a=new ArrayBuffer(o);return(o=new Uint8Array(a)).set(l,1),o[0]=0,Object(s.k)(r.valueBlock.valueHex,a);default:if(r.valueBlock.valueHex.byteLength%2)return l=r.valueBlock.valueHex.byteLength+1,o=new Uint8Array(r.valueBlock.valueHex),a=new ArrayBuffer(l),(t=new Uint8Array(a)).set(o,1),t[0]=0,o=new Uint8Array(n.valueBlock.valueHex),t=new ArrayBuffer(l),(l=new Uint8Array(t)).set(o,1),l[0]=0,Object(s.k)(a,t)}return Object(s.k)(r.valueBlock.valueHex,n.valueBlock.valueHex)}function b(e){return l().subtle.getAlgorithmByOID(e)}function y(e,t,r,n){let i=0,a=1;var o=[];switch(e.toUpperCase()){case"SHA-1":i=160;break;case"SHA-256":i=256;break;case"SHA-384":i=384;break;case"SHA-512":i=512;break;default:return Promise.reject("Unknown hash function: "+e)}if(t instanceof ArrayBuffer==0)return Promise.reject('Please set "Zbuffer" as "ArrayBuffer"');if(0===t.byteLength)return Promise.reject('"Zbuffer" has zero length, error');if(n instanceof ArrayBuffer==0)return Promise.reject('Please set "SharedInfo" as "ArrayBuffer"');var l=r/i;0<Math.floor(l)&&0<l-(a=Math.floor(l))&&a++;for(let r=1;r<=a;r++)o.push(function(e,t,r,n){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:return Promise.reject("Unknown hash function: "+e)}var i,a,o;return t instanceof ArrayBuffer==0?Promise.reject('Please set "Zbuffer" as "ArrayBuffer"'):0===t.byteLength?Promise.reject('"Zbuffer" has zero length, error'):n instanceof ArrayBuffer==0?Promise.reject('Please set "SharedInfo" as "ArrayBuffer"'):255<r?Promise.reject('Please set "Counter" variable to value less or equal to 255'):(i=new ArrayBuffer(4),(a=new Uint8Array(i))[0]=0,a[1]=0,a[2]=0,a[3]=r,a=new ArrayBuffer(0),void 0===(o=h())?Promise.reject("Unable to create WebCrypto object"):(a=Object(s.k)(a,t),a=Object(s.k)(a,i),a=Object(s.k)(a,n),o.digest({name:e},a).then(e=>({counter:r,result:e}))))}(e,t,r,n));return Promise.all(o).then(e=>{let t=new ArrayBuffer(0),n=1,i=!0;for(;i;){i=!1;for(const r of e)if(r.counter===n){t=Object(s.k)(t,r.result),i=!0;break}n++}if(r>>=3,t.byteLength>r){var a=new ArrayBuffer(r),o=new Uint8Array(a),l=new Uint8Array(t);for(let e=0;e<r;e++)o[e]=l[e];return a}return t})}}).call(this,r(20),r(18))},function(e,t,r){"use strict";(function(e){
/*!
 * MIT License
 * 
 * Copyright (c) 2017-2022 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */
Object.defineProperty(t,"__esModule",{value:!0});class r{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:(e.byteLength===e.buffer.byteLength?e:this.toUint8Array(e).slice()).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){var n=r.toUint8Array(e),i=r.toUint8Array(t);if(n.length!==i.byteLength)return!1;for(let e=0;e<n.length;e++)if(n[e]!==i[e])return!1;return!0}static concat(...e){if(Array.isArray(e[0])){var t=e[0];let i=0;for(const e of t)i+=e.byteLength;var r=new Uint8Array(i);let s=0;for(const e of t){var n=this.toUint8Array(e);r.set(n,s),s+=n.length}return e[1]?this.toView(r,e[1]):r.buffer}return this.concat(e)}}class n{static fromString(e){var t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r.buffer}static toString(e){var t=r.toUint8Array(e);let n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return decodeURIComponent(escape(n))}}class i{static toString(e,t=!1){var n=r.toArrayBuffer(e),i=new DataView(n);let s="";for(let e=0;e<n.byteLength;e+=2){var a=i.getUint16(e,t);s+=String.fromCharCode(a)}return s}static fromString(e,t=!1){var r=new ArrayBuffer(2*e.length),n=new DataView(r);for(let r=0;r<e.length;r++)n.setUint16(2*r,e.charCodeAt(r),t);return r}}class s{static isHex(e){return"string"==typeof e&&/^[a-z0-9]+$/i.test(e)}static isBase64(e){return"string"==typeof e&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}static isBase64Url(e){return"string"==typeof e&&/^[a-zA-Z0-9-_]+$/i.test(e)}static ToString(e,t="utf8"){var n=r.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(n);case"binary":return this.ToBinary(n);case"hex":return this.ToHex(n);case"base64":return this.ToBase64(n);case"base64url":return this.ToBase64Url(n);case"utf16le":return i.toString(n,!0);case"utf16":case"utf16be":return i.toString(n);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return i.fromString(e,!0);case"utf16":case"utf16be":return i.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(t){var n;t=r.toUint8Array(t);return"undefined"!=typeof btoa?(n=this.ToString(t,"binary"),btoa(n)):e.from(t).toString("base64")}static FromBase64(t){if(!(t=this.formatString(t)))return new ArrayBuffer(0);if(s.isBase64(t))return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(e.from(t,"base64")).buffer;throw new TypeError("Argument 'base64Text' is not Base64 encoded")}static FromBase64Url(e){if(!(e=this.formatString(e)))return new ArrayBuffer(0);if(s.isBase64Url(e))return this.FromBase64(this.Base64Padding(e.replace(/\-/g,"+").replace(/\_/g,"/")));throw new TypeError("Argument 'base64url' is not Base64Url encoded")}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=s.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return n.fromString(e);case"utf16":case"utf16be":return i.fromString(e);case"utf16le":case"usc2":return i.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=s.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return n.toString(e);case"utf16":case"utf16be":return i.toString(e);case"utf16le":case"usc2":return i.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){var t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}static ToBinary(e){var t=r.toUint8Array(e);let n="";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n}static ToHex(e){var t=r.toUint8Array(e),n=[],i=t.length;for(let e=0;e<i;e++){var s=t[e].toString(16).padStart(2,"0");n.push(s)}return n.join("")}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!s.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t="0"+t);var r=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){var n=t.slice(e,e+2);r[e/2]=parseInt(n,16)}return r.buffer}static ToUtf16String(e,t=!1){return i.toString(e,t)}static FromUtf16String(e,t=!1){return i.fromString(e,t)}static Base64Padding(e){var t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}s.DEFAULT_UTF8_ENCODING="utf8",t.BufferSourceConverter=r,t.Convert=s,t.assign=function(e){var t=e;for(let e=1;e<arguments.length;e++){var r=arguments[e];for(const e in r)t[e]=r[e]}return t},t.combine=function(...e){var t=e.map(e=>e.byteLength).reduce((e,t)=>e+t);const r=new Uint8Array(t);let n=0;return e.map(e=>new Uint8Array(e)).forEach(e=>{for(const t of e)r[n++]=t}),r.buffer},t.isEqual=function(e,t){if(!e||!t)return!1;if(e.byteLength!==t.byteLength)return!1;var r=new Uint8Array(e),n=new Uint8Array(t);for(let t=0;t<e.byteLength;t++)if(r[t]!==n[t])return!1;return!0}}).call(this,r(9).Buffer)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(0),i=r(1);class s{constructor(e={}){this.type=Object(i.e)(e,"type",s.defaultValues("type")),this.values=Object(i.e)(e,"values",s.defaultValues("values")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return"";case"values":return[];default:throw new Error("Invalid member name for Attribute class: "+e)}}static compareWithDefault(e,t){switch(e){case"type":return""===t;case"values":return 0===t.length;default:throw new Error("Invalid member name for Attribute class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.p({name:e.type||""}),new n.w({name:e.setName||"",value:[new n.u({name:e.values||"",value:new n.a})]})]})}fromSchema(e){if(Object(i.c)(e,["type","values"]),!1===(e=n.D(e,e,s.schema({names:{type:"type",values:"values"}}))).verified)throw new Error("Object's schema was not verified against input data for Attribute");this.type=e.result.type.valueBlock.toString(),this.values=e.result.values}toSchema(){return new n.v({value:[new n.p({value:this.type}),new n.w({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,e=>e.toJSON())}}}},function(e,t,r){"use strict";(function(e){r.d(t,"c",(function(){return l})),r.d(t,"h",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"j",(function(){return h})),r.d(t,"d",(function(){return f})),r.d(t,"i",(function(){return d})),r.d(t,"k",(function(){return m})),r.d(t,"a",(function(){return p})),r.d(t,"f",(function(){return g})),r.d(t,"g",(function(){return b})),r.d(t,"b",(function(){return y}));var n=r(62),i=r(0),s=r(64),a=r(16),o=r.n(a);function l(e){var t={};for(const n in e){var r=e[n];"object"==typeof r?Array.isArray(r)||r instanceof ArrayBuffer||r&&"length"in r?t[n]=r.slice():t[n]=l(r):t[n]=r}return t}function u(e,t){var r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function c(e,t){if(t in e)return e[t];for(const n in e){var r=e[n];if("object"==typeof r&&void 0!==(r=c(r,t)))return r}}function h(e,t){Object.keys(e).forEach(r=>{r in t&&(e[r]=t[r].transform(e[r])),"object"==typeof e[r]&&h(e[r],t)})}function f(t){var r=e.from(t).toString("base64");let n="";for(let e=0;e<r.length;++e)n+=e%64==0?"\r\n"+r[e]:r[e];return"-----BEGIN CERTIFICATE-----"+n+"\r\n-----END CERTIFICATE-----"}function d(e){return JSON.stringify(e,null,2)}function m(t){var r=[];for(const o of t){var a=o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength);a=Object(i.E)(a),a={version:(a=new s.a({schema:a.result})).version,serialNumber:e.from(a.serialNumber.valueBlock.valueHex).toString("hex"),signature:{algorithmId:n.a[a.signature.algorithmId],value:e.from(a.signatureValue.valueBlock.valueHex).toString("hex")},issuer:a.issuer.typesAndValues[0].value.valueBlock.value,notBefore:a.notBefore.value,notAfter:a.notAfter.value,subject:a.subject.typesAndValues.map(e=>e.value.valueBlock.value),subjectPublicKeyInfo:a.subjectPublicKeyInfo};r.push(d(a))}return r.join("\n")}const p=new((a=r(63)).Encoder)({genTypes:[ArrayBuffer,(t,r)=>t.pushAny(e.from(r))]});function g(e){return e instanceof Error?e.toString():JSON.stringify(e,null,2)}function b(e){return e.options[e.selectedIndex].value}function y(e){try{return o.a.decodeFirstSync(e)}catch(e){if(e.value)return e.value;throw e}}}).call(this,r(9).Buffer)},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),i=r(1),s=r(2);class a{constructor(e={}){if(this.contentType=Object(i.e)(e,"contentType",a.defaultValues("contentType")),this.contentEncryptionAlgorithm=Object(i.e)(e,"contentEncryptionAlgorithm",a.defaultValues("contentEncryptionAlgorithm")),"encryptedContent"in e&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass)&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed){var t=new n.q({idBlock:{isConstructed:!0},isConstructed:!0});let e=0,i=this.encryptedContent.valueBlock.valueHex.byteLength;for(;0<i;){var r=new Uint8Array(this.encryptedContent.valueBlock.valueHex,e,e+1024>this.encryptedContent.valueBlock.valueHex.byteLength?this.encryptedContent.valueBlock.valueHex.byteLength-e:1024),s=new ArrayBuffer(r.length),o=new Uint8Array(s);for(let e=0;e<o.length;e++)o[e]=r[e];t.valueBlock.value.push(new n.q({valueHex:s})),i-=r.length,e+=r.length}this.encryptedContent=t}"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"contentType":return"";case"contentEncryptionAlgorithm":return new s.a;case"encryptedContent":return new n.q;default:throw new Error("Invalid member name for EncryptedContentInfo class: "+e)}}static compareWithDefault(e,t){switch(e){case"contentType":return""===t;case"contentEncryptionAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"encryptedContent":return t.isEqual(a.defaultValues(e));default:throw new Error("Invalid member name for EncryptedContentInfo class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.p({name:e.contentType||""}),s.a.schema(e.contentEncryptionAlgorithm||{}),new n.f({value:[new n.g({name:e.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0},value:[new n.u({value:new n.q})]}),new n.r({name:e.encryptedContent||"",idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){if(Object(i.c)(e,["contentType","contentEncryptionAlgorithm","encryptedContent"]),!1===(e=n.D(e,e,a.schema({names:{contentType:"contentType",contentEncryptionAlgorithm:{names:{blockName:"contentEncryptionAlgorithm"}},encryptedContent:"encryptedContent"}}))).verified)throw new Error("Object's schema was not verified against input data for EncryptedContentInfo");this.contentType=e.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new s.a({schema:e.result.contentEncryptionAlgorithm}),"encryptedContent"in e.result&&(this.encryptedContent=e.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){var e,t={isIndefiniteForm:!1},r=[];return r.push(new n.p({value:this.contentType})),r.push(this.contentEncryptionAlgorithm.toSchema()),"encryptedContent"in this&&(t.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,(e=this.encryptedContent).idBlock.tagClass=3,e.idBlock.tagNumber=0,e.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,r.push(e)),new n.v({lenBlock:t,value:r})}toJSON(){var e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return"encryptedContent"in this&&(e.encryptedContent=this.encryptedContent.toJSON()),e}}},function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r(67),i=r(68),s=r(52);function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(e=null===e?new l(t):e).length=t,e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"!=typeof e)return u(this,e,t,r);if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var i=e,a=t,u=r;if(a.byteLength,u<0||a.byteLength<u)throw new RangeError("'offset' is out of bounds");if(a.byteLength<u+(n||0))throw new RangeError("'length' is out of bounds");return a=void 0===u&&void 0===n?new Uint8Array(a):void 0===n?new Uint8Array(a,u):new Uint8Array(a,u,n),l.TYPED_ARRAY_SUPPORT?(i=a).__proto__=l.prototype:i=f(i,a),i}if("string"!=typeof t){if(u=e,n=t,l.isBuffer(n))return 0!==(u=o(u,a=0|d(n.length))).length&&n.copy(u,0,0,a),u;if(n){if("undefined"!=typeof ArrayBuffer&&n.buffer instanceof ArrayBuffer||"length"in n)return"number"!=typeof n.length||function(e){return e!=e}(n.length)?o(u,0):f(u,n);if("Buffer"===n.type&&s(n.data))return f(u,n.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}if(i=e,n=t,e=r,l.isEncoding(e="string"==typeof e&&""!==e?e:"utf8"))return(n=(i=o(i,t=0|m(n,e))).write(n,e))!==t?i.slice(0,n):i;throw new TypeError('"encoding" must be a valid string encoding')}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=o(e,t<0?0:0|d(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function d(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function m(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;var r=(e="string"!=typeof e?""+e:e).length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return x(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(n)return x(e).length;t=(""+t).toLowerCase(),n=!0}}function p(e,t,r){var i,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var a=t,o=r,l=this.length;(!o||o<0||l<o)&&(o=l);for(var u="",c=a=!a||a<0?0:a;c<o;++c)u+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(this[c]);return u;case"utf8":case"utf-8":return S(this,t,r);case"ascii":l=t;var h=r,f="";h=Math.min(this.length,h);for(var d=l;d<h;++d)f+=String.fromCharCode(127&this[d]);return f;case"latin1":case"binary":a=t;var m=r,p="";m=Math.min(this.length,m);for(var g=a;g<m;++g)p+=String.fromCharCode(this[g]);return p;case"base64":return b=this,i=r,0===(y=t)&&i===b.length?n.fromByteArray(b):n.fromByteArray(b.slice(y,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var b=t,y=r,v=this.slice(b,y),w="",A=0;A<v.length;A+=2)w+=String.fromCharCode(v[A]+256*v[A+1]);return w;default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,(r=(r=isNaN(r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):y(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var s=1,a=e.length,o=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a/=s=2,o/=2,r/=2}function l(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i)for(var u=-1,c=r;c<a;c++)if(l(e,c)===l(t,-1===u?0:c-u)){if(c-(u=-1===u?c:u)+1===o)return u*s}else-1!==u&&(c-=c-u),u=-1;else for(c=r=a<r+o?a-o:r;0<=c;c--){for(var h=!0,f=0;f<o;f++)if(l(e,c+f)!==l(t,f)){h=!1;break}if(h)return c}return-1}function v(e,t,r,n){return T(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function w(e,t,r,n){return T(function(e,t){for(var r,n,i=[],s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(t,e.length-r),e,r,n)}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var s,a,o,l,u=e[i],c=null,h=239<u?4:223<u?3:191<u?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(s=e[i+1]))&&127<(l=(31&u)<<6|63&s)&&(c=l);break;case 3:s=e[i+1],a=e[i+2],128==(192&s)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&s)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:s=e[i+1],a=e[i+2],o=e[i+3],128==(192&s)&&128==(192&a)&&128==(192&o)&&65535<(l=(15&u)<<18|(63&s)<<12|(63&a)<<6|63&o)&&l<1114112&&(c=l)}null===c?(c=65533,h=1):65535<c&&(n.push((c-=65536)>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}var f=n,d=f.length;if(d<=A)return String.fromCharCode.apply(String,f);for(var m="",p=0;p<d;)m+=String.fromCharCode.apply(String,f.slice(p,p+=A));return m}t.Buffer=l,t.SlowBuffer=function(e){return+e!=e&&(e=0),l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol)&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0}),l.alloc=function(e,t,r){return n=null,t=t,r=r,c(e=e),e<=0||void 0===t?o(n,e):"string"==typeof r?o(n,e).fill(t,r):o(n,e).fill(t);var n},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!s(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);if(void 0===t)for(i=t=0;i<e.length;++i)t+=e[i].length;for(var r=l.allocUnsafe(t),n=0,i=0;i<e.length;++i){var a=e[i];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,n),n+=a.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?S(this,0,e):p.apply(this,arguments)},l.prototype.equals=function(e){if(l.isBuffer(e))return this===e||0===l.compare(this,e);throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r)&&(e+=" ... "),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0),o=Math.min(s,a),u=this.slice(n,i),c=e.slice(t,r),h=0;h<o;++h)if(u[h]!==c[h]){s=u[h],a=c[h];break}return s<a?-1:a<s?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||i<r)&&(r=i),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var s,a,o,l=!1;;)switch(n){case"hex":var u=e,c=t,h=r,f=(c=Number(c)||0,this.length-c);if((!h||f<(h=Number(h)))&&(h=f),(f=u.length)%2!=0)throw new TypeError("Invalid hex string");f/2<h&&(h=f/2);for(var d=0;d<h;++d){var m=parseInt(u.substr(2*d,2),16);if(isNaN(m))return d;this[c+d]=m}return d;case"utf8":case"utf-8":return f=t,o=r,T(x(e,(a=this).length-f),a,f,o);case"ascii":return v(this,e,t,r);case"latin1":case"binary":return v(this,e,t,r);case"base64":return a=this,o=t,s=r,T(j(e),a,o,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,r);default:if(l)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),l=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function E(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,i,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function I(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,s=Math.min(e.length-r,2);i<s;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function _(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,s=Math.min(e.length-r,4);i<s;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function B(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function N(e,t,r,n,s){return s||B(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,s){return s||B(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(i=this.subarray(e,t)).__proto__=l.prototype;else for(var n=t-e,i=new l(n,void 0),s=0;s<n;++s)i[s]=this[s+e];return i},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=this[e+--t],i=1;0<t&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUInt8=function(e,t){return t||E(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||E(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||E(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||E(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||E(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=this[e],i=1,s=0;++s<t&&(i*=256);)n+=this[e+s]*i;return(i*=128)<=n&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||E(e,t,this.length);for(var n=t,i=1,s=this[e+--n];0<n&&(i*=256);)s+=this[e+--n]*i;return(i*=128)<=s&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return t||E(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){return t||E(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},l.prototype.readInt16BE=function(e,t){return t||E(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},l.prototype.readInt32LE=function(e,t){return t||E(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||E(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||E(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||E(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||E(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||E(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t|=0,r|=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t|=0,r|=0,n||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,s=1;for(this[t+i]=255&e;0<=--i&&(s*=256);)this[t+i]=e/s&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):_(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){e=+e,t|=0,n||k(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){e=+e,t|=0,n||k(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var i=r-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&(e=e<0?255+e+1:e),t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):_(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):_(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return N(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return N(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i,s=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&r<t&&t<n)for(i=s-1;0<=i;--i)e[i+t]=this[i+r];else if(s<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<s;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+s),t);return s},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){var i;if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length&&(i=e.charCodeAt(0))<256&&(e=i),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(!(r<=t))if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(o=t;o<r;++o)this[o]=e;else for(var s=l.isBuffer(e)?e:x(new l(e,n).toString()),a=s.length,o=0;o<r-t;++o)this[o+t]=s[o%a];return this};var O=/[^+\/0-9A-Za-z-_]/g;function x(e,t){t=t||1/0;for(var r,n=e.length,i=null,s=[],a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,r<128){if(--t<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function j(e){return n.toByteArray(function(e){var t;if((e=((t=e).trim?t.trim():t.replace(/^\s+|\s+$/g,"")).replace(O,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function T(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(this,r(18))},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),i=r(1),s=r(3),a=r(2),o=r(12),l=r(36);class u{constructor(e={}){this.algorithm=Object(i.e)(e,"algorithm",u.defaultValues("algorithm")),this.subjectPublicKey=Object(i.e)(e,"subjectPublicKey",u.defaultValues("subjectPublicKey")),"parsedKey"in e&&(this.parsedKey=Object(i.e)(e,"parsedKey",u.defaultValues("parsedKey"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"algorithm":return new a.a;case"subjectPublicKey":return new n.b;default:throw new Error("Invalid member name for PublicKeyInfo class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[a.a.schema(e.algorithm||{}),new n.b({name:e.subjectPublicKey||""})]})}fromSchema(e){if(Object(i.c)(e,["algorithm","subjectPublicKey"]),!1===(e=n.D(e,e,u.schema({names:{algorithm:{names:{blockName:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}))).verified)throw new Error("Object's schema was not verified against input data for PublicKeyInfo");switch(this.algorithm=new a.a({schema:e.result.algorithm}),this.subjectPublicKey=e.result.subjectPublicKey,this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===n.p.blockName())try{this.parsedKey=new o.a({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHex})}catch(e){}break;case"1.2.840.113549.1.1.1":var t=n.E(this.subjectPublicKey.valueBlock.valueHex);if(-1!==t.offset)try{this.parsedKey=new l.a({schema:t.result})}catch(e){}}}toSchema(){return new n.v({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if("parsedKey"in this==0)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};var e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}var t=this.parsedKey.toJSON();for(const r of Object.keys(t))e[r]=t[r];return e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new o.a({json:e}),this.algorithm=new a.a({algorithmId:"1.2.840.10045.2.1",algorithmParams:new n.p({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new l.a({json:e}),this.algorithm=new a.a({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new n.n});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.subjectPublicKey=new n.b({valueHex:this.parsedKey.toSchema().toBER(!1)})}}importKey(e){let t=Promise.resolve();const r=this;if(void 0===e)return Promise.reject("Need to provide publicKey input parameter");const i=Object(s.d)();return void 0===i?Promise.reject("Unable to create WebCrypto object"):t=(t=t.then(()=>i.exportKey("spki",e))).then(e=>{e=n.E(e);try{r.fromSchema(e.result)}catch(e){return Promise.reject("Error during initializing object from schema")}},e=>Promise.reject("Error during exporting public key: "+e))}}},function(e,t,r){"use strict";(function(e){r.d(t,"d",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"e",(function(){return c})),r.d(t,"f",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"b",(function(){return d})),r.d(t,"h",(function(){return m})),r.d(t,"a",(function(){return p}));var n=r(7),i=r(13),s=r(16),a=r.n(s),o=(s=r(17),r.n(s));function l(t){if((t=t instanceof ArrayBuffer?e.from(t):t).byteLength<37)throw new Error(`Authenticator data was ${t.byteLength} bytes, expected at least 37 bytes`);var r={};let i=0;r.rpIdHash=t.slice(i,i+=32).toString("hex");var s,o=t.slice(i,i+=1)[0];r.flags={userPresent:0!=(1&o),reserved1:0!=(2&o),userVerified:0!=(4&o),backupEligibility:0!=(8&o),backupState:0!=(16&o),reserved2:0!=(32&o),attestedCredentialData:0!=(64&o),extensionDataIncluded:0!=(128&o)},o=t.slice(i,i+=4);if(r.signCount=o.readUInt32BE(0),r.flags.attestedCredentialData&&((r.attestedCredentialData=o={}).aaguid=t.slice(i,i+=16),s=t.slice(i,i+=2).readUInt16BE(0),o.credentialId=t.slice(i,i+=s),s=Object(n.b)(t.slice(i)),s=e.from(a.a.encode(s)),o.credentialPublicKey=s,i+=s.byteLength),r.flags.extensionDataIncluded&&(o=Object(n.b)(t.slice(i)),s=e.from(a.a.encode(o)),r.attestedExtensionData=a.a.decodeFirstSync(s),i+=s.byteLength),t.byteLength>i)throw new Error("Leftover bytes detected while parsing authenticator data");return r}function u(t){t=t instanceof ArrayBuffer?e.from(t):e.from(t.buffer,t.byteOffset,t.byteLength);try{var r=a.a.decodeFirstSync(t);return r.authData&&(r.authData=l(r.authData)),r}catch(r){return t="Failed to decode attestationObject, unknown attestation type? ",o.a.error(t,r),t}}function c(e){return e=new TextDecoder("utf-8").decode(e),JSON.parse(e)}function h(e){e=Object(n.c)(e);var t=Object(n.h)(i.b,["clientDataJSON","authenticatorData","attestationObject"]);return Object(n.j)(e,t),e}function f(e){e=Object(n.c)(e),Object(n.j)(e,i.b);{let t=`<code class="output-section"><pre>rawId: ${e.rawId}\nid: ${e.id}\ntype: ${e.type}\n</pre></code>\n<div class="output-section output-section-transparent">response: {</div>`;return e.clientDataJSON&&e.signature?t+=`\n\n<code class="output-section output-section-turqoise"><pre>signature: ${e.signature}\n</pre>\n      <pre>userHandle: ${e.userHandle}\n</pre>\n      <pre>clientDataJSON: ${Object(n.i)(e.clientDataJSON)}</pre></code>`:e.clientDataJSON&&(t+=`<code class="output-section output-section-turqoise"><pre>clientDataJSON: ${Object(n.i)(e.clientDataJSON)}</pre></code>`),(e.authenticatorAttachment||e.transports)&&(t+='<code class="output-section output-section-green"><pre>',e.authenticatorAttachment&&(t+=`authenticatorAttachment: ${e.authenticatorAttachment},\n`),e.transports&&(t+=`transports: ${Object(n.i)(e.transports)},`),t+="</pre></code>"),e.attestationObject&&(t+=`<code class="output-section output-section-green"><pre>attestationObject: ${Object(n.i)(e.attestationObject)},</pre></code>`),e.authenticatorData&&(t+=`<code class="output-section output-section-green"><pre>authenticatorData: ${Object(n.i)(e.authenticatorData)},</pre></code>`),e.extensions&&(t+=`<code class="output-section output-section-green">\n        <pre>extensions: ${Object(n.i)(e.extensions)}</pre></code>`),t+='<div class="output-section output-section-transparent">}</div>'}}function d(e){var t={rawId:e.rawId,id:e.id,type:e.type,clientDataJSON:e.response.clientDataJSON};return e.authenticatorAttachment&&(t.authenticatorAttachment=e.authenticatorAttachment),e.response.attestationObject&&(t.attestationObject=e.response.attestationObject),e.response.authenticatorData&&(t.authenticatorData=e.response.authenticatorData),e.response.signature&&(t.signature=e.response.signature),e.response.userHandle&&(t.userHandle=e.response.userHandle),"function"==typeof e.response.getTransports&&(t.transports=e.response.getTransports()),"function"==typeof e.getClientExtensionResults&&(t.extensions=e.getClientExtensionResults()),t}function m(e){let t=e.split("\n");return(t=t.map(e=>{for(const n of Object.keys(i.b)){var t=`"${n}": `,r=e.indexOf(t);if(-1!==r&&i.b[n].buttons){r+=t.length,t=e.substring(0,r),r=e.substring(r);let s="";for(const e of i.b[n].buttons)s+=`<button class="button hide-mobile" data-key="${n}" onclick="outputButtonClick(event);">`+e+"</button>";e=""+t+s+" "+r}}return s=(n=e).indexOf(":"),a=n.substring(0,s),o=n.substr(s),s<0?n:": {"===o?`<span class="output-key">${a}</span>`+o:`<span class="output-key">${a}</span><span class="output-value">${o}</span>`;var n,s,a,o})).join("\n")}function p(e){return e=u(e.response.attestationObject),console.log(e.authData.flags),e.authData.flags.userPresent}}).call(this,r(9).Buffer)},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),i=r(1),s=r(26);class a{constructor(e={}){this.x=Object(i.e)(e,"x",a.defaultValues("x")),this.y=Object(i.e)(e,"y",a.defaultValues("y")),this.namedCurve=Object(i.e)(e,"namedCurve",a.defaultValues("namedCurve")),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"x":case"y":return new ArrayBuffer(0);case"namedCurve":return"";default:throw new Error("Invalid member name for ECCPublicKey class: "+e)}}static compareWithDefault(e,t){switch(e){case"x":case"y":return Object(i.f)(t,a.defaultValues(e));case"namedCurve":return""===t;default:throw new Error("Invalid member name for ECCPublicKey class: "+e)}}static schema(e=0){return new n.t}fromSchema(e){if(e instanceof ArrayBuffer==0)throw new Error("Object's schema was not verified against input data for ECPublicKey");if(4!==new Uint8Array(e)[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");var t=s.a.find(this.namedCurve);if(!t)throw new Error("Incorrect curve OID: "+this.namedCurve);if(t=t.size,e.byteLength!==2*t+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.x=e.slice(1,t+1),this.y=e.slice(1+t,2*t+1)}toSchema(){return new n.t({data:Object(i.k)(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){var e=s.a.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:Object(i.j)(Object(i.a)(this.x),!0,!0,!1),y:Object(i.j)(Object(i.a)(this.y),!0,!0,!1)}}fromJSON(e){let t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');var r=s.a.find(e.crv);if(r&&(this.namedCurve=r.id,t=r.size),!("x"in e))throw new Error('Absent mandatory parameter "x"');if((r=Object(i.i)(Object(i.d)(e.x,!0))).byteLength<t?(this.x=new ArrayBuffer(t),a=new Uint8Array(this.x),n=new Uint8Array(r),a.set(n,1)):this.x=r.slice(0,t),!("y"in e))throw new Error('Absent mandatory parameter "y"');var n,a=Object(i.i)(Object(i.d)(e.y,!0));a.byteLength<t?(this.y=new ArrayBuffer(t),n=new Uint8Array(this.y),r=new Uint8Array(a),n.set(r,1)):this.y=a.slice(0,t)}}},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var n=r(11),i=r(30);function s(t){if(!(t instanceof e))try{t=e.from(t)}catch(t){return""}return t.toString("hex")}const a={rawId:{transform:s,buttons:["Use","Download"]},sig:{transform:s,buttons:["Download"]},signature:{transform:s,buttons:["Download"]},userHandle:{transform:s,buttons:["Download"]},x5c:{transform:e=>e.map(s),buttons:["View","Download PEM"]},credentialPublicKey:{transform:r.n(i).a,buttons:["Download COSE","Download JWK","Download PEM"]},authenticatorData:{transform:n.d},attestationObject:{transform:n.c},clientDataJSON:{transform:n.e},aaguid:{transform:function(e){return[(e=e.toString("hex")).slice(0,8),e.slice(8,12),e.slice(12,16),e.slice(16,20),e.slice(20,32)].join("-")}},credentialId:{transform:s}}}).call(this,r(9).Buffer)},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(0),i=r(1),s=r(2),a=r(6),o=r(37),l=r(38);class u{constructor(e={}){this.version=Object(i.e)(e,"version",u.defaultValues("version")),this.privateKeyAlgorithm=Object(i.e)(e,"privateKeyAlgorithm",u.defaultValues("privateKeyAlgorithm")),this.privateKey=Object(i.e)(e,"privateKey",u.defaultValues("privateKey")),"attributes"in e&&(this.attributes=Object(i.e)(e,"attributes",u.defaultValues("attributes"))),"parsedKey"in e&&(this.parsedKey=Object(i.e)(e,"parsedKey",u.defaultValues("parsedKey"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"version":return 0;case"privateKeyAlgorithm":return new s.a;case"privateKey":return new n.q;case"attributes":return[];case"parsedKey":return{};default:throw new Error("Invalid member name for PrivateKeyInfo class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.m({name:e.version||""}),s.a.schema(e.privateKeyAlgorithm||{}),new n.q({name:e.privateKey||""}),new n.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.u({name:e.attributes||"",value:a.a.schema()})]})]})}fromSchema(e){if(Object(i.c)(e,["version","privateKeyAlgorithm","privateKey","attributes"]),!1===(e=n.D(e,e,u.schema({names:{version:"version",privateKeyAlgorithm:{names:{blockName:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}))).verified)throw new Error("Object's schema was not verified against input data for PrivateKeyInfo");switch(this.version=e.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new s.a({schema:e.result.privateKeyAlgorithm}),this.privateKey=e.result.privateKey,"attributes"in e.result&&(this.attributes=Array.from(e.result.attributes,e=>new a.a({schema:e}))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":var t=n.E(this.privateKey.valueBlock.valueHex);-1!==t.offset&&(this.parsedKey=new l.a({schema:t.result}));break;case"1.2.840.10045.2.1":"algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof n.p&&-1!==(t=n.E(this.privateKey.valueBlock.valueHex)).offset&&(this.parsedKey=new o.a({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:t.result}))}}toSchema(){var e=[new n.m({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return"attributes"in this&&e.push(new n.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,e=>e.toSchema())})),new n.v({value:e})}toJSON(){var e;if("parsedKey"in this==0)return e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()},"attributes"in this&&(e.attributes=Array.from(this.attributes,e=>e.toJSON())),e;var t={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":t.kty="EC";break;case"1.2.840.113549.1.1.1":t.kty="RSA"}var r=this.parsedKey.toJSON();for(const e of Object.keys(r))t[e]=r[e];return t}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new o.a({json:e}),this.privateKeyAlgorithm=new s.a({algorithmId:"1.2.840.10045.2.1",algorithmParams:new n.p({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new l.a({json:e}),this.privateKeyAlgorithm=new s.a({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new n.n});break;default:throw new Error('Invalid value for "kty" parameter: '+e.kty)}this.privateKey=new n.q({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}},function(e,t,r){"use strict";t.Commented=r(69),t.Diagnose=r(91),t.Decoder=r(42),t.Encoder=r(59),t.Simple=r(33),t.Tagged=r(50),t.Map=r(92),t.comment=t.Commented.comment,t.decodeAll=t.Decoder.decodeAll,t.decodeFirst=t.Decoder.decodeFirst,t.decodeAllSync=t.Decoder.decodeAllSync,t.decodeFirstSync=t.Decoder.decodeFirstSync,t.diagnose=t.Diagnose.diagnose,t.encode=t.Encoder.encode,t.encodeCanonical=t.Encoder.encodeCanonical,t.encodeOne=t.Encoder.encodeOne,t.encodeAsync=t.Encoder.encodeAsync,t.decode=t.Decoder.decodeFirstSync,t.leveldb={decode:t.Decoder.decodeAllSync,encode:t.Encoder.encode,buffer:!0,name:"cbor"},t.hasBigInt=r(24).hasBigInt},function(e,t,r){var n;!function(){"use strict";void 0!==(n="function"==typeof(n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?s:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function o(t,r){for(var i=0;i<n.length;i++){var s=n[i];this[s]=i<t?e:this.methodFactory(s,t,r)}this.log=this.debug}function l(e,r,n){return function(){typeof console!==t&&(o.call(this,r,n),this[e].apply(this,arguments))}}function u(e,t,r){return a(e)||l.apply(this,arguments)}function c(e,r,i){var s,a=this;r=null==r?"WARN":r;var l="loglevel";function c(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(l)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?l+=":"+e:"symbol"==typeof e&&(l=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||u,a.getLevel=function(){return s},a.setLevel=function(r,i){if("string"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(s=r,!1!==i&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+r+";"}catch(e){}}}(r),o.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){r=e,c()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(r,!1),function(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var h=c();null==h&&(h=r),a.setLevel(h,!1)}var h=new c,f={},d=(h.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new c(e,h.getLevel(),h.methodFactory)),t},typeof window!==t?window.log:void 0);return h.noConflict=function(){return typeof window!==t&&window.log===h&&(window.log=d),h},h.getLoggers=function(){return f},h.default=h})?n.call(t,r,t,e):n)&&(e.exports=n)}()},function(e,t){var r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),i=r(1),s=r(2);class a{constructor(e={}){this.salt=Object(i.e)(e,"salt",a.defaultValues("salt")),this.iterationCount=Object(i.e)(e,"iterationCount",a.defaultValues("iterationCount")),"keyLength"in e&&(this.keyLength=Object(i.e)(e,"keyLength",a.defaultValues("keyLength"))),"prf"in e&&(this.prf=Object(i.e)(e,"prf",a.defaultValues("prf"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"salt":return{};case"iterationCount":return-1;case"keyLength":return 0;case"prf":return new s.a({algorithmId:"1.3.14.3.2.26",algorithmParams:new n.n});default:throw new Error("Invalid member name for PBKDF2Params class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.f({value:[new n.q({name:e.saltPrimitive||""}),s.a.schema(e.saltConstructed||{})]}),new n.m({name:e.iterationCount||""}),new n.m({name:e.keyLength||"",optional:!0}),s.a.schema(e.prf||{names:{optional:!0}})]})}fromSchema(e){if(Object(i.c)(e,["salt","iterationCount","keyLength","prf"]),!1===(e=n.D(e,e,a.schema({names:{saltPrimitive:"salt",saltConstructed:{names:{blockName:"salt"}},iterationCount:"iterationCount",keyLength:"keyLength",prf:{names:{blockName:"prf",optional:!0}}}}))).verified)throw new Error("Object's schema was not verified against input data for PBKDF2Params");this.salt=e.result.salt,this.iterationCount=e.result.iterationCount.valueBlock.valueDec,"keyLength"in e.result&&(this.keyLength=e.result.keyLength.valueBlock.valueDec),"prf"in e.result&&(this.prf=new s.a({schema:e.result.prf}))}toSchema(){var e=[];return e.push(this.salt),e.push(new n.m({value:this.iterationCount})),"keyLength"in this&&a.defaultValues("keyLength")!==this.keyLength&&e.push(new n.m({value:this.keyLength})),"prf"in this&&!1===a.defaultValues("prf").isEqual(this.prf)&&e.push(this.prf.toSchema()),new n.v({value:e})}toJSON(){var e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return"keyLength"in this&&a.defaultValues("keyLength")!==this.keyLength&&(e.keyLength=this.keyLength),"prf"in this&&!1===a.defaultValues("prf").isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}},function(e,t){var r,n;e=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var o,l=[],u=!1,c=-1;function h(){u&&o&&(u=!1,o.length?l=o.concat(l):c=-1,l.length)&&f()}function f(){if(!u){for(var e=a(h),t=(u=!0,l.length);t;){for(o=l,l=[];++c<t;)o&&o[c].run();c=-1,t=l.length}o=null,u=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||u||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=m,e.addListener=m,e.once=m,e.off=m,e.removeListener=m,e.removeAllListeners=m,e.emit=m,e.prependListener=m,e.prependOnceListener=m,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(41),i=Object.keys||function(e){var t,r=[];for(t in e)r.push(t);return r},s=((e=(e.exports=c,Object.create(r(31)))).inherits=r(14),r(53)),a=r(49);e.inherits(c,s);for(var o=i(a.prototype),l=0;l<o.length;l++){var u=o[l];c.prototype[u]||(c.prototype[u]=a.prototype[u])}function c(e){if(!(this instanceof c))return new c(e);s.call(this,e),a.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(e,t){this.push(null),this.end(),n.nextTick(t,e)}},function(e,t,r){"use strict";t.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},t.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36},t.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},t.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},t.SYMS={NULL:Symbol("null"),UNDEFINED:Symbol("undef"),PARENT:Symbol("parent"),BREAK:Symbol("break"),STREAM:Symbol("stream")},t.SHIFT32=Math.pow(2,32)},function(e,t,r){e.exports=i;var n=r(46).EventEmitter;function i(){n.call(this)}r(14)(i,n),i.Readable=r(47),i.Writable=r(78),i.Duplex=r(79),i.Transform=r(80),i.PassThrough=r(81),(i.Stream=i).prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function s(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",s),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",l));var a=!1;function o(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},function(e,t,r){"use strict";(function(e,n){const i=r(84),s=r(23);var a=r(32);const o=r(25).BigNumber;var l=r(22);const u=l.NUMBYTES,c=l.SHIFT32;if(t.hasBigInt="function"==typeof BigInt,l="function"==typeof TextDecoder?TextDecoder:a.TextDecoder){const e=new l("utf8",{fatal:!0,ignoreBOM:!0});t.utf8=t=>e.decode(t),t.utf8.checksUTF8=!0}else t.utf8=e=>e.toString("utf8"),t.utf8.checksUTF8=!1;t.parseCBORint=function(e,t){switch(e){case u.ONE:return t.readUInt8(0);case u.TWO:return t.readUInt16BE(0);case u.FOUR:return t.readUInt32BE(0);case u.EIGHT:var r=t.readUInt32BE(0),n=t.readUInt32BE(4);return 2097151<r?new o(r).times(c).plus(n):r*c+n;default:throw new Error("Invalid additional info for int: "+e)}},t.writeHalf=function(t,r){var n=e.allocUnsafe(4);if(0!=(8191&(r=(n.writeFloatBE(r,0),n.readUInt32BE(0)))))return!1;let i=r>>16&32768;if(n=r>>23&255,r&=8388607,113<=n&&n<=142)i+=(n-112<<10)+(r>>13);else{if(!(103<=n&&n<113))return!1;if(r&(1<<126-n)-1)return!1;i+=8388608+r>>126-n}return t.writeUInt16BE(i),!0},t.parseHalf=function(e){var t=128&e[0]?-1:1,r=(124&e[0])>>2;e=(3&e[0])<<8|e[1];return r?31==r?t*(e?NaN:1/0):t*Math.pow(2,r-25)*(1024+e):5.960464477539063e-8*t*e},t.parseCBORfloat=function(e){switch(e.length){case 2:return t.parseHalf(e);case 4:return e.readFloatBE(0);case 8:return e.readDoubleBE(0);default:throw new Error("Invalid float size: "+e.length)}},t.hex=function(t){return e.from(t.replace(/^0x/,""),"hex")},t.bin=function(t){let r=0,n=(t=t.replace(/\s/g,"")).length%8||8;for(var i=[];n<=t.length;)i.push(parseInt(t.slice(r,n),2)),r=n,n+=8;return e.from(i)},t.extend=function(e={},...t){var r=t.length;for(let s=0;s<r;s++){var n=t[s];for(const t in n){var i=n[t];e[t]=i}}return e},t.arrayEqual=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every((e,r)=>e===t[r])},t.bufferEqual=function(t,r){if(null==t&&null==r)return!0;if(null==t||null==r)return!1;if(!e.isBuffer(t)||!e.isBuffer(r)||t.length!==r.length)return!1;var n=t.length;let i,s,a=!0;for(i=s=0;s<n;i=++s){var o=t[i];a=a&&r[i]===o}return!!a},t.bufferToBignumber=function(e){return new o(e.toString("hex"),16)},t.bufferToBigInt=function(e){return BigInt("0x"+e.toString("hex"))},t.DeHexStream=class extends s.Readable{constructor(t){super(),(t=t.replace(/^0x/,""))&&this.push(e.from(t,"hex")),this.push(null)}},t.HexStream=class extends s.Transform{constructor(e){super(e)}_transform(e,t,r){return this.push(e.toString("hex")),r()}},t.printError=function(e){if(null!=e)return console.error(e)},t.streamFiles=function(e,r,a){var o,l=e.shift();return l?((o=r()).on("end",()=>t.streamFiles(e,r,a)),o.on("error",a),(l="-"===l?n.stdin:l instanceof s.Stream?l:i.createReadStream(l)).on("error",a),l.pipe(o)):a()},t.guessEncoding=function(t){if("string"==typeof t)return"hex";if(!e.isBuffer(t))throw new Error("Unknown input type")}}).call(this,r(9).Buffer,r(20))},function(e,t,r){var n;!function(){"use strict";var i,s=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,o=Math.floor,l="[BigNumber Error] ",u=l+"Number primitive has more than 15 significant digits: ",c=1e14,h=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],m=1e7,p=1e9;function g(e){var t=0|e;return 0<e||e===t?t:t-1}function b(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=h-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function y(e,t){var r,n,i=e.c,s=t.c,a=e.s,o=t.s;e=e.e,t=t.e;if(!a||!o)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-o:a;if(a!=o)return a;if(r=a<0,n=e==t,!i||!s)return n?0:!i^r?1:-1;if(!n)return t<e^r?1:-1;for(o=(e=i.length)<(t=s.length)?e:t,a=0;a<o;a++)if(i[a]!=s[a])return i[a]>s[a]^r?1:-1;return e==t?0:t<e^r?1:-1}function v(e,t,r,n){if(e<t||r<e||e!==o(e))throw Error(l+(n||"Argument")+("number"==typeof e?e<t||r<e?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return g(e.e/h)==t&&e.c[t]%2!=0}function S(e,t){return(1<e.length?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function A(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}(i=function e(t){var r,n,i,E,k,I,_,B,N,C,O,x=q.prototype={constructor:q,toString:null,valueOf:null},j=new q(1),T=20,P=4,D=-7,R=21,U=-1e7,L=1e7,V=!1,M=1,H=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},K="0123456789abcdefghijklmnopqrstuvwxyz",J=!0;function q(e,t){var r,a,l,c,d,m,p,g,b=this;if(!(b instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return b.s=e.s,void(!e.c||e.e>L?b.c=b.e=null:e.e<U?b.c=[b.e=0]:(b.e=e.e,b.c=e.c.slice()));if((m="number"==typeof e)&&0*e==0){if(b.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;10<=d;d/=10,c++);return void(L<c?b.c=b.e=null:(b.e=c,b.c=[e]))}g=String(e)}else{if(!s.test(g=String(e)))return i(b,g,m);b.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}0<(d=(g=-1<(c=g.indexOf("."))?g.replace(".",""):g).search(/e/i))?(c<0&&(c=d),c+=+g.slice(d+1),g=g.substring(0,d)):c<0&&(c=g.length)}else{if(v(t,2,K.length,"Base"),10==t&&J)return Z(b=new q(e),T+b.e+1,P);if(g=String(e),m="number"==typeof e){if(0*e!=0)return i(b,g,m,t);if(b.s=1/e<0?(g=g.slice(1),-1):1,q.DEBUG&&15<g.replace(/^0\.0*|\./,"").length)throw Error(u+e)}else b.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=K.slice(0,t),c=d=0,p=g.length;d<p;d++)if(r.indexOf(a=g.charAt(d))<0){if("."==a){if(c<d){c=p;continue}}else if(!l&&(g==g.toUpperCase()&&(g=g.toLowerCase())||g==g.toLowerCase()&&(g=g.toUpperCase()))){l=!0,d=-1,c=0;continue}return i(b,String(e),m,t)}m=!1,-1<(c=(g=n(g,t,10,b.s)).indexOf("."))?g=g.replace(".",""):c=g.length}for(d=0;48===g.charCodeAt(d);d++);for(p=g.length;48===g.charCodeAt(--p););if(g=g.slice(d,++p)){if(p-=d,m&&q.DEBUG&&15<p&&(f<e||e!==o(e)))throw Error(u+b.s*e);if((c=c-d-1)>L)b.c=b.e=null;else if(c<U)b.c=[b.e=0];else{if(b.e=c,b.c=[],d=(c+1)%h,c<0&&(d+=h),d<p){for(d&&b.c.push(+g.slice(0,d)),p-=h;d<p;)b.c.push(+g.slice(d,d+=h));d=h-(g=g.slice(d)).length}else d-=p;for(;d--;g+="0");b.c.push(+g)}}else b.c=[b.e=0]}function W(e,t,r,n){for(var i,s,a=[0],o=0,l=e.length;o<l;){for(s=a.length;s--;a[s]*=t);for(a[0]+=n.indexOf(e.charAt(o++)),i=0;i<a.length;i++)r-1<a[i]&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/r|0,a[i]%=r)}return a.reverse()}function G(e,t,r){var n,i,s,a=0,o=e.length,l=t%m,u=t/m|0;for(e=e.slice();o--;)a=((i=l*(s=e[o]%m)+(n=u*s+(s=e[o]/m|0)*l)%m*m+a)/r|0)+(n/m|0)+u*s,e[o]=i%r;return a?[a].concat(e):e}function $(e,t,r,n){var i,s;if(r!=n)s=n<r?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function Y(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&1<e.length;e.splice(0,1));}function z(e,t,r,n){var i,s,a,o;if(null==r?r=P:v(r,0,8),!e.c)return e.toString();if(i=e.c[0],s=e.e,null==t)o=b(e.c),o=1==n||2==n&&(s<=D||R<=s)?S(o,s):A(o,s,"0");else if(r=(e=Z(new q(e),t,r)).e,a=(o=b(e.c)).length,1==n||2==n&&(t<=r||r<=D)){for(;a<t;o+="0",a++);o=S(o,r)}else if(t-=s,o=A(o,r,"0"),a<r+1){if(0<--t)for(o+=".";t--;o+="0");}else if(0<(t+=r-a))for(r+1==a&&(o+=".");t--;o+="0");return e.s<0&&i?"-"+o:o}function X(e,t){for(var r,n=1,i=new q(e[0]);n<e.length;n++){if(!(r=new q(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function Q(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];10<=i;i/=10,n++);return(r=n+r*h-1)>L?e.c=e.e=null:r<U?e.c=[e.e=0]:(e.e=r,e.c=t),e}function Z(e,t,r,n){var i,s,l,u,f,m,p,g=e.c,b=d;if(g){e:{for(i=1,u=g[0];10<=u;u/=10,i++);if((s=t-i)<0)s+=h,l=t,p=(f=g[m=0])/b[i-l-1]%10|0;else if((m=a((s+1)/h))>=g.length){if(!n)break e;for(;g.length<=m;g.push(0));f=p=0,l=(s%=h)-h+(i=1)}else{for(f=u=g[m],i=1;10<=u;u/=10,i++);p=(l=(s%=h)-h+i)<0?0:f/b[i-l-1]%10|0}if(n=n||t<0||null!=g[m+1]||(l<0?f:f%b[i-l-1]),n=r<4?(p||n)&&(0==r||r==(e.s<0?3:2)):5<p||5==p&&(4==r||n||6==r&&(0<s?0<l?f/b[i-l]:0:g[m-1])%10&1||r==(e.s<0?8:7)),t<1||!g[0])return g.length=0,n?(t-=e.e+1,g[0]=b[(h-t%h)%h],e.e=-t||0):g[0]=e.e=0,e;if(0==s?(g.length=m,u=1,m--):(g.length=m+1,u=b[h-s],g[m]=0<l?o(f/b[i-l]%b[l])*u:0),n)for(;;){if(0==m){for(s=1,l=g[0];10<=l;l/=10,s++);for(l=g[0]+=u,u=1;10<=l;l/=10,u++);s!=u&&(e.e++,g[0]==c)&&(g[0]=1);break}if(g[m]+=u,g[m]!=c)break;g[m--]=0,u=1}for(s=g.length;0===g[--s];g.pop());}e.e>L?e.c=e.e=null:e.e<U&&(e.c=[e.e=0])}return e}function ee(e){var t,r=e.e;return null===r?e.toString():(t=b(e.c),t=r<=D||R<=r?S(t,r):A(t,r,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(l+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(v(r=e[t],0,p,t),T=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(v(r=e[t],0,8,t),P=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(v(r[0],-p,0,t),v(r[1],0,p,t),D=r[0],R=r[1]):(v(r,-p,p,t),D=-(R=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)v(r[0],-p,-1,t),v(r[1],1,p,t),U=r[0],L=r[1];else{if(v(r,-p,p,t),!r)throw Error(l+t+" cannot be zero: "+r);U=-(L=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(l+t+" not true or false: "+r);if(r&&("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes))throw V=!r,Error(l+"crypto unavailable");V=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(v(r=e[t],0,9,t),M=r),e.hasOwnProperty(t="POW_PRECISION")&&(v(r=e[t],0,p,t),H=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(l+t+" not an object: "+r);F=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(l+t+" invalid: "+r);J="0123456789"==r.slice(0,10),K=r}}return{DECIMAL_PLACES:T,ROUNDING_MODE:P,EXPONENTIAL_AT:[D,R],RANGE:[U,L],CRYPTO:V,MODULO_MODE:M,POW_PRECISION:H,FORMAT:F,ALPHABET:K}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&-p<=i&&i<=p&&i===o(i))if(0===n[0]){if(0===i&&1===n.length)return!0}else if((t=(i+1)%h)<1&&(t+=h),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||c<=r||r!==o(r))break e;if(0!==r)return!0}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(l+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return X(arguments,x.lt)},q.minimum=q.min=function(){return X(arguments,x.gt)},q.random=(E=9007199254740992,k=Math.random()*E&2097151?function(){return o(Math.random()*E)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,s,u=0,c=[],f=new q(j);if(null==e?e=T:v(e,0,p),i=a(e/h),V)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)9e15<=(s=131072*t[u]+(t[u+1]>>>11))?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(c.push(s%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw V=!1,Error(l+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)9e15<=(s=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])?crypto.randomBytes(7).copy(t,u):(c.push(s%1e14),u+=7);u=i/7}if(!V)for(;u<i;)(s=k())<9e15&&(c[u++]=s%1e14);for(i=c[--u],e%=h,i&&e&&(c[u]=o(i/(s=d[h-e]))*s);0===c[u];c.pop(),u--);if(u<0)c=[n=0];else{for(n=-1;0===c[0];c.splice(0,1),n-=h);for(u=1,s=c[0];10<=s;s/=10,u++);u<h&&(n-=h-u)}return f.e=n,f.c=c,f}),q.sum=function(){for(var e=1,t=arguments,r=new q(t[0]);e<t.length;)r=r.plus(t[e++]);return r},I="0123456789",n=function(e,t,n,i,s){var a,o,l,u,c,h,f,d,m=e.indexOf("."),p=T,g=P;for(0<=m&&(u=H,H=0,e=e.replace(".",""),h=(d=new q(t)).pow(e.length-m),H=u,d.c=W(A(b(h.c),h.e,"0"),10,n,I),d.e=d.c.length),l=u=(f=W(e,t,n,s?(a=K,I):(a=I,K))).length;0==f[--u];f.pop());if(!f[0])return a.charAt(0);if(m<0?--l:(h.c=f,h.e=l,h.s=i,f=(h=r(h,d,p,g,n)).c,c=h.r,l=h.e),m=f[o=l+p+1],u=n/2,c=c||o<0||null!=f[o+1],c=g<4?(null!=m||c)&&(0==g||g==(h.s<0?3:2)):u<m||m==u&&(4==g||c||6==g&&1&f[o-1]||g==(h.s<0?8:7)),o<1||!f[0])e=c?A(a.charAt(1),-p,a.charAt(0)):a.charAt(0);else{if(f.length=o,c)for(--n;++f[--o]>n;)f[o]=0,o||(++l,f=[1].concat(f));for(u=f.length;!f[--u];);for(m=0,e="";m<=u;e+=a.charAt(f[m++]));e=A(e,l,a.charAt(0))}return e},r=function(e,t,r,n,i){var s,a,l,u,f,d,m,p,b,y,v,w,S,A,E,k,I,_=e.s==t.s?1:-1,B=e.c,N=t.c;if(!(B&&B[0]&&N&&N[0]))return new q(e.s&&t.s&&(B?!N||B[0]!=N[0]:N)?B&&0==B[0]||!N?0*_:_/0:NaN);for(b=(p=new q(_)).c=[],_=r+(a=e.e-t.e)+1,i||(i=c,a=g(e.e/h)-g(t.e/h),_=_/h|0),l=0;N[l]==(B[l]||0);l++);if(N[l]>(B[l]||0)&&a--,_<0)b.push(1),u=!0;else{for(A=B.length,k=N.length,_+=2,1<(f=o(i/(N[l=0]+1)))&&(N=G(N,f,i),B=G(B,f,i),k=N.length,A=B.length),S=k,v=(y=B.slice(0,k)).length;v<k;y[v++]=0);I=N.slice(),I=[0].concat(I),E=N[0],N[1]>=i/2&&E++;do{if(f=0,(s=$(N,y,k,v))<0){if(w=y[0],k!=v&&(w=w*i+(y[1]||0)),1<(f=o(w/E)))for(m=(d=G(N,f=i<=f?i-1:f,i)).length,v=y.length;1==$(d,y,m,v);)f--,Y(d,k<m?I:N,m,i),m=d.length,s=1;else 0==f&&(s=f=1),m=(d=N.slice()).length;if(Y(y,d=m<v?[0].concat(d):d,v,i),v=y.length,-1==s)for(;$(N,y,k,v)<1;)f++,Y(y,k<v?I:N,v,i),v=y.length}else 0===s&&(f++,y=[0])}while(b[l++]=f,y[0]?y[v++]=B[S]||0:(y=[B[S]],v=1),(S++<A||null!=y[0])&&_--);u=null!=y[0],b[0]||b.splice(0,1)}if(i==c){for(l=1,_=b[0];10<=_;_/=10,l++);Z(p,r+(p.e=l+a*h-1)+1,n,u)}else p.e=a,p.r=+u;return p},_=/^(-?)0([xbo])(?=\w[\w.]*$)/i,B=/^([^.]+)\.$/,N=/^\.([^.]+)$/,C=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,r,n){var i,s=r?t:t.replace(O,"");if(C.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(_,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(B,"$1").replace(N,"0.$1")),t!=s))return new q(s,i);if(q.DEBUG)throw Error(l+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},x.absoluteValue=x.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},x.comparedTo=function(e,t){return y(this,new q(e,t))},x.decimalPlaces=x.dp=function(e,t){var r,n;if(null!=e)return v(e,0,p),null==t?t=P:v(t,0,8),Z(new q(this),e+this.e+1,t);if(!(e=this.c))return null;if(r=((n=e.length-1)-g(this.e/h))*h,n=e[n])for(;n%10==0;n/=10,r--);return r<0?0:r},x.dividedBy=x.div=function(e,t){return r(this,new q(e,t),T,P)},x.dividedToIntegerBy=x.idiv=function(e,t){return r(this,new q(e,t),0,1)},x.exponentiatedBy=x.pow=function(e,t){var r,n,i,s,u,c,f,d,m=this;if((e=new q(e)).c&&!e.isInteger())throw Error(l+"Exponent not an integer: "+ee(e));if(null!=t&&(t=new q(t)),u=14<e.e,!m.c||!m.c[0]||1==m.c[0]&&!m.e&&1==m.c.length||!e.c||!e.c[0])return d=new q(Math.pow(+ee(m),u?e.s*(2-w(e)):+ee(e))),t?d.mod(t):d;if(c=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(n=!c&&m.isInteger()&&t.isInteger())&&(m=m.mod(t))}else{if(9<e.e&&(0<m.e||m.e<-1||(0==m.e?1<m.c[0]||u&&24e7<=m.c[1]:m.c[0]<8e13||u&&m.c[0]<=9999975e7)))return s=m.s<0&&w(e)?-0:0,-1<m.e&&(s=1/s),new q(c?1/s:s);H&&(s=a(H/h+2))}for(f=u?(r=new q(.5),c&&(e.s=1),w(e)):(i=Math.abs(+ee(e)))%2,d=new q(j);;){if(f){if(!(d=d.times(m)).c)break;s?d.c.length>s&&(d.c.length=s):n&&(d=d.mod(t))}if(i){if(0===(i=o(i/2)))break;f=i%2}else if(Z(e=e.times(r),e.e+1,1),14<e.e)f=w(e);else{if(0==(i=+ee(e)))break;f=i%2}m=m.times(m),s?m.c&&m.c.length>s&&(m.c.length=s):n&&(m=m.mod(t))}return n?d:(c&&(d=j.div(d)),t?d.mod(t):s?Z(d,H,P,void 0):d)},x.integerValue=function(e){var t=new q(this);return null==e?e=P:v(e,0,8),Z(t,t.e+1,e)},x.isEqualTo=x.eq=function(e,t){return 0===y(this,new q(e,t))},x.isFinite=function(){return!!this.c},x.isGreaterThan=x.gt=function(e,t){return 0<y(this,new q(e,t))},x.isGreaterThanOrEqualTo=x.gte=function(e,t){return 1===(t=y(this,new q(e,t)))||0===t},x.isInteger=function(){return!!this.c&&g(this.e/h)>this.c.length-2},x.isLessThan=x.lt=function(e,t){return y(this,new q(e,t))<0},x.isLessThanOrEqualTo=x.lte=function(e,t){return-1===(t=y(this,new q(e,t)))||0===t},x.isNaN=function(){return!this.s},x.isNegative=function(){return this.s<0},x.isPositive=function(){return 0<this.s},x.isZero=function(){return!!this.c&&0==this.c[0]},x.minus=function(e,t){var r,n,i,s,a=this,o=a.s;if(t=(e=new q(e,t)).s,!o||!t)return new q(NaN);if(o!=t)return e.s=-t,a.plus(e);var l=a.e/h,u=e.e/h,f=a.c,d=e.c;if(!l||!u){if(!f||!d)return f?(e.s=-t,e):new q(d?a:NaN);if(!f[0]||!d[0])return d[0]?(e.s=-t,e):new q(f[0]?a:3==P?-0:0)}if(l=g(l),u=g(u),f=f.slice(),o=l-u){for((i=(s=o<0)?(o=-o,f):(u=l,d)).reverse(),t=o;t--;i.push(0));i.reverse()}else for(n=(s=(o=f.length)<(t=d.length))?o:t,o=t=0;t<n;t++)if(f[t]!=d[t]){s=f[t]<d[t];break}if(s&&(i=f,f=d,d=i,e.s=-e.s),0<(t=(n=d.length)-(r=f.length)))for(;t--;f[r++]=0);for(t=c-1;o<n;){if(f[--n]<d[n]){for(r=n;r&&!f[--r];f[r]=t);--f[r],f[n]+=c}f[n]-=d[n]}for(;0==f[0];f.splice(0,1),--u);return f[0]?Q(e,f,u):(e.s=3==P?-1:1,e.c=[e.e=0],e)},x.modulo=x.mod=function(e,t){var n,i=this;return e=new q(e,t),!i.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||i.c&&!i.c[0]?new q(i):(9==M?(t=e.s,e.s=1,n=r(i,e,0,3),e.s=t,n.s*=t):n=r(i,e,0,M),(e=i.minus(n.times(e))).c[0]||1!=M||(e.s=i.s),e)},x.multipliedBy=x.times=function(e,t){var r,n,i,s,a,o,l,u,c,f,d,m=this,p=m.c,b=(e=new q(e,t)).c;if(!(p&&b&&p[0]&&b[0]))return!m.s||!e.s||p&&!p[0]&&!b||b&&!b[0]&&!p?e.c=e.e=e.s=null:(e.s*=m.s,p&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(t=g(m.e/h)+g(e.e/h),e.s*=m.s,(o=p.length)<(m=b.length)&&(d=p,p=b,b=d,n=o,o=m,m=n),n=o+m,d=[];n--;d.push(0));for(n=m;0<=--n;){for(c=b[n]%1e7,f=b[n]/1e7|(r=0),i=n+(s=o);n<i;)r=((l=c*(l=p[--s]%1e7)+(a=f*l+(u=p[s]/1e7|0)*c)%1e7*1e7+d[i]+r)/1e14|0)+(a/1e7|0)+f*u,d[i--]=l%1e14;d[i]=r}return r?++t:d.splice(0,1),Q(e,d,t)},x.negated=function(){var e=new q(this);return e.s=-e.s||null,e},x.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new q(e,t)).s,!i||!t)return new q(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/h,a=e.e/h,o=n.c,l=e.c;if(!s||!a){if(!o||!l)return new q(i/0);if(!o[0]||!l[0])return l[0]?e:new q(o[0]?n:0*i)}if(s=g(s),a=g(a),o=o.slice(),i=s-a){for((r=0<i?(a=s,l):(i=-i,o)).reverse();i--;r.push(0));r.reverse()}for((i=o.length)-(t=l.length)<0&&(r=l,l=o,o=r,t=i),i=0;t;)i=(o[--t]=o[t]+l[t]+i)/c|0,o[t]=c===o[t]?0:o[t]%c;return i&&(o=[i].concat(o),++a),Q(e,o,a)},x.precision=x.sd=function(e,t){var r,n;if(null!=e&&e!==!!e)return v(e,1,p),null==t?t=P:v(t,0,8),Z(new q(this),e,t);if(!(t=this.c))return null;if(r=(n=t.length-1)*h+1,n=t[n]){for(;n%10==0;n/=10,r--);for(n=t[0];10<=n;n/=10,r++);}return e&&this.e+1>r?this.e+1:r},x.shiftedBy=function(e){return v(e,-f,f),this.times("1e"+e)},x.squareRoot=x.sqrt=function(){var e,t,n,i,s,a=this,o=a.c,l=a.s,u=a.e,c=T+4,h=new q("0.5");if(1!==l||!o||!o[0])return new q(!l||l<0&&(!o||o[0])?NaN:o?a:1/0);if((n=0==(l=Math.sqrt(+ee(a)))||l==1/0?(((t=b(o)).length+u)%2==0&&(t+="0"),l=Math.sqrt(+t),u=g((u+1)/2)-(u<0||u%2),new q(t=l==1/0?"5e"+u:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+u)):new q(l+"")).c[0])for((l=(u=n.e)+c)<3&&(l=0);;)if(s=n,n=h.times(s.plus(r(a,s,c,1))),b(s.c).slice(0,l)===(t=b(n.c)).slice(0,l)){if(n.e<u&&--l,"9999"!=(t=t.slice(l-3,l+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(Z(n,n.e+T+2,1),e=!n.times(n).eq(a));break}if(!i&&(Z(s,s.e+T+2,0),s.times(s).eq(a))){n=s;break}c+=4,l+=4,i=1}return Z(n,n.e+T+1,P,e)},x.toExponential=function(e,t){return null!=e&&(v(e,0,p),e++),z(this,e,t,1)},x.toFixed=function(e,t){return null!=e&&(v(e,0,p),e=e+this.e+1),z(this,e,t)},x.toFormat=function(e,t,r){if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=F;else if("object"!=typeof r)throw Error(l+"Argument not an object: "+r);if(e=this.toFixed(e,t),this.c){t=e.split(".");var n,i=+r.groupSize,s=+r.secondaryGroupSize,a=r.groupSeparator||"",o=t[0],u=(t=t[1],this.s<0),c=u?o.slice(1):o,h=c.length;if(s&&(n=i,i=s,h-=s=n),0<i&&0<h){for(o=c.substr(0,n=h%i||i);n<h;n+=i)o+=a+c.substr(n,i);0<s&&(o+=a+c.slice(n)),u&&(o="-"+o)}e=t?o+(r.decimalSeparator||"")+((s=+r.fractionGroupSize)?t.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):t):o}return(r.prefix||"")+e+(r.suffix||"")},x.toFraction=function(e){var t,n,i,s,a,o,u,c,f,m,p=this,g=p.c;if(null!=e&&(!(u=new q(e)).isInteger()&&(u.c||1!==u.s)||u.lt(j)))throw Error(l+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+ee(u));if(!g)return new q(p);for(t=new q(j),f=n=new q(j),i=c=new q(j),g=b(g),a=t.e=g.length-p.e-1,t.c[0]=d[(o=a%h)<0?h+o:o],e=!e||0<u.comparedTo(t)?0<a?t:f:u,o=L,L=1/0,u=new q(g),c.c[0]=0;m=r(u,t,0,1),1!=(s=n.plus(m.times(i))).comparedTo(e);)n=i,i=s,f=c.plus(m.times(s=f)),c=s,t=u.minus(m.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),c=c.plus(s.times(f)),n=n.plus(s.times(i)),c.s=f.s=p.s,g=r(f,i,a*=2,P).minus(p).abs().comparedTo(r(c,n,a,P).minus(p).abs())<1?[f,i]:[c,n],L=o,g},x.toNumber=function(){return+ee(this)},x.toPrecision=function(e,t){return null!=e&&v(e,1,p),z(this,e,t,2)},x.toString=function(e){var t,r=this,i=r.s,s=r.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(t=null==e?s<=D||R<=s?S(b(r.c),s):A(b(r.c),s,"0"):10===e&&J?A(b((r=Z(new q(r),T+s+1,P)).c),r.e,"0"):(v(e,2,K.length,"Base"),n(A(b(r.c),s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},x.valueOf=x.toJSON=function(){return ee(this)},x._isBigNumber=!0,null!=t&&q.set(t),q}()).default=i.BigNumber=i,void 0!==(n=function(){return i}.call(t,r,t,e))&&(e.exports=n)}()},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));class n{static register(e,t,r){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:r}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}n.namedCurves={},n.register("P-256","1.2.840.10045.3.1.7",32),n.register("P-384","1.3.132.0.34",48),n.register("P-521","1.3.132.0.35",66),n.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),n.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),n.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64)},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(0),i=r(1);class s{constructor(e={}){this.prime=Object(i.e)(e,"prime",s.defaultValues("prime")),this.exponent=Object(i.e)(e,"exponent",s.defaultValues("exponent")),this.coefficient=Object(i.e)(e,"coefficient",s.defaultValues("coefficient")),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"prime":case"exponent":case"coefficient":return new n.m;default:throw new Error("Invalid member name for OtherPrimeInfo class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.m({name:e.prime||""}),new n.m({name:e.exponent||""}),new n.m({name:e.coefficient||""})]})}fromSchema(e){if(Object(i.c)(e,["prime","exponent","coefficient"]),!1===(e=n.D(e,e,s.schema({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}))).verified)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=e.result.prime.convertFromDER(),this.exponent=e.result.exponent.convertFromDER(),this.coefficient=e.result.coefficient.convertFromDER()}toSchema(){return new n.v({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:Object(i.j)(Object(i.a)(this.prime.valueBlock.valueHex),!0,!0),d:Object(i.j)(Object(i.a)(this.exponent.valueBlock.valueHex),!0,!0),t:Object(i.j)(Object(i.a)(this.coefficient.valueBlock.valueHex),!0,!0)}}fromJSON(e){if(!("r"in e))throw new Error('Absent mandatory parameter "r"');if(this.prime=new n.m({valueHex:Object(i.i)(Object(i.d)(e.r,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.exponent=new n.m({valueHex:Object(i.i)(Object(i.d)(e.d,!0))}),!("t"in e))throw new Error('Absent mandatory parameter "t"');this.coefficient=new n.m({valueHex:Object(i.i)(Object(i.d)(e.t,!0))})}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),i=r(1),s=r(2);class a{constructor(e={}){this.hashAlgorithm=Object(i.e)(e,"hashAlgorithm",a.defaultValues("hashAlgorithm")),this.maskGenAlgorithm=Object(i.e)(e,"maskGenAlgorithm",a.defaultValues("maskGenAlgorithm")),this.saltLength=Object(i.e)(e,"saltLength",a.defaultValues("saltLength")),this.trailerField=Object(i.e)(e,"trailerField",a.defaultValues("trailerField")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"hashAlgorithm":return new s.a({algorithmId:"1.3.14.3.2.26",algorithmParams:new n.n});case"maskGenAlgorithm":return new s.a({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new s.a({algorithmId:"1.3.14.3.2.26",algorithmParams:new n.n}).toSchema()});case"saltLength":return 20;case"trailerField":return 1;default:throw new Error("Invalid member name for RSASSAPSSParams class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.g({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[s.a.schema(e.hashAlgorithm||{})]}),new n.g({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[s.a.schema(e.maskGenAlgorithm||{})]}),new n.g({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new n.m({name:e.saltLength||""})]}),new n.g({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new n.m({name:e.trailerField||""})]})]})}fromSchema(e){if(Object(i.c)(e,["hashAlgorithm","maskGenAlgorithm","saltLength","trailerField"]),!1===(e=n.D(e,e,a.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},maskGenAlgorithm:{names:{blockName:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}))).verified)throw new Error("Object's schema was not verified against input data for RSASSAPSSParams");"hashAlgorithm"in e.result&&(this.hashAlgorithm=new s.a({schema:e.result.hashAlgorithm})),"maskGenAlgorithm"in e.result&&(this.maskGenAlgorithm=new s.a({schema:e.result.maskGenAlgorithm})),"saltLength"in e.result&&(this.saltLength=e.result.saltLength.valueBlock.valueDec),"trailerField"in e.result&&(this.trailerField=e.result.trailerField.valueBlock.valueDec)}toSchema(){var e=[];return this.hashAlgorithm.isEqual(a.defaultValues("hashAlgorithm"))||e.push(new n.g({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(a.defaultValues("maskGenAlgorithm"))||e.push(new n.g({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==a.defaultValues("saltLength")&&e.push(new n.g({idBlock:{tagClass:3,tagNumber:2},value:[new n.m({value:this.saltLength})]})),this.trailerField!==a.defaultValues("trailerField")&&e.push(new n.g({idBlock:{tagClass:3,tagNumber:3},value:[new n.m({value:this.trailerField})]})),new n.v({value:e})}toJSON(){var e={};return this.hashAlgorithm.isEqual(a.defaultValues("hashAlgorithm"))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(a.defaultValues("maskGenAlgorithm"))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==a.defaultValues("saltLength")&&(e.saltLength=this.saltLength),this.trailerField!==a.defaultValues("trailerField")&&(e.trailerField=this.trailerField),e}}},,function(e,t,r){"use strict";(function(t){var n=r(16);const i={1:{name:"kty",values:{2:"EC",3:"RSA"}},2:{name:"kid",values:{}},3:{name:"alg",values:{"-7":"ECDSA_w_SHA256","-8":"EdDSA","-35":"ECDSA_w_SHA384","-36":"ECDSA_w_SHA512","-257":"RSASSA-PKCS1-v1_5_w_SHA256","-258":"RSASSA-PKCS1-v1_5_w_SHA384","-259":"RSASSA-PKCS1-v1_5_w_SHA512","-65535":"RSASSA-PKCS1-v1_5_w_SHA1"}},4:{name:"key_ops",values:{}},5:{name:"base_iv",values:{}}},s={ECDSA_w_SHA256:"SHA256",ECDSA_w_SHA384:"SHA384",ECDSA_w_SHA512:"SHA512","RSASSA-PKCS1-v1_5_w_SHA256":"SHA256","RSASSA-PKCS1-v1_5_w_SHA384":"SHA384","RSASSA-PKCS1-v1_5_w_SHA512":"SHA512","RSASSA-PKCS1-v1_5_w_SHA1":"SHA1"};function a(e){if("number"!=typeof e)throw new TypeError("expected 'alg' to be a number, got: "+e);return i[3].values[e]}const o={EC:{"-1":{name:"crv",values:{1:"P-256",2:"P-384",3:"P-521",4:"X25519",5:"X448",6:"Ed25519",7:"Ed448"}},"-2":{name:"x"},"-3":{name:"y"},"-4":{name:"d"}},RSA:{"-1":{name:"n"},"-2":{name:"e"},"-3":{name:"d"},"-4":{name:"p"},"-5":{name:"q"},"-6":{name:"dP"},"-7":{name:"dQ"},"-8":{name:"qInv"},"-9":{name:"other"},"-10":{name:"r_i"},"-11":{name:"d_i"},"-12":{name:"t_i"}}};function l(e){if("object"!=typeof e)throw new TypeError("'cose' argument must be an object, probably an Buffer conatining valid COSE");if(e.buffer instanceof ArrayBuffer&&!(e instanceof t)&&(e=e.buffer),!((e=(e=Array.isArray(e)?t.from(e):e)instanceof ArrayBuffer?t.from(new Uint8Array(e)):e)instanceof t))throw new TypeError("could not convert 'cose' argument to a Buffer");if(e.length<3)throw new RangeError("COSE buffer was too short: "+e.length);var r;try{r=n.decodeAllSync(t.from(e))}catch(e){throw new Error("couldn't parse authenticator.authData.attestationData CBOR: "+e)}if(!(Array.isArray(r)&&r[0]instanceof Map))throw new Error("invalid parsing of authenticator.authData.attestationData CBOR");e=r[0];var s,a=new Map,l={};for(s of e){var u,c=s[0].toString();let e=s[1].toString();i[c]?(u=i[c].name,i[c].values[e]&&(e=i[c].values[e]),l[u]=e):a.set(s[0],s[1])}var h,f=o[l.kty];for(h of a){var d=h[0].toString();let e=h[1];if(!f[d])throw new Error("unknown COSE key label: "+l.kty+" "+d);var m=f[d].name;(e=f[d].values?f[d].values[e.toString()]:e)instanceof t&&(e=e.toString("base64")),l[m]=e}return l}l.algToStr=a,l.algToHashStr=function(e){if("string"!=typeof(e="number"==typeof e?a(e):e))throw new Error("'alg' is not a string or a valid COSE algorithm number");return s[e]},e.exports=l}).call(this,r(9).Buffer)},function(e,t,r){function n(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===n(e)},t.isBoolean=function(e){return"boolean"==typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"==typeof e},t.isString=function(e){return"string"==typeof e},t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===n(e)},t.isObject=function(e){return"object"==typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===n(e)},t.isError=function(e){return"[object Error]"===n(e)||e instanceof Error},t.isFunction=function(e){return"function"==typeof e},t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(9).Buffer.isBuffer},function(e,t,r){(function(e){var n,i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},s=/%[sdj%]/g,a=(t.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(e).replace(s,(function(e){if("%%"===e)return"%";if(i<=r)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),l=n[r];r<i;l=n[++r])p(l)||!w(l)?a+=" "+l:a+=" "+o(l);return a},t.deprecate=function(r,n){var i;return void 0!==e&&!0===e.noDeprecation?r:void 0===e?function(){return t.deprecate(r,n).apply(this,arguments)}:(i=!1,function(){if(!i){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)})},{});function o(e,r){var n={seen:[],stylize:u};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),m(r)?n.showHidden=r:r&&t._extend(n,r),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=l),c(n,e,n.depth)}function l(e,t){return(t=o.styles[t])?"["+o.colors[t][0]+"m"+e+"["+o.colors[t][1]+"m":e}function u(e,t){return e}function c(e,r,n){if(e.customInspect&&r&&E(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r))return b(s=r.inspect(n,e))?s:c(e,s,n);if(s=function(e,t){return y(t)?e.stylize("undefined","undefined"):b(t)?(r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",e.stylize(r,"string")):g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):p(t)?e.stylize("null","null"):void 0;var r}(e,r))return s;var i,s=Object.keys(r),a=(i={},s.forEach((function(e,t){i[e]=!0})),i);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),A(r)&&(0<=s.indexOf("message")||0<=s.indexOf("description")))return h(r);if(0===s.length){if(E(r))return l=r.name?": "+r.name:"",e.stylize("[Function"+l+"]","special");if(v(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return e.stylize(Date.prototype.toString.call(r),"date");if(A(r))return h(r)}var o,l="",u=!1,w=["{","}"];return d(r)&&(u=!0,w=["[","]"]),E(r)&&(l=" [Function"+(r.name?": "+r.name:"")+"]"),v(r)&&(l=" "+RegExp.prototype.toString.call(r)),S(r)&&(l=" "+Date.prototype.toUTCString.call(r)),A(r)&&(l=" "+h(r)),0!==s.length||u&&0!=r.length?n<0?v(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),o=u?function(e,t,r,n,i){for(var s=[],a=0,o=t.length;a<o;++a)B(t,String(a))?s.push(f(e,t,r,n,String(a),!0)):s.push("");return i.forEach((function(i){i.match(/^\d+$/)||s.push(f(e,t,r,n,i,!0))})),s}(e,r,n,a,s):s.map((function(t){return f(e,r,n,a,t,u)})),e.seen.pop(),60<o.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)?w[0]+(""===l?"":l+"\n ")+" "+o.join(",\n  ")+" "+w[1]:w[0]+l+" "+o.join(", ")+" "+w[1]):w[0]+l+w[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i,s){var a,o;if((t=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?o=t.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):t.set&&(o=e.stylize("[Setter]","special")),B(n,i)||(a="["+i+"]"),o||(e.seen.indexOf(t.value)<0?-1<(o=p(r)?c(e,t.value,null):c(e,t.value,r-1)).indexOf("\n")&&(o=s?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),y(a)){if(s&&i.match(/^\d+$/))return o;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),e.stylize(a,"string"))}return a+": "+o}function d(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function p(e){return null===e}function g(e){return"number"==typeof e}function b(e){return"string"==typeof e}function y(e){return void 0===e}function v(e){return w(e)&&"[object RegExp]"===k(e)}function w(e){return"object"==typeof e&&null!==e}function S(e){return w(e)&&"[object Date]"===k(e)}function A(e){return w(e)&&("[object Error]"===k(e)||e instanceof Error)}function E(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){var i;return y(n)&&(n=e.env.NODE_DEBUG||""),r=r.toUpperCase(),a[r]||(new RegExp("\\b"+r+"\\b","i").test(n)?(i=e.pid,a[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,i,e)}):a[r]=function(){}),a[r]},(t.inspect=o).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=m,t.isNull=p,t.isNullOrUndefined=function(e){return null==e},t.isNumber=g,t.isString=b,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=y,t.isRegExp=v,t.isObject=w,t.isDate=S,t.isError=A,t.isFunction=E,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(82);var _=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function B(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,r;console.log("%s - %s",(r=[I((e=new Date).getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":"),[e.getDate(),_[e.getMonth()],r].join(" ")),t.format.apply(t,arguments))},t.inherits=r(83),t._extend=function(e,t){if(t&&w(t))for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var N="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(e,t){var r;return e||((r=new Error("Promise was rejected with a falsy value")).reason=e,e=r),t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(N&&e[N]){var t;if("function"!=typeof(t=e[N]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),i=[],s=0;s<arguments.length;s++)i.push(arguments[s]);i.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,i)}catch(n){r(n)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),N&&Object.defineProperty(t,N,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=N,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");function s(){return i.apply(a,arguments)}var a=this;t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(C,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,i(t)),r}}).call(this,r(20))},function(e,t,r){"use strict";var n=r(32);const i=(r=r(22)).MT,s=r.SIMPLE,a=r.SYMS;class o{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||255<e||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return"simple("+this.value+")"}[n.inspect.custom](e,t){return"simple("+this.value+")"}inspect(e,t){return"simple("+this.value+")"}encodeCBOR(e){return e._pushInt(this.value,i.SIMPLE_FLOAT)}static isSimple(e){return e instanceof o}static decode(e,t=!0,r=!1){switch(e){case s.FALSE:return!1;case s.TRUE:return!0;case s.NULL:return t?null:a.NULL;case s.UNDEFINED:return t?void 0:a.UNDEFINED;case-1:if(t&&r)return a.BREAK;throw new Error("Invalid BREAK");default:return new o(e)}}}e.exports=o},function(e,t,r){"use strict";(function(t){var n=r(23);const i=r(32);class s extends n.Transform{constructor(e,r,n){let i,s;switch(null==n&&(n={}),typeof e){case"object":t.isBuffer(e)?(i=e,null!=r&&"object"==typeof r&&(n=r)):n=e;break;case"string":i=e,null!=r&&"object"==typeof r?n=r:s=r}null==n&&(n={}),null==i&&(i=n.input),null==s&&(s=n.inputEncoding),delete n.input,delete n.inputEncoding;var a=null==n.watchPipe||n.watchPipe,o=(delete n.watchPipe,!!n.readError);delete n.readError,super(n),this.readError=o,a&&this.on("pipe",e=>{if(e=e._readableState.objectMode,0<this.length&&e!==this._readableState.objectMode)throw new Error("Do not switch objectMode in the middle of the stream");return this._readableState.objectMode=e,this._writableState.objectMode=e}),null!=i&&this.end(i,s)}static isNoFilter(e){return e instanceof this}static compare(e,t){if(e instanceof this)return e===t?0:e.compare(t);throw new TypeError("Arguments must be NoFilters")}static concat(e,r){if(!Array.isArray(e))throw new TypeError("list argument must be an Array of NoFilters");if(0===e.length||0===r)return t.alloc(0);null==r&&(r=e.reduce((e,t)=>{if(t instanceof s)return e+t.length;throw new TypeError("list argument must be an Array of NoFilters")},0));let n=!0,i=!0;if(e=e.map(e=>{if(e instanceof s)return e=e.slice(),t.isBuffer(e)?i=!1:n=!1,e;throw new TypeError("list argument must be an Array of NoFilters")}),n)return t.concat(e,r);if(i)return[].concat(...e).slice(0,r);throw new Error("Concatenating mixed object and byte streams not supported")}_transform(e,r,n){this._readableState.objectMode||t.isBuffer(e)||(e=t.from(e,r)),this.push(e),n()}_bufArray(){let e=this._readableState.buffer;if(!Array.isArray(e)){let t=e.head;for(e=[];null!=t;)e.push(t.data),t=t.next}return e}read(e){var t=super.read(e);if(null!=t){if(this.emit("read",t),this.readError&&t.length<e)throw new Error(`Read ${t.length}, wanted `+e)}else if(this.readError)throw new Error("No data available, wanted "+e);return t}promise(e){let t=!1;return new Promise((r,n)=>{this.on("finish",()=>{var n=this.read();null==e||t||(t=!0,e(null,n)),r(n)}),this.on("error",r=>{null==e||t||(t=!0,e(r)),n(r)})})}compare(e){if(!(e instanceof s))throw new TypeError("Arguments must be NoFilters");if(this===e)return 0;var r=this.slice();e=e.slice();if(t.isBuffer(r)&&t.isBuffer(e))return r.compare(e);throw new Error("Cannot compare streams in object mode")}equals(e){return 0===this.compare(e)}slice(e,r){if(this._readableState.objectMode)return this._bufArray().slice(e,r);var n=this._bufArray();switch(n.length){case 0:return t.alloc(0);case 1:return n[0].slice(e,r);default:return t.concat(n).slice(e,r)}}get(e){return this.slice()[e]}toJSON(){var e=this.slice();return t.isBuffer(e)?e.toJSON():e}toString(e,r,n){var s=this.slice(r,n);return t.isBuffer(s)?e&&"utf8"!==e||!i.TextDecoder?s.toString(e,r,n):new i.TextDecoder("utf8",{fatal:!0,ignoreBOM:!0}).decode(s):JSON.stringify(s)}inspect(e,t){return this[i.inspect.custom](e,t)}[i.inspect.custom](e,r){var n=this._bufArray().map(e=>t.isBuffer(e)?null!=r&&r.stylize?r.stylize(e.toString("hex"),"string"):e.toString("hex"):i.inspect(e,r)).join(", ");return this.constructor.name+` [${n}]`}get length(){return this._readableState.length}writeBigInt(e){let r=e.toString(16);var n;return e<0&&(n=BigInt(Math.floor(r.length/2)),r=(e=(BigInt(1)<<n*BigInt(8))+e).toString(16)),r.length%2&&(r="0"+r),this.push(t.from(r,"hex"))}readUBigInt(e){return e=this.read(e),t.isBuffer(e)?BigInt("0x"+e.toString("hex")):null}readBigInt(e){e=this.read(e);if(!t.isBuffer(e))return null;let r=BigInt("0x"+e.toString("hex"));return 128&e[0]&&(r-=e=BigInt(1)<<BigInt(e.length)*BigInt(8)),r}}function a(e,r){return function(n){var i=this.read(r);return t.isBuffer(i)?i[e].call(i,0,!0):null}}function o(e,r){return function(n){var i=t.alloc(r);return i[e].call(i,n,0,!0),this.push(i)}}Object.assign(s.prototype,{writeUInt8:o("writeUInt8",1),writeUInt16LE:o("writeUInt16LE",2),writeUInt16BE:o("writeUInt16BE",2),writeUInt32LE:o("writeUInt32LE",4),writeUInt32BE:o("writeUInt32BE",4),writeInt8:o("writeInt8",1),writeInt16LE:o("writeInt16LE",2),writeInt16BE:o("writeInt16BE",2),writeInt32LE:o("writeInt32LE",4),writeInt32BE:o("writeInt32BE",4),writeFloatLE:o("writeFloatLE",4),writeFloatBE:o("writeFloatBE",4),writeDoubleLE:o("writeDoubleLE",8),writeDoubleBE:o("writeDoubleBE",8),readUInt8:a("readUInt8",1),readUInt16LE:a("readUInt16LE",2),readUInt16BE:a("readUInt16BE",2),readUInt32LE:a("readUInt32LE",4),readUInt32BE:a("readUInt32BE",4),readInt8:a("readInt8",1),readInt16LE:a("readInt16LE",2),readInt16BE:a("readInt16BE",2),readInt32LE:a("readInt32LE",4),readInt32BE:a("readInt32BE",4),readFloatLE:a("readFloatLE",4),readFloatBE:a("readFloatBE",4),readDoubleLE:a("readDoubleLE",8),readDoubleBE:a("readDoubleBE",8)}),e.exports=s}).call(this,r(9).Buffer)},,function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r(0),i=r(1);class s{constructor(e={}){this.modulus=Object(i.e)(e,"modulus",s.defaultValues("modulus")),this.publicExponent=Object(i.e)(e,"publicExponent",s.defaultValues("publicExponent")),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"modulus":case"publicExponent":return new n.m;default:throw new Error("Invalid member name for RSAPublicKey class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.m({name:e.modulus||""}),new n.m({name:e.publicExponent||""})]})}fromSchema(e){if(Object(i.c)(e,["modulus","publicExponent"]),!1===(e=n.D(e,e,s.schema({names:{modulus:"modulus",publicExponent:"publicExponent"}}))).verified)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=e.result.modulus.convertFromDER(256),this.publicExponent=e.result.publicExponent}toSchema(){return new n.v({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:Object(i.j)(Object(i.a)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:Object(i.j)(Object(i.a)(this.publicExponent.valueBlock.valueHex),!0,!0,!0)}}fromJSON(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');var t=Object(i.i)(Object(i.d)(e.n,!0));if(this.modulus=new n.m({valueHex:t.slice(0,Math.pow(2,Object(i.g)(t.byteLength)))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');this.publicExponent=new n.m({valueHex:Object(i.i)(Object(i.d)(e.e,!0)).slice(0,3)})}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),i=r(1),s=r(12);class a{constructor(e={}){this.version=Object(i.e)(e,"version",a.defaultValues("version")),this.privateKey=Object(i.e)(e,"privateKey",a.defaultValues("privateKey")),"namedCurve"in e&&(this.namedCurve=Object(i.e)(e,"namedCurve",a.defaultValues("namedCurve"))),"publicKey"in e&&(this.publicKey=Object(i.e)(e,"publicKey",a.defaultValues("publicKey"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"version":return 1;case"privateKey":return new n.q;case"namedCurve":return"";case"publicKey":return new s.a;default:throw new Error("Invalid member name for ECCPrivateKey class: "+e)}}static compareWithDefault(e,t){switch(e){case"version":return t===a.defaultValues(e);case"privateKey":return t.isEqual(a.defaultValues(e));case"namedCurve":return""===t;case"publicKey":return s.a.compareWithDefault("namedCurve",t.namedCurve)&&s.a.compareWithDefault("x",t.x)&&s.a.compareWithDefault("y",t.y);default:throw new Error("Invalid member name for ECCPrivateKey class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.m({name:e.version||""}),new n.q({name:e.privateKey||""}),new n.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new n.p({name:e.namedCurve||""})]}),new n.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new n.b({name:e.publicKey||""})]})]})}fromSchema(e){if(Object(i.c)(e,["version","privateKey","namedCurve","publicKey"]),!1===(e=n.D(e,e,a.schema({names:{version:"version",privateKey:"privateKey",namedCurve:"namedCurve",publicKey:"publicKey"}}))).verified)throw new Error("Object's schema was not verified against input data for ECPrivateKey");this.version=e.result.version.valueBlock.valueDec,this.privateKey=e.result.privateKey,"namedCurve"in e.result&&(this.namedCurve=e.result.namedCurve.valueBlock.toString()),"publicKey"in e.result&&(e={schema:e.result.publicKey.valueBlock.valueHex},"namedCurve"in this&&(e.namedCurve=this.namedCurve),this.publicKey=new s.a(e))}toSchema(){var e=[new n.m({value:this.version}),this.privateKey];return"namedCurve"in this&&e.push(new n.g({idBlock:{tagClass:3,tagNumber:0},value:[new n.p({value:this.namedCurve})]})),"publicKey"in this&&e.push(new n.g({idBlock:{tagClass:3,tagNumber:1},value:[new n.b({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new n.v({value:e})}toJSON(){if("namedCurve"in this==0||a.compareWithDefault("namedCurve",this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');let e="";switch(this.namedCurve){case"1.2.840.10045.3.1.7":e="P-256";break;case"1.3.132.0.34":e="P-384";break;case"1.3.132.0.35":e="P-521"}var t,r={crv:e,d:Object(i.j)(Object(i.a)(this.privateKey.valueBlock.valueHex),!0,!0,!1)};return"publicKey"in this&&(t=this.publicKey.toJSON(),r.x=t.x,r.y=t.y),r}fromJSON(e){let t=0;if(!("crv"in e))throw new Error('Absent mandatory parameter "crv"');switch(e.crv.toUpperCase()){case"P-256":this.namedCurve="1.2.840.10045.3.1.7",t=32;break;case"P-384":this.namedCurve="1.3.132.0.34",t=48;break;case"P-521":this.namedCurve="1.3.132.0.35",t=66}if(!("d"in e))throw new Error('Absent mandatory parameter "d"');var r,a,o,l=Object(i.i)(Object(i.d)(e.d,!0));l.byteLength<t?(r=new ArrayBuffer(t),a=new Uint8Array(r),o=new Uint8Array(l),a.set(o,1),this.privateKey=new n.q({valueHex:r})):this.privateKey=new n.q({valueHex:l.slice(0,t)}),"x"in e&&"y"in e&&(this.publicKey=new s.a({json:e}))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),i=r(1),s=r(27);class a{constructor(e={}){this.version=Object(i.e)(e,"version",a.defaultValues("version")),this.modulus=Object(i.e)(e,"modulus",a.defaultValues("modulus")),this.publicExponent=Object(i.e)(e,"publicExponent",a.defaultValues("publicExponent")),this.privateExponent=Object(i.e)(e,"privateExponent",a.defaultValues("privateExponent")),this.prime1=Object(i.e)(e,"prime1",a.defaultValues("prime1")),this.prime2=Object(i.e)(e,"prime2",a.defaultValues("prime2")),this.exponent1=Object(i.e)(e,"exponent1",a.defaultValues("exponent1")),this.exponent2=Object(i.e)(e,"exponent2",a.defaultValues("exponent2")),this.coefficient=Object(i.e)(e,"coefficient",a.defaultValues("coefficient")),"otherPrimeInfos"in e&&(this.otherPrimeInfos=Object(i.e)(e,"otherPrimeInfos",a.defaultValues("otherPrimeInfos"))),"schema"in e&&this.fromSchema(e.schema),"json"in e&&this.fromJSON(e.json)}static defaultValues(e){switch(e){case"version":return 0;case"modulus":case"publicExponent":case"privateExponent":case"prime1":case"prime2":case"exponent1":case"exponent2":case"coefficient":return new n.m;case"otherPrimeInfos":return[];default:throw new Error("Invalid member name for RSAPrivateKey class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[new n.m({name:e.version||""}),new n.m({name:e.modulus||""}),new n.m({name:e.publicExponent||""}),new n.m({name:e.privateExponent||""}),new n.m({name:e.prime1||""}),new n.m({name:e.prime2||""}),new n.m({name:e.exponent1||""}),new n.m({name:e.exponent2||""}),new n.m({name:e.coefficient||""}),new n.v({optional:!0,value:[new n.u({name:e.otherPrimeInfosName||"",value:s.a.schema(e.otherPrimeInfo||{})})]})]})}fromSchema(e){if(Object(i.c)(e,["version","modulus","publicExponent","privateExponent","prime1","prime2","exponent1","exponent2","coefficient","otherPrimeInfos"]),!1===(e=n.D(e,e,a.schema({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfo:{names:{blockName:"otherPrimeInfos"}}}}))).verified)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");this.version=e.result.version.valueBlock.valueDec,this.modulus=e.result.modulus.convertFromDER(256),this.publicExponent=e.result.publicExponent,this.privateExponent=e.result.privateExponent.convertFromDER(256),this.prime1=e.result.prime1.convertFromDER(128),this.prime2=e.result.prime2.convertFromDER(128),this.exponent1=e.result.exponent1.convertFromDER(128),this.exponent2=e.result.exponent2.convertFromDER(128),this.coefficient=e.result.coefficient.convertFromDER(128),"otherPrimeInfos"in e.result&&(this.otherPrimeInfos=Array.from(e.result.otherPrimeInfos,e=>new s.a({schema:e})))}toSchema(){var e=[];return e.push(new n.m({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),"otherPrimeInfos"in this&&e.push(new n.v({value:Array.from(this.otherPrimeInfos,e=>e.toSchema())})),new n.v({value:e})}toJSON(){var e={n:Object(i.j)(Object(i.a)(this.modulus.valueBlock.valueHex),!0,!0,!0),e:Object(i.j)(Object(i.a)(this.publicExponent.valueBlock.valueHex),!0,!0,!0),d:Object(i.j)(Object(i.a)(this.privateExponent.valueBlock.valueHex),!0,!0,!0),p:Object(i.j)(Object(i.a)(this.prime1.valueBlock.valueHex),!0,!0,!0),q:Object(i.j)(Object(i.a)(this.prime2.valueBlock.valueHex),!0,!0,!0),dp:Object(i.j)(Object(i.a)(this.exponent1.valueBlock.valueHex),!0,!0,!0),dq:Object(i.j)(Object(i.a)(this.exponent2.valueBlock.valueHex),!0,!0,!0),qi:Object(i.j)(Object(i.a)(this.coefficient.valueBlock.valueHex),!0,!0,!0)};return"otherPrimeInfos"in this&&(e.oth=Array.from(this.otherPrimeInfos,e=>e.toJSON())),e}fromJSON(e){if(!("n"in e))throw new Error('Absent mandatory parameter "n"');if(this.modulus=new n.m({valueHex:Object(i.i)(Object(i.d)(e.n,!0,!0))}),!("e"in e))throw new Error('Absent mandatory parameter "e"');if(this.publicExponent=new n.m({valueHex:Object(i.i)(Object(i.d)(e.e,!0,!0))}),!("d"in e))throw new Error('Absent mandatory parameter "d"');if(this.privateExponent=new n.m({valueHex:Object(i.i)(Object(i.d)(e.d,!0,!0))}),!("p"in e))throw new Error('Absent mandatory parameter "p"');if(this.prime1=new n.m({valueHex:Object(i.i)(Object(i.d)(e.p,!0,!0))}),!("q"in e))throw new Error('Absent mandatory parameter "q"');if(this.prime2=new n.m({valueHex:Object(i.i)(Object(i.d)(e.q,!0,!0))}),!("dp"in e))throw new Error('Absent mandatory parameter "dp"');if(this.exponent1=new n.m({valueHex:Object(i.i)(Object(i.d)(e.dp,!0,!0))}),!("dq"in e))throw new Error('Absent mandatory parameter "dq"');if(this.exponent2=new n.m({valueHex:Object(i.i)(Object(i.d)(e.dq,!0,!0))}),!("qi"in e))throw new Error('Absent mandatory parameter "qi"');this.coefficient=new n.m({valueHex:Object(i.i)(Object(i.d)(e.qi,!0,!0))}),"oth"in e&&(this.otherPrimeInfos=Array.from(e.oth,e=>new s.a({json:e})))}}},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r(0),i=r(1),s=r(2);class a{constructor(e={}){this.keyDerivationFunc=Object(i.e)(e,"keyDerivationFunc",a.defaultValues("keyDerivationFunc")),this.encryptionScheme=Object(i.e)(e,"encryptionScheme",a.defaultValues("encryptionScheme")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyDerivationFunc":case"encryptionScheme":return new s.a;default:throw new Error("Invalid member name for PBES2Params class: "+e)}}static schema(e={}){return e=Object(i.e)(e,"names",{}),new n.v({name:e.blockName||"",value:[s.a.schema(e.keyDerivationFunc||{}),s.a.schema(e.encryptionScheme||{})]})}fromSchema(e){if(Object(i.c)(e,["keyDerivationFunc","encryptionScheme"]),!1===(e=n.D(e,e,a.schema({names:{keyDerivationFunc:{names:{blockName:"keyDerivationFunc"}},encryptionScheme:{names:{blockName:"encryptionScheme"}}}}))).verified)throw new Error("Object's schema was not verified against input data for PBES2Params");this.keyDerivationFunc=new s.a({schema:e.result.keyDerivationFunc}),this.encryptionScheme=new s.a({schema:e.result.encryptionScheme})}toSchema(){return new n.v({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}},,function(e,t,r){"use strict";(function(t){void 0===t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var s,a,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,n)}));case 4:return t.nextTick((function(){e.call(null,r,n,i)}));default:for(s=new Array(o-1),a=0;a<s.length;)s[a++]=arguments[a];return t.nextTick((function(){e.apply(null,s)}))}}}:e.exports=t}).call(this,r(20))},function(e,t,r){"use strict";(function(t){var n=r(85);const i=r(50),s=r(33),a=r(24),o=r(25).BigNumber,l=r(34);var u=r(22);const c=u.MT,h=u.NUMBYTES;u.SIMPLE;const f=u.SYMS,d=new o(-1),m=d.minus(new o(Number.MAX_SAFE_INTEGER.toString(16),16)),p=Symbol("count");Symbol("pending_key");const g=Symbol("major type"),b=Symbol("error"),y=Symbol("not found");function v(e,t,r){var n=[];return n[p]=r,n[f.PARENT]=e,n[g]=t,n}function w(e){return a.bufferToBigInt(e)}function S(e){return BigInt("-1")-a.bufferToBigInt(e)}class A extends n{constructor(e){var t=(e=e||{}).tags,r=(delete e.tags,null!=e.max_depth?e.max_depth:-1),n=(delete e.max_depth,!!a.hasBigInt&&!!e.bigint);delete e.bigint,super(e),this.running=!0,this.max_depth=r,this.tags=t,n&&(null==this.tags&&(this.tags={}),this.tags[2]=w,this.tags[3]=S)}static nullcheck(e){switch(e){case f.NULL:return null;case f.UNDEFINED:return;case y:throw new Error("Value not found");default:return e}}static decodeFirstSync(e,t){let r,n={};switch(typeof(t=t||{encoding:"hex"})){case"string":r=t;break;case"object":n=a.extend({},t),r=n.encoding,delete n.encoding}var i=new A(n),s=new l(e,null!=r?r:a.guessEncoding(e)),o=i._parse();let u=o.next();for(;!u.done;){var c=s.read(u.value);if(null==c||c.length!==u.value)throw new Error("Insufficient data");u=o.next(c)}return A.nullcheck(u.value)}static decodeAllSync(e,t){let r,n={};switch(typeof(t=t||{encoding:"hex"})){case"string":r=t;break;case"object":n=a.extend({},t),r=n.encoding,delete n.encoding}for(var i=new A(n),s=new l(e,null!=r?r:a.guessEncoding(e)),o=[];0<s.length;){var u=i._parse();let e=u.next();for(;!e.done;){var c=s.read(e.value);if(null==c||c.length!==e.value)throw new Error("Insufficient data");e=u.next(c)}o.push(A.nullcheck(e.value))}return o}static decodeFirst(e,t,r){let n={},i=!1,s="hex";switch(typeof t){case"function":r=t,s=a.guessEncoding(e);break;case"string":s=t;break;case"object":n=a.extend({},t),s=null!=n.encoding?n.encoding:a.guessEncoding(e),delete n.encoding,i=null!=n.required&&n.required,delete n.required}const o=new A(n);let l,u=y;return o.on("data",e=>{u=A.nullcheck(e),o.close()}),"function"==typeof r?(o.once("error",e=>{var t=u;return u=b,o.close(),r(e,t)}),o.once("end",()=>{switch(u){case y:return i?r(new Error("No CBOR found")):r(null,u);case b:return;default:return r(null,u)}})):l=new Promise((e,t)=>(o.once("error",e=>(u=b,o.close(),t(e))),o.once("end",()=>{switch(u){case y:return i?t(new Error("No CBOR found")):e(u);case b:return;default:return e(u)}}))),o.end(e,s),l}static decodeAll(e,t,r){let n={},i="hex";switch(typeof t){case"function":r=t,i=a.guessEncoding(e);break;case"string":i=t;break;case"object":n=a.extend({},t),i=null!=n.encoding?n.encoding:a.guessEncoding(e),delete n.encoding}const s=new A(n);let o;const l=[];return s.on("data",e=>l.push(A.nullcheck(e))),"function"==typeof r?(s.on("error",r),s.on("end",()=>r(null,l))):o=new Promise((e,t)=>{s.on("error",t),s.on("end",()=>e(l))}),s.end(e,i),o}close(){this.running=!1,this.__fresh=!0}*_parse(){let e=null,r=0,n=null;for(;;){if(0<=this.max_depth&&r>this.max_depth)throw new Error("Maximum depth "+this.max_depth+" exceeded");var u=(yield 1)[0];if(!this.running)throw new Error("Unexpected data: 0x"+u.toString(16));var b=u>>5,y=31&u,w=null!=e?e[g]:void 0,S=null!=e?e.length:void 0;switch(y){case h.ONE:this.emit("more-bytes",b,1,w,S),n=(yield 1)[0];break;case h.TWO:case h.FOUR:case h.EIGHT:var A=1<<y-24;A=(this.emit("more-bytes",b,A,w,S),yield A);n=b===c.SIMPLE_FLOAT?A:a.parseCBORint(y,A);break;case 28:case 29:case 30:throw this.running=!1,new Error("Additional info not implemented: "+y);case h.INDEFINITE:switch(b){case c.POS_INT:case c.NEG_INT:case c.TAG:throw new Error("Invalid indefinite encoding for MT "+b)}n=-1;break;default:n=y}switch(b){case c.POS_INT:break;case c.NEG_INT:n=n===Number.MAX_SAFE_INTEGER?m:n instanceof o?d.minus(n):-1-n;break;case c.BYTE_STRING:case c.UTF8_STRING:switch(n){case 0:this.emit("start-string",b,n,w,S),n=b===c.BYTE_STRING?t.allocUnsafe(0):"";break;case-1:this.emit("start",b,f.STREAM,w,S),_=e,B=b,N=void 0,(N=new l)[p]=-1,N[f.PARENT]=_,N[g]=B,e=N,r++;continue;default:this.emit("start-string",b,n,w,S),n=yield n,b===c.UTF8_STRING&&(n=a.utf8(n))}break;case c.ARRAY:case c.MAP:switch(n){case 0:n=b===c.MAP?{}:[];break;case-1:this.emit("start",b,f.STREAM,w,S),e=v(e,b,-1),r++;continue;default:this.emit("start",b,n,w,S),e=v(e,b,n*(b-3)),r++;continue}break;case c.TAG:this.emit("start",b,n,w,S),(e=v(e,b,1)).push(n),r++;continue;case c.SIMPLE_FLOAT:if("number"==typeof n){if(y===h.ONE&&n<32)throw new Error("Invalid two-byte encoding of simple value "+n);var E=null!=e;n=s.decode(n,E,E&&e[p]<0)}else n=a.parseCBORfloat(n)}this.emit("value",n,w,S,y);let C=!1;for(;null!=e;){switch(!1){case n!==f.BREAK:e[p]=1;break;case!Array.isArray(e):e.push(n);break;case!(e instanceof l):var k=e[g];if(null!=k&&k!==b)throw this.running=!1,new Error("Invalid major type in indefinite encoding");e.write(n)}if(0!=--e[p]){C=!0;break}if(--r,delete e[p],this.emit("stop",e[g]),Array.isArray(e))switch(e[g]){case c.ARRAY:n=e;break;case c.MAP:let t=!0;if(e.length%2!=0)throw new Error("Invalid map length: "+e.length);for(let r=0,n=e.length;r<n;r+=2)if("string"!=typeof e[r]){t=!1;break}if(t){n={};for(let t=0,r=e.length;t<r;t+=2)n[e[t]]=e[t+1]}else{n=new Map;for(let t=0,r=e.length;t<r;t+=2)n.set(e[t],e[t+1])}break;case c.TAG:n=new i(e[0],e[1]).convert(this.tags)}else if(e instanceof l)switch(e[g]){case c.BYTE_STRING:n=e.slice();break;case c.UTF8_STRING:n=e.toString("utf-8")}var I=e;e=e[f.PARENT],delete I[f.PARENT],delete I[g]}if(!C)return n}var _,B,N}}A.NOT_FOUND=y,e.exports=A}).call(this,r(9).Buffer)},function(e,t,r){"use strict";r.d(t,"a",(function(){return m}));var n=r(0),i=r(1),s=r(3),a=r(10),o=r(15),l=r(2),u=r(8),c=r(28),h=r(19),f=r(39);function d(e,t,r,n,i,s){let a,o;const l=[];switch(t.toUpperCase()){case"SHA-1":a=20,o=64;break;case"SHA-256":a=32,o=64;break;case"SHA-384":a=48,o=128;break;case"SHA-512":a=64,o=128;break;default:throw new Error("Unsupported hashing algorithm")}var u=new Uint8Array(n),c=new ArrayBuffer(2*n.byteLength+2),h=new Uint8Array(c);for(let e=0;e<u.length;e++)h[2*e]=0,h[2*e+1]=u[e];h[h.length-2]=0,h[h.length-1]=0,n=c.slice(0);const f=new ArrayBuffer(o),d=new Uint8Array(f);for(let e=0;e<f.byteLength;e++)d[e]=3;const m=i.byteLength;var p=o*Math.ceil(m/o),g=(c=new ArrayBuffer(p),new Uint8Array(c)),b=new Uint8Array(i);for(let e=0;e<p;e++)g[e]=b[e%m];const y=n.byteLength;var v=o*Math.ceil(y/o),w=(i=new ArrayBuffer(v),new Uint8Array(i)),S=new Uint8Array(n);for(let e=0;e<v;e++)w[e]=S[e%y];n=c.byteLength+i.byteLength;let A=new ArrayBuffer(n),E=new Uint8Array(A);E.set(g),E.set(w,g.length);var k=Math.ceil((r>>3)/a);let I=Promise.resolve(A);for(let r=0;r<=k;r++){I=I.then(e=>{e=new ArrayBuffer(f.byteLength+e.byteLength);var t=new Uint8Array(e);return t.set(d),t.set(E,d.length),e});for(let r=0;r<s;r++)I=I.then(r=>e.digest({name:t},new Uint8Array(r)));I=I.then(e=>{var t=new ArrayBuffer(o),r=new Uint8Array(t);for(let n=0;n<t.byteLength;n++)r[n]=e[n%e.length];var n=Math.ceil(m/o)+Math.ceil(y/o),i=[];let s=0,a=o;for(let e=0;e<n;e++){var u=Array.from(new Uint8Array(A.slice(s,s+a)));(s+=o)+o>A.byteLength&&(a=A.byteLength-s);let e=511;for(let n=t.byteLength-1;0<=n;n--)e=(e>>=8)+(r[n]+u[n]),u[n]=255&e;i.push(...u)}return A=new ArrayBuffer(i.length),(E=new Uint8Array(A)).set(i),l.push(...new Uint8Array(e)),A})}return I.then(()=>{var e=new ArrayBuffer(r>>3);return new Uint8Array(e).set(new Uint8Array(l).slice(0,r>>3)),e})}class m{constructor(e={}){this.crypto=Object(i.e)(e,"crypto",{}),this.subtle=Object(i.e)(e,"subtle",{}),this.name=Object(i.e)(e,"name","")}importKey(e,t,r,s,l){let u={};switch(t instanceof Uint8Array&&(t=t.buffer),e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,r,s,l);case"spki":if(-1===(p=n.E(t)).offset)return Promise.reject("Incorrect keyData");var c=new a.a;try{c.fromSchema(p.result)}catch(e){return Promise.reject("Incorrect keyData")}switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":u.alg="PS1";break;case"SHA-256":u.alg="PS256";break;case"SHA-384":u.alg="PS384";break;case"SHA-512":u.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(l=["verify"],u.kty="RSA",u.ext=s,u.key_ops=l,"1.2.840.113549.1.1.1"!==c.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+c.algorithm.algorithmId);if("alg"in u==0)switch(r.hash.name.toUpperCase()){case"SHA-1":u.alg="RS1";break;case"SHA-256":u.alg="RS256";break;case"SHA-384":u.alg="RS384";break;case"SHA-512":u.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var h=c.toJSON();for(const e of Object.keys(h))u[e]=h[e];break;case"ECDSA":l=["verify"];case"ECDH":if(u={kty:"EC",ext:s,key_ops:l},"1.2.840.10045.2.1"!==c.algorithm.algorithmId)return Promise.reject("Incorrect public key algorithm: "+c.algorithm.algorithmId);var f=c.toJSON();for(const e of Object.keys(f))u[e]=f[e];break;case"RSA-OAEP":if(u.kty="RSA",u.ext=s,u.key_ops=l,"safari"===this.name.toLowerCase())u.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":u.alg="RSA-OAEP";break;case"SHA-256":u.alg="RSA-OAEP-256";break;case"SHA-384":u.alg="RSA-OAEP-384";break;case"SHA-512":u.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var d=c.toJSON();for(const e of Object.keys(d))u[e]=d[e];break;case"RSAES-PKCS1-V1_5":u.kty="RSA",u.ext=s,u.key_ops=l,u.alg="PS1";var m=c.toJSON();for(const e of Object.keys(m))u[e]=m[e];break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"pkcs8":var p,g=new o.a;if(-1===(p=n.E(t)).offset)return Promise.reject("Incorrect keyData");try{g.fromSchema(p.result)}catch(e){return Promise.reject("Incorrect keyData")}if("parsedKey"in g==0)return Promise.reject("Incorrect keyData");switch(r.name.toUpperCase()){case"RSA-PSS":switch(r.hash.name.toUpperCase()){case"SHA-1":u.alg="PS1";break;case"SHA-256":u.alg="PS256";break;case"SHA-384":u.alg="PS384";break;case"SHA-512":u.alg="PS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}case"RSASSA-PKCS1-V1_5":if(l=["sign"],u.kty="RSA",u.ext=s,u.key_ops=l,"1.2.840.113549.1.1.1"!==g.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect private key algorithm: "+g.privateKeyAlgorithm.algorithmId);if("alg"in u==0)switch(r.hash.name.toUpperCase()){case"SHA-1":u.alg="RS1";break;case"SHA-256":u.alg="RS256";break;case"SHA-384":u.alg="RS384";break;case"SHA-512":u.alg="RS512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var b=g.toJSON();for(const e of Object.keys(b))u[e]=b[e];break;case"ECDSA":l=["sign"];case"ECDH":if(u={kty:"EC",ext:s,key_ops:l},"1.2.840.10045.2.1"!==g.privateKeyAlgorithm.algorithmId)return Promise.reject("Incorrect algorithm: "+g.privateKeyAlgorithm.algorithmId);var y=g.toJSON();for(const e of Object.keys(y))u[e]=y[e];break;case"RSA-OAEP":if(u.kty="RSA",u.ext=s,u.key_ops=l,"safari"===this.name.toLowerCase())u.alg="RSA-OAEP";else switch(r.hash.name.toUpperCase()){case"SHA-1":u.alg="RSA-OAEP";break;case"SHA-256":u.alg="RSA-OAEP-256";break;case"SHA-384":u.alg="RSA-OAEP-384";break;case"SHA-512":u.alg="RSA-OAEP-512";break;default:return Promise.reject("Incorrect hash algorithm: "+r.hash.name.toUpperCase())}var v=g.toJSON();for(const e of Object.keys(v))u[e]=v[e];break;case"RSAES-PKCS1-V1_5":l=["decrypt"],u.kty="RSA",u.ext=s,u.key_ops=l,u.alg="PS1";var w=g.toJSON();for(const e of Object.keys(w))u[e]=w[e];break;default:return Promise.reject("Incorrect algorithm name: "+r.name.toUpperCase())}break;case"jwk":u=t;break;default:return Promise.reject("Incorrect format: "+e)}return"safari"===this.name.toLowerCase()?Promise.resolve().then(()=>this.subtle.importKey("jwk",Object(i.i)(JSON.stringify(u)),r,s,l)).then(e=>e,()=>this.subtle.importKey("jwk",u,r,s,l)):this.subtle.importKey("jwk",u,r,s,l)}exportKey(e,t){let r=this.subtle.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&(r=r.then(e=>e instanceof ArrayBuffer?JSON.parse(Object(i.a)(e)):e)),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":r=r.then(e=>{var t=new a.a;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"pkcs8":r=r.then(e=>{var t=new o.a;try{t.fromJSON(e)}catch(e){return Promise.reject("Incorrect key data")}return t.toSchema().toBER(!1)});break;case"jwk":break;default:return Promise.reject("Incorrect format: "+e)}return r}convert(e,t,r,n,i,s){switch(e.toLowerCase()){case"raw":switch(t.toLowerCase()){case"raw":return Promise.resolve(r);case"spki":return Promise.resolve().then(()=>this.importKey("raw",r,n,i,s)).then(e=>this.exportKey("spki",e));case"pkcs8":return Promise.resolve().then(()=>this.importKey("raw",r,n,i,s)).then(e=>this.exportKey("pkcs8",e));case"jwk":return Promise.resolve().then(()=>this.importKey("raw",r,n,i,s)).then(e=>this.exportKey("jwk",e));default:return Promise.reject("Incorrect outputFormat: "+t)}case"spki":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("spki",r,n,i,s)).then(e=>this.exportKey("raw",e));case"spki":return Promise.resolve(r);case"pkcs8":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"jwk":return Promise.resolve().then(()=>this.importKey("spki",r,n,i,s)).then(e=>this.exportKey("jwk",e));default:return Promise.reject("Incorrect outputFormat: "+t)}case"pkcs8":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("pkcs8",r,n,i,s)).then(e=>this.exportKey("raw",e));case"spki":return Promise.reject("Impossible to convert between SPKI/PKCS8");case"pkcs8":return Promise.resolve(r);case"jwk":return Promise.resolve().then(()=>this.importKey("pkcs8",r,n,i,s)).then(e=>this.exportKey("jwk",e));default:return Promise.reject("Incorrect outputFormat: "+t)}case"jwk":switch(t.toLowerCase()){case"raw":return Promise.resolve().then(()=>this.importKey("jwk",r,n,i,s)).then(e=>this.exportKey("raw",e));case"spki":return Promise.resolve().then(()=>this.importKey("jwk",r,n,i,s)).then(e=>this.exportKey("spki",e));case"pkcs8":return Promise.resolve().then(()=>this.importKey("jwk",r,n,i,s)).then(e=>this.exportKey("pkcs8",e));case"jwk":return Promise.resolve(r);default:return Promise.reject("Incorrect outputFormat: "+t)}default:return Promise.reject("Incorrect inputFormat: "+e)}}encrypt(...e){return this.subtle.encrypt(...e)}decrypt(...e){return this.subtle.decrypt(...e)}sign(...e){return this.subtle.sign(...e)}verify(...e){return this.subtle.verify(...e)}digest(...e){return this.subtle.digest(...e)}generateKey(...e){return this.subtle.generateKey(...e)}deriveKey(...e){return this.subtle.deriveKey(...e)}deriveBits(...e){return this.subtle.deriveBits(...e)}wrapKey(...e){return this.subtle.wrapKey(...e)}unwrapKey(...e){return this.subtle.unwrapKey(...e)}getRandomValues(e){if("getRandomValues"in this.crypto==0)throw new Error("No support for getRandomValues");return this.crypto.getRandomValues(e)}getAlgorithmByOID(e){switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}return{}}getOIDByAlgorithm(e){let t="";switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":t="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t}getAlgorithmParameters(e,t){let r={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":r={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":r={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":r={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":r={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":r={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":r={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":r={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":r={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":r={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":r={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":r={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":r={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":r={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};r={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};r={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return r}getHashAlgorithm(e){let t="";switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{var r=new c.a({schema:e.algorithmParams});if("hashAlgorithm"in r){var n=this.getAlgorithmByOID(r.hashAlgorithm.algorithmId);if("name"in n==0)return"";t=n.name}else t="SHA-1"}catch(e){}}return t}encryptEncryptedContentInfo(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("contentEncryptionAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "contentEncryptionAlgorithm"');if("hmacHashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hmacHashAlgorithm"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("contentToEncrypt"in e==0)return Promise.reject('Absent mandatory parameter "contentToEncrypt"');if("contentType"in e==0)return Promise.reject('Absent mandatory parameter "contentType"');const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm);if(""===t)return Promise.reject('Wrong "contentEncryptionAlgorithm" value');const r=this.getOIDByAlgorithm({name:"PBKDF2"});if(""===r)return Promise.reject("Can not find OID for PBKDF2");var i=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}});if(""===i)return Promise.reject('Incorrect value for "hmacHashAlgorithm": '+e.hmacHashAlgorithm);let s=Promise.resolve();const a=new ArrayBuffer(16),o=new Uint8Array(a);this.getRandomValues(o);var c=new ArrayBuffer(64);const d=new Uint8Array(c),m=(this.getRandomValues(d),new Uint8Array(e.contentToEncrypt)),p=new h.a({salt:new n.q({valueHex:c}),iterationCount:e.iterationCount,prf:new l.a({algorithmId:i,algorithmParams:new n.n})});return(s=(s=(s=s.then(()=>{var t=new Uint8Array(e.password);return this.importKey("raw",t,"PBKDF2",!1,["deriveKey"])},e=>Promise.reject(e))).then(t=>this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:d,iterations:e.iterationCount},t,e.contentEncryptionAlgorithm,!1,["encrypt"]),e=>Promise.reject(e))).then(t=>this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:o},t,m),e=>Promise.reject(e))).then(i=>{var s=new f.a({keyDerivationFunc:new l.a({algorithmId:r,algorithmParams:p.toSchema()}),encryptionScheme:new l.a({algorithmId:t,algorithmParams:new n.q({valueHex:a})})});return new u.a({contentType:e.contentType,contentEncryptionAlgorithm:new l.a({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:s.toSchema()}),encryptedContent:new n.q({valueHex:i})})},e=>Promise.reject(e))}decryptEncryptedContentInfo(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("encryptedContentInfo"in e==0)return Promise.reject('Absent mandatory parameter "encryptedContentInfo"');if("1.2.840.113549.1.5.13"!==e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)return Promise.reject('Unknown "contentEncryptionAlgorithm": '+e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId);let t,r,n=Promise.resolve();try{t=new f.a({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(n){return Promise.reject('Incorrectly encoded "pbes2Parameters"')}try{r=new h.a({schema:t.keyDerivationFunc.algorithmParams})}catch(n){return Promise.reject('Incorrectly encoded "pbkdf2Params"')}const s=this.getAlgorithmByOID(t.encryptionScheme.algorithmId);if("name"in s==0)return Promise.reject('Incorrect OID for "contentEncryptionAlgorithm": '+t.encryptionScheme.algorithmId);var a=t.encryptionScheme.algorithmParams.valueBlock.valueHex;const o=new Uint8Array(a);a=r.salt.valueBlock.valueHex;const l=new Uint8Array(a),u=r.iterationCount;let c="SHA-1";if("prf"in r){if("name"in(a=this.getAlgorithmByOID(r.prf.algorithmId))==0)return Promise.reject("Incorrect OID for HMAC hash algorithm");c=a.hash.name}return(n=(n=n.then(()=>this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),e=>Promise.reject(e))).then(e=>this.deriveKey({name:"PBKDF2",hash:{name:c},salt:l,iterations:u},e,s,!1,["decrypt"]),e=>Promise.reject(e))).then(t=>{let r=new ArrayBuffer(0);if(!1===e.encryptedContentInfo.encryptedContent.idBlock.isConstructed)r=e.encryptedContentInfo.encryptedContent.valueBlock.valueHex;else for(const t of e.encryptedContentInfo.encryptedContent.valueBlock.value)r=Object(i.k)(r,t.valueBlock.valueHex);return this.decrypt({name:s.name,iv:o},t,r)},e=>Promise.reject(e))}stampDataWithPassword(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "salt"');if("contentToStamp"in e==0)return Promise.reject('Absent mandatory parameter "contentToStamp"');let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject('Incorrect "parameters.hashAlgorithm" parameter: '+e.hashAlgorithm)}let r=Promise.resolve();const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return(r=(r=r.then(()=>d(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount))).then(e=>this.importKey("raw",new Uint8Array(e),n,!1,["sign"]))).then(t=>this.sign(n,t,new Uint8Array(e.contentToStamp)),e=>Promise.reject(e))}verifyDataStampedWithPassword(e){if(e instanceof Object==0)return Promise.reject('Parameters must have type "Object"');if("password"in e==0)return Promise.reject('Absent mandatory parameter "password"');if("hashAlgorithm"in e==0)return Promise.reject('Absent mandatory parameter "hashAlgorithm"');if("salt"in e==0)return Promise.reject('Absent mandatory parameter "iterationCount"');if("iterationCount"in e==0)return Promise.reject('Absent mandatory parameter "salt"');if("contentToVerify"in e==0)return Promise.reject('Absent mandatory parameter "contentToVerify"');if("signatureToVerify"in e==0)return Promise.reject('Absent mandatory parameter "signatureToVerify"');let t;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:return Promise.reject('Incorrect "parameters.hashAlgorithm" parameter: '+e.hashAlgorithm)}let r=Promise.resolve();const n={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}};return(r=(r=r.then(()=>d(this,e.hashAlgorithm,t,e.password,e.salt,e.iterationCount))).then(e=>this.importKey("raw",new Uint8Array(e),n,!1,["verify"]))).then(t=>this.verify(n,t,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify)),e=>Promise.reject(e))}getSignatureParameters(e,t="SHA-1"){if(""===this.getOIDByAlgorithm({name:t}))return Promise.reject("Unsupported hash algorithm: "+t);const r=new l.a,i=this.getAlgorithmParameters(e.algorithm.name,"sign");switch(i.algorithm.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":r.algorithmId=this.getOIDByAlgorithm(i.algorithm);break;case"RSA-PSS":switch(t.toUpperCase()){case"SHA-256":i.algorithm.saltLength=32;break;case"SHA-384":i.algorithm.saltLength=48;break;case"SHA-512":i.algorithm.saltLength=64}var s={};if("SHA-1"!==t.toUpperCase()){var a=this.getOIDByAlgorithm({name:t});if(""===a)return Promise.reject("Unsupported hash algorithm: "+t);s.hashAlgorithm=new l.a({algorithmId:a,algorithmParams:new n.n}),s.maskGenAlgorithm=new l.a({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:s.hashAlgorithm.toSchema()})}20!==i.algorithm.saltLength&&(s.saltLength=i.algorithm.saltLength),a=new c.a(s),r.algorithmId="1.2.840.113549.1.1.10",r.algorithmParams=a.toSchema();break;default:return Promise.reject("Unsupported signature algorithm: "+e.algorithm.name)}return Promise.resolve().then(()=>({signatureAlgorithm:r,parameters:i}))}signWithPrivateKey(e,t,r){return this.sign(r.algorithm,t,new Uint8Array(e)).then(e=>"ECDSA"===r.algorithm.name?Object(s.a)(e):e,e=>Promise.reject("Signing error: "+e))}fillPublicKeyParameters(e,t){var r={},n=this.getHashAlgorithm(t);if(""===n)return Promise.reject("Unsupported signature algorithm: "+t.algorithmId);let i;i=("1.2.840.113549.1.1.10"===t.algorithmId?t:e.algorithm).algorithmId;var s=this.getAlgorithmByOID(i);if("name"in s==="")return Promise.reject("Unsupported public key algorithm: "+t.algorithmId);if(r.algorithm=this.getAlgorithmParameters(s.name,"importkey"),"hash"in r.algorithm.algorithm&&(r.algorithm.algorithm.hash.name=n),"ECDSA"===s.name){let n=!1;if(!1===(n="algorithmParams"in e.algorithm==1&&"idBlock"in e.algorithm.algorithmParams&&1===e.algorithm.algorithmParams.idBlock.tagClass&&6===e.algorithm.algorithmParams.idBlock.tagNumber||n))return Promise.reject("Incorrect type for ECDSA public key parameters");if("name"in(t=this.getAlgorithmByOID(e.algorithm.algorithmParams.valueBlock.toString()))==0)return Promise.reject("Unsupported named curve algorithm: "+e.algorithm.algorithmParams.valueBlock.toString());r.algorithm.algorithm.namedCurve=t.name}return r}getPublicKey(e,t,r=null){return null===r&&(r=this.fillPublicKeyParameters(e,t)),t=e.toSchema().toBER(!1),e=new Uint8Array(t),this.importKey("spki",e,r.algorithm.algorithm,!0,r.algorithm.usages)}verifyWithPublicKey(e,t,r,i,a=null){let o=Promise.resolve();if(null===a){if(""===(a=this.getHashAlgorithm(i)))return Promise.reject("Unsupported signature algorithm: "+i.algorithmId);o=o.then(()=>this.getPublicKey(r,i))}else{const e={};let t;t=("1.2.840.113549.1.1.10"===i.algorithmId?i:r.algorithm).algorithmId;var l=this.getAlgorithmByOID(t);if("name"in l==="")return Promise.reject("Unsupported public key algorithm: "+i.algorithmId);if(e.algorithm=this.getAlgorithmParameters(l.name,"importkey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=a),"ECDSA"===l.name){let t=!1;if(!1===(t="algorithmParams"in r.algorithm==1&&"idBlock"in r.algorithm.algorithmParams&&1===r.algorithm.algorithmParams.idBlock.tagClass&&6===r.algorithm.algorithmParams.idBlock.tagNumber||t))return Promise.reject("Incorrect type for ECDSA public key parameters");if("name"in(l=this.getAlgorithmByOID(r.algorithm.algorithmParams.valueBlock.toString()))==0)return Promise.reject("Unsupported named curve algorithm: "+r.algorithm.algorithmParams.valueBlock.toString());e.algorithm.algorithm.namedCurve=l.name}o=o.then(()=>this.getPublicKey(r,null,e))}return o.then(r=>{var o=this.getAlgorithmParameters(r.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=a);let l=t.valueBlock.valueHex;if("ECDSA"===r.algorithm.name&&(u=n.E(l),l=Object(s.b)(u.result)),"RSA-PSS"===r.algorithm.name){let e;try{e=new c.a({schema:i.algorithmParams})}catch(r){return Promise.reject(r)}o.algorithm.saltLength="saltLength"in e?e.saltLength:20;let t="SHA-1";if("hashAlgorithm"in e){var u=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId);if("name"in u==0)return Promise.reject("Unrecognized hash algorithm: "+e.hashAlgorithm.algorithmId);t=u.name}o.algorithm.hash.name=t}return this.verify(o.algorithm,r,new Uint8Array(l),new Uint8Array(e))})}}},,,function(e,t,r){"use strict";var n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},s=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},a=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}var a,o,l;g(e,t,s,{once:!0}),"error"!==t&&(o=i,l={once:!0},"function"==typeof(a=e).on)&&g(a,"error",o,l)}))},(o.EventEmitter=o).prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function c(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,s;return u(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),s=i[t]),void 0===s?(s=i[t]=r,++e._eventsCount):("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),0<(i=c(e))&&s.length>i&&!s.warned&&(s.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=s.length,r=n,console)&&console.warn&&console.warn(r)),e}function f(e,t,r){return(t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r})).listener=r,e.wrapFn=t}function d(e,t,r){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),s=0;s<i.length;++s)i[s]=n[s].listener||n[s];return i}return p(e,e.length)}function m(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function p(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function g(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,s=this._events;if(void 0!==s)n=n&&void 0===s.error;else if(!n)return!1;if(n){if((a=0<t.length?t[0]:a)instanceof Error)throw a;throw(n=new Error("Unhandled error."+(a?" ("+a.message+")":""))).context=a,n}var a=s[e];if(void 0===a)return!1;if("function"==typeof a)i(a,this,t);else{var o=a.length,l=p(a,o);for(r=0;r<o;++r)i(l[r],this,t)}return!0},o.prototype.on=o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},o.prototype.off=o.prototype.removeListener=function(e,t){var r,n,i,s,a;if(u(t),void 0!==(n=this._events)&&void 0!==(r=n[e]))if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;0<=s;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,i=s;break}if(i<0)return this;if(0===i)r.shift();else{for(var o=r,l=i;l+1<o.length;l++)o[l]=o[l+1];o.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.removeAllListeners=function(e){var t,r=this._events;if(void 0!==r)if(void 0===r.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]);else if(0===arguments.length){for(var n,i=Object.keys(r),s=0;s<i.length;++s)"removeListener"!==(n=i[s])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;0<=s;s--)this.removeListener(e,t[s]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},o.prototype.listenerCount=m,o.prototype.eventNames=function(){return 0<this._eventsCount?s(this._events):[]}},function(e,t,r){(((t=e.exports=r(53)).Stream=t).Readable=t).Writable=r(49),t.Duplex=r(21),t.Transform=r(57),t.PassThrough=r(77)},function(e,t,r){var n=r(9),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=a),s(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");return e=i(e),void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";(function(t,n,i){var s=r(41);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){var r=t,n=e,i=r.entry;for(r.entry=null;i;){var s=i.callback;n.pendingcb--,s(void 0),i=i.next}n.corkedRequestsFree.next=r}}e.exports=p;var o,l,u=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?n:s.nextTick,c=(n=((t=(p.WritableState=m,Object.create(r(31)))).inherits=r(14),{deprecate:r(75)}),r(54)),h=r(48).Buffer,f=(void 0!==i?i:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};i=r(55);function d(){}function m(e,t){o=o||r(21),e=e||{};var n=t instanceof o,i=(this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.writableObjectMode),e.highWaterMark),l=e.writableHighWaterMark,c=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:n&&(l||0===l)?l:c,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,i=(this.destroyed=!1)===e.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){e=e,i=(n=(r=t)._writableState).sync,a=n.writecb;var r,n,i,a,o,l,c,h,f=n;f.writing=!1,f.writecb=null,f.length-=f.writelen,f.writelen=0,e?(f=r,l=i,c=e,h=a,--(o=n).pendingcb,l?(s.nextTick(h,c),s.nextTick(S,f,o),f._writableState.errorEmitted=!0,f.emit("error",c)):(h(c),f._writableState.errorEmitted=!0,f.emit("error",c),S(f,o))):((e=v(n))||n.corked||n.bufferProcessing||!n.bufferedRequest||y(r,n),i?u(b,r,n,e,a):b(r,n,e,a))},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}t.inherits(p,c),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t};try{Object.defineProperty(m.prototype,"buffer",{get:n.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}function p(e){if(o=o||r(21),!(l.call(p,this)||this instanceof o))return new p(e);this._writableState=new m(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final)&&(this._final=e.final),c.call(this)}function g(e,t,r,n,i,s,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function b(e,t,r,n){var i;r||(r=e,0===(i=t).length&&i.needDrain&&(i.needDrain=!1,r.emit("drain"))),t.pendingcb--,n(),S(e,t)}function y(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){for(var n=t.bufferedRequestCount,i=new Array(n),s=((n=t.corkedRequestsFree).entry=r,0),o=!0;r;)(i[s]=r).isBuf||(o=!1),r=r.next,s+=1;i.allBuffers=o,g(e,t,!0,t.length,i,"",n.finish),t.pendingcb++,t.lastBufferedRequest=null,n.next?(t.corkedRequestsFree=n.next,n.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,c=r.callback;if(g(e,t,!1,t.objectMode?1:l.length,l,u,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),S(e,t)}))}function S(e,t){var r,n,i=v(t);return i&&(r=e,(n=t).prefinished||n.finalCalled||("function"==typeof r._final?(n.pendingcb++,n.finalCalled=!0,s.nextTick(w,r,n)):(n.prefinished=!0,r.emit("prefinish"))),0===t.pendingcb)&&(t.finished=!0,e.emit("finish")),i}"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(p,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===p&&e&&e._writableState instanceof m}})):l=function(e){return e instanceof this},p.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},p.prototype.write=function(e,t,r){var n,i,a,o,l,u,c,m=this._writableState,p=!1,b=!m.objectMode&&(b=e,h.isBuffer(b)||b instanceof f);return b&&!h.isBuffer(e)&&(l=e,e=h.from(l)),"function"==typeof t&&(r=t,t=null),t=b?"buffer":t||m.defaultEncoding,"function"!=typeof r&&(r=d),m.ended?(l=this,u=r,c=new Error("write after end"),l.emit("error",c),s.nextTick(u,c)):(b||(u=this,c=m,i=r,o=!(a=!0),null===(n=e)?o=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||c.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(u.emit("error",o),s.nextTick(i,o),a=!1),a))&&(m.pendingcb++,p=function(e,t,r,n,i,s){r||n!==(o=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=h.from(t,r)),t}(t,n,i))&&(r=!0,i="buffer",n=o);var a,o=t.objectMode?1:n.length,l=(t.length+=o,t.length<t.highWaterMark);return l||(t.needDrain=!0),t.writing||t.corked?(a=t.lastBufferedRequest,t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1):g(e,t,!1,o,n,i,s),l}(this,m,b,e,t,r)),p},p.prototype.cork=function(){this._writableState.corked++},p.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||y(this,e))},p.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase()))return this._writableState.defaultEncoding=e,this;throw new TypeError("Unknown encoding: "+e)},Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),p.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},p.prototype._writev=null,p.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||(e=this,t=r,(r=n).ending=!0,S(e,r),t&&(r.finished?s.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1)},Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),p.prototype.destroy=i.destroy,p.prototype._undestroy=i.undestroy,p.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(20),r(73).setImmediate,r(18))},function(e,t,r){"use strict";var n=r(25).BigNumber;const i=r(24),s=r(58),a=new n(-1),o=new n(10),l=new n(2);e.exports=class e{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error("Invalid tag type ("+typeof this.tag+")");if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(t){let r=null!=t?t[this.tag]:void 0;if("function"!=typeof r&&"function"!=typeof(r=e["_tag_"+this.tag]))return this;try{return r.call(e,this.value)}catch(t){return this.err=t,this}}static _tag_0(e){return new Date(e)}static _tag_1(e){return new Date(1e3*e)}static _tag_2(e){return i.bufferToBignumber(e)}static _tag_3(e){return a.minus(i.bufferToBignumber(e))}static _tag_4(e){return o.pow(e[0]).times(e[1])}static _tag_5(e){return l.pow(e[0]).times(e[1])}static _tag_32(e){return s.parse(e)}static _tag_35(e){return new RegExp(e)}}},,function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){"use strict";(function(t,n){function i(e,t){return e.listeners(t).length}var s,a,o=r(41),l=(e.exports=b,r(52)),u=(b.ReadableState=g,r(46).EventEmitter,r(54)),c=r(48).Buffer,h=(void 0!==t?t:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},f=((t=Object.create(r(31))).inherits=r(14),r(70)),d=void 0,m=(d=f&&f.debuglog?f.debuglog("stream"):function(){},r(71)),p=(f=r(55),t.inherits(b,u),["error","close","destroy","pause","resume"]);function g(e,t){e=e||{};t=t instanceof(s=s||r(21));var n=(this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.readableObjectMode),e.highWaterMark),i=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:t&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(a=a||r(56).StringDecoder,this.decoder=new a(e.encoding),this.encoding=e.encoding)}function b(e){if(s=s||r(21),!(this instanceof b))return new b(e);this._readableState=new g(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy)&&(this._destroy=e.destroy),u.call(this)}function y(e,t,r,n,i){var s,a,o,l,u=e._readableState;return null===t?(u.reading=!1,a=e,(l=u).ended||(l.decoder&&(o=l.decoder.end())&&o.length&&(l.buffer.push(o),l.length+=l.objectMode?1:o.length),l.ended=!0,A(a))):(s=i?s:function(e,t){var r;return!function(e){return c.isBuffer(e)||e instanceof h}(t)&&"string"!=typeof t&&void 0!==t&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}(u,t))?e.emit("error",s):u.objectMode||t&&0<t.length?("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===c.prototype||(o=t,t=c.from(o)),n?u.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):v(e,u,t,!0):u.ended?e.emit("error",new Error("stream.push() after EOF")):(u.reading=!1,!u.decoder||r||(t=u.decoder.write(t),u.objectMode)||0!==t.length?v(e,u,t,!1):k(e,u))):n||(u.reading=!1),!(l=u).ended&&(l.needReadable||l.length<l.highWaterMark||0===l.length)}function v(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&A(e)),k(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=f.destroy,b.prototype._undestroy=f.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=c.from(e,t),t=""),r=!0),y(this,e,t,!1,r)},b.prototype.unshift=function(e){return y(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return a=a||r(56).StringDecoder,this._readableState.decoder=new a(e),this._readableState.encoding=e,this};var w=8388608;function S(e,t){var r;return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?(t.flowing&&t.length?t.buffer.head.data:t).length:(e>t.highWaterMark&&(t.highWaterMark=(w<=(r=e)?r=w:(r--,r=(r=(r=(r=(r|=r>>>1)|r>>>2)|r>>>4)|r>>>8)|r>>>16,r++),r)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(d("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?o.nextTick(E,e):E(e))}function E(e){d("emit readable"),e.emit("readable"),N(e)}function k(e,t){t.readingMore||(t.readingMore=!0,o.nextTick(I,e,t))}function I(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(d("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function _(e){d("readable nexttick read 0"),e.read(0)}function B(e,t){t.reading||(d("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(d("flow",t.flowing);t.flowing&&null!==e.read(););}function C(e,t){var r;return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():(r?function(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var s=r.data,a=e>s.length?s.length:e;if(a===s.length?i+=s:i+=s.slice(0,e),0==(e-=a)){a===s.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r).data=s.slice(a);break}++n}return t.length-=n,i}:function(e,t){var r=c.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var s=n.data,a=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,a),0==(e-=a)){a===s.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n).data=s.slice(a);break}++i}return t.length-=i,r})(e,t),n}(e,t.buffer,t.decoder),r)}function O(e){var t=e._readableState;if(0<t.length)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,o.nextTick(x,t,e))}function x(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function j(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){d("read",e),e=parseInt(e,10);var t,r=this._readableState,n=e;return 0!==e&&(r.emittedReadable=!1),0===e&&r.needReadable&&(r.length>=r.highWaterMark||r.ended)?(d("read: emitReadable",r.length,r.ended),(0===r.length&&r.ended?O:A)(this),null):0===(e=S(e,r))&&r.ended?(0===r.length&&O(this),null):(t=r.needReadable,d("need readable",t),(0===r.length||r.length-e<r.highWaterMark)&&d("length less than watermark",t=!0),r.ended||r.reading?d("reading or ended",t=!1):t&&(d("do read"),r.reading=!0,r.sync=!0,0===r.length&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=S(n,r))),null===(t=0<e?C(e,r):null)?(r.needReadable=!0,e=0):r.length-=e,0===r.length&&(r.ended||(r.needReadable=!0),n!==e)&&r.ended&&O(this),null!==t&&this.emit("data",t),t)},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=e;break;case 1:s.pipes=[s.pipes,e];break;default:s.pipes.push(e)}function a(){d("onend"),e.end()}s.pipesCount+=1,d("pipe count=%d opts=%j",s.pipesCount,t),t=t&&!1===t.end||e===n.stdout||e===n.stderr?y:a,s.endEmitted?o.nextTick(t):r.once("end",t),e.on("unpipe",(function t(n,i){d("onunpipe"),n===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,d("cleanup"),e.removeListener("close",g),e.removeListener("finish",b),e.removeListener("drain",c),e.removeListener("error",p),e.removeListener("unpipe",t),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",m),h=!0,!s.awaitDrain||e._writableState&&!e._writableState.needDrain||c())})),u=r;var u,c=function(){var e=u._readableState;d("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&i(u,"data")&&(e.flowing=!0,N(u))},h=(e.on("drain",c),!1),f=!1;function m(t){d("ondata"),(f=!1)!==e.write(t)||f||((1===s.pipesCount&&s.pipes===e||1<s.pipesCount&&-1!==j(s.pipes,e))&&!h&&(d("false write response, pause",s.awaitDrain),s.awaitDrain++,f=!0),r.pause())}function p(t){d("onerror",t),y(),e.removeListener("error",p),0===i(e,"error")&&e.emit("error",t)}function g(){e.removeListener("finish",b),y()}function b(){d("onfinish"),e.removeListener("close",g),y()}function y(){d("unpipe"),r.unpipe(e)}return r.on("data",m),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?l(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",p),e.once("close",g),e.once("finish",b),e.emit("pipe",r),s.flowing||(d("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0!==t.pipesCount)if(1===t.pipesCount)e&&e!==t.pipes||(e=e||t.pipes,t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r));else if(e){var n=j(t.pipes,e);-1!==n&&(t.pipes.splice(n,1),--t.pipesCount,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r))}else{var i=t.pipes,s=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<s;a++)i[a].emit("unpipe",this,{hasUnpiped:!1})}return this},b.prototype.addListener=b.prototype.on=function(e,t){return t=u.prototype.on.call(this,e,t),"data"===e?!1!==this._readableState.flowing&&this.resume():"readable"!==e||(e=this._readableState).endEmitted||e.readableListening||(e.readableListening=e.needReadable=!0,e.emittedReadable=!1,e.reading?e.length&&A(this):o.nextTick(_,this)),t},b.prototype.resume=function(){var e,t=this._readableState;return t.flowing||(d("resume"),t.flowing=!0,e=this,(t=t).resumeScheduled)||(t.resumeScheduled=!0,o.nextTick(B,e,t)),this},b.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t,r=this,n=this._readableState,i=!1;for(t in e.on("end",(function(){var e;d("wrapped end"),n.decoder&&!n.ended&&(e=n.decoder.end())&&e.length&&r.push(e),r.push(null)})),e.on("data",(function(t){d("wrapped data"),n.decoder&&(t=n.decoder.write(t)),n.objectMode&&null==t||(n.objectMode||t&&t.length)&&!r.push(t)&&(i=!0,e.pause())})),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var s=0;s<p.length;s++)e.on(p[s],this.emit.bind(this,p[s]));return this._read=function(t){d("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=C}).call(this,r(18),r(20))},function(e,t,r){e.exports=r(46).EventEmitter},function(e,t,r){"use strict";var n=r(41);function i(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(i,this,e)):n.nextTick(i,this,e)):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t&&t(e)}))),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";var n=r(76).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);if(t=e.toString("utf16le",t)){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t;e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function c(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(t.StringDecoder=s).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+"":e},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(!(n<r)){var i=a(t[n]);if(0<=i)return 0<i&&(e.lastNeed=i-1),i;if(!(--n<r||-2===i)){if(0<=(i=a(t[n])))return 0<i&&(e.lastNeed=i-2),i;if(!(--n<r||-2===i)&&0<=(i=a(t[n])))return 0<i&&(2===i?i=0:e.lastNeed=i-3),i}}return 0}(this,e,t);return this.lastNeed?(this.lastTotal=r,r=e.length-(r-this.lastNeed),e.copy(this.lastChar,0,r),e.toString("utf8",t,r)):e.toString("utf8",t)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";e.exports=i;var n=r(21);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e),this._transformState={afterTransform:function(e,t){var r=this._transformState,n=(r.transforming=!1,r.writecb);if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,(r.writecb=null)!=t&&this.push(t),n(e),(r=this._readableState).reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",s)}function s(){var e=this;"function"==typeof this._flush?this._flush((function(t,r){a(e,t,r)})):a(this,null,null)}function a(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");e.push(null)}(e=Object.create(r(31))).inherits=r(14),e.inherits(i,n),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,n.prototype.push.call(this,e,t)},i.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,r){var n=this._transformState;n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming&&(r=this._readableState,n.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)},i.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},i.prototype._destroy=function(e,t){var r=this;n.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){"use strict";var n=r(86),i=r(87);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=y,t.resolve=function(e,t){return y(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?y(e,!1,!0).resolveObject(t):t},t.format=function(e){return i.isString(e)&&(e=y(e)),e instanceof s?e.format():s.prototype.format.call(e)},t.Url=s;var a=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=(t=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),["'"].concat(t)),c=["%","/","?",";","#"].concat(u),h=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},p={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=r(88);function y(e,t,r){var n;return e&&i.isObject(e)&&e instanceof s?e:((n=new s).parse(e,t,r),n)}s.prototype.parse=function(e,t,r){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=-1!==(s=e.indexOf("?"))&&s<e.indexOf("#")?"?":"#",o=e.split(s);o[0]=o[0].replace(/\\/g,"/");var y,v=(v=e=o.join(s)).trim();if(!r&&1===e.split("#").length&&(o=l.exec(v)))return this.path=v,this.href=v,this.pathname=o[1],o[2]?(this.search=o[2],this.query=t?b.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this;if((s=a.exec(v))&&(y=(s=s[0]).toLowerCase(),this.protocol=y,v=v.substr(s.length)),!(r||s||v.match(/^\/\/[^@\/]+@[^@\/]+/))||!(T="//"===v.substr(0,2))||s&&p[s]||(v=v.substr(2),this.slashes=!0),!p[s]&&(T||s&&!g[s])){for(var w=-1,S=0;S<h.length;S++)-1!==(A=v.indexOf(h[S]))&&(-1===w||A<w)&&(w=A);-1!==(e=-1===w?v.lastIndexOf("@"):v.lastIndexOf("@",w))&&(o=v.slice(0,e),v=v.slice(e+1),this.auth=decodeURIComponent(o));var A;for(w=-1,S=0;S<c.length;S++)-1!==(A=v.indexOf(c[S]))&&(-1===w||A<w)&&(w=A);if(-1===w&&(w=v.length),this.host=v.slice(0,w),v=v.slice(w),this.parseHost(),this.hostname=this.hostname||"",!(r="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1]))for(var E=this.hostname.split(/\./),k=(S=0,E.length);S<k;S++){var I=E[S];if(I&&!I.match(f)){for(var _="",B=0,N=I.length;B<N;B++)127<I.charCodeAt(B)?_+="x":_+=I[B];if(!_.match(f)){var C=E.slice(0,S),O=E.slice(S+1),x=I.match(d);x&&(C.push(x[1]),O.unshift(x[2])),O.length&&(v="/"+O.join(".")+v),this.hostname=C.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),r||(this.hostname=n.toASCII(this.hostname));var j=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+j,this.href+=this.host,r&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==v[0])&&(v="/"+v)}if(!m[y])for(S=0,k=u.length;S<k;S++){var P,D=u[S];-1!==v.indexOf(D)&&((P=encodeURIComponent(D))===D&&(P=escape(D)),v=v.split(D).join(P))}return-1!==(s=v.indexOf("#"))&&(this.hash=v.substr(s),v=v.slice(0,s)),-1!==(e=v.indexOf("?"))?(this.search=v.substr(e),this.query=v.substr(e+1),t&&(this.query=b.parse(this.query)),v=v.slice(0,e)):t&&(this.search="",this.query={}),v&&(this.pathname=v),g[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(j=this.pathname||"",o=this.search||"",this.path=j+o),this.href=this.format(),this},s.prototype.format=function(){var e=((a=this.auth||"")&&(a=(a=encodeURIComponent(a)).replace(/%3A/i,":"),a+="@"),this.protocol||""),t=this.pathname||"",r=this.hash||"",n=!1,s="",a=(this.host?n=a+this.host:this.hostname&&(n=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port)&&(n+=":"+this.port),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(s=b.stringify(this.query)),this.search||s&&"?"+s||"");return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==n?(n="//"+(n||""),t&&"/"!==t.charAt(0)&&(t="/"+t)):n=n||"",r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+n+(t=t.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(a=a.replace("#","%23"))+r},s.prototype.resolve=function(e){return this.resolveObject(y(e,!1,!0)).format()},s.prototype.resolveObject=function(e){i.isString(e)&&((m=new s).parse(e,!1,!0),e=m);for(var t=new s,r=Object.keys(this),n=0;n<r.length;n++){var a=r[n];t[a]=this[a]}if(t.hash=e.hash,""!==e.href)if(e.slashes&&!e.protocol){for(var o=Object.keys(e),l=0;l<o.length;l++){var u=o[l];"protocol"!==u&&(t[u]=e[u])}g[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/")}else if(e.protocol&&e.protocol!==t.protocol)if(g[e.protocol]){if(t.protocol=e.protocol,e.host||p[e.protocol])t.pathname=e.pathname;else{for(var c=(e.pathname||"").split("/");c.length&&!(e.host=c.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==c[0]&&c.unshift(""),c.length<2&&c.unshift(""),t.pathname=c.join("/")}t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,(t.pathname||t.search)&&(m=t.pathname||"",S=t.search||"",t.path=m+S),t.slashes=t.slashes||e.slashes}else for(var h=Object.keys(e),f=0;f<h.length;f++){var d=h[f];t[d]=e[d]}else{var m=t.pathname&&"/"===t.pathname.charAt(0),b=m=(S=e.host||e.pathname&&"/"===e.pathname.charAt(0))||m||t.host&&e.pathname,y=t.pathname&&t.pathname.split("/")||[],v=(c=e.pathname&&e.pathname.split("/")||[],t.protocol&&!g[t.protocol]);if(v&&(t.hostname="",t.port=null,t.host&&(""===y[0]?y[0]=t.host:y.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host=null),m=m&&(""===c[0]||""===y[0])),S)t.host=(e.host||""===e.host?e:t).host,t.hostname=(e.hostname||""===e.hostname?e:t).hostname,t.search=e.search,t.query=e.query,y=c;else if(c.length)(y=y||[]).pop(),y=y.concat(c),t.search=e.search,t.query=e.query;else if(!i.isNullOrUndefined(e.search))return v&&(t.hostname=t.host=y.shift(),k=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=k.shift(),t.host=t.hostname=k.shift()),t.search=e.search,t.query=e.query,i.isNull(t.pathname)&&i.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.href=t.format(),t;if(y.length){for(var w=y.slice(-1)[0],S=(t.host||e.host||1<y.length)&&("."===w||".."===w)||""===w,A=0,E=y.length;0<=E;E--)"."===(w=y[E])?y.splice(E,1):".."===w?(y.splice(E,1),A++):A&&(y.splice(E,1),A--);if(!m&&!b)for(;A--;)y.unshift("..");!m||""===y[0]||y[0]&&"/"===y[0].charAt(0)||y.unshift(""),S&&"/"!==y.join("/").substr(-1)&&y.push("");var k;b=""===y[0]||y[0]&&"/"===y[0].charAt(0);v&&(t.hostname=t.host=!b&&y.length?y.shift():"",k=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=k.shift(),t.host=t.hostname=k.shift()),(m=m||t.host&&y.length)&&!b&&y.unshift(""),y.length?t.pathname=y.join("/"):(t.pathname=null,t.path=null),i.isNull(t.pathname)&&i.isNull(t.search)||(t.path=(t.pathname||"")+(t.search||"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes}else t.pathname=null,t.search?t.path="/"+t.search:t.path=null}return t.href=t.format(),t},s.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){"use strict";(function(t){var n=r(23);const i=r(58),s=r(25).BigNumber,a=r(34);r(50),r(33);const o=r(24);var l=r(22);const u=l.MT,c=l.NUMBYTES,h=l.SHIFT32,f=l.SYMS,d=l.TAG,m=l.MT.SIMPLE_FLOAT<<5|l.NUMBYTES.TWO,p=l.MT.SIMPLE_FLOAT<<5|l.NUMBYTES.FOUR,g=l.MT.SIMPLE_FLOAT<<5|l.NUMBYTES.EIGHT,b=l.MT.SIMPLE_FLOAT<<5|l.SIMPLE.TRUE,y=l.MT.SIMPLE_FLOAT<<5|l.SIMPLE.FALSE,v=l.MT.SIMPLE_FLOAT<<5|l.SIMPLE.UNDEFINED,w=l.MT.SIMPLE_FLOAT<<5|l.SIMPLE.NULL,S=new s("0x20000000000000"),A=t.from("f97e00","hex"),E=t.from("f9fc00","hex"),k=t.from("f97c00","hex"),I=t.from("f98000","hex"),_=Symbol("CBOR_LOOP_DETECT");class B extends n.Transform{constructor(e){var r=(super(e=Object.assign({},e,{readableObjectMode:!1,writableObjectMode:!0})),this.canonical=e.canonical,this.encodeUndefined=e.encodeUndefined,this.disallowUndefinedKeys=!!e.disallowUndefinedKeys,this.dateType=null!=e.dateType?e.dateType.toLowerCase():"number","symbol"==typeof e.detectLoops?this.detectLoops=e.detectLoops:this.detectLoops=e.detectLoops?Symbol("CBOR_DETECT"):null,this.semanticTypes=[Array,this._pushArray,Date,this._pushDate,t,this._pushBuffer,Map,this._pushMap,a,this._pushNoFilter,RegExp,this._pushRegexp,Set,this._pushSet,s,this._pushBigNumber,ArrayBuffer,this._pushUint8Array,Uint8ClampedArray,this._pushUint8Array,Uint8Array,this._pushUint8Array,Uint16Array,this._pushArray,Uint32Array,this._pushArray,Int8Array,this._pushArray,Int16Array,this._pushArray,Int32Array,this._pushArray,Float32Array,this._pushFloat32Array,Float64Array,this._pushFloat64Array],i.Url&&this.semanticTypes.push(i.Url,this._pushUrl),i.URL&&this.semanticTypes.push(i.URL,this._pushURL),e.genTypes||[]);for(let e=0,t=r.length;e<t;e+=2)this.addSemanticType(r[e],r[e+1])}_transform(e,t,r){return r(!1===this.pushAny(e)?new Error("Push Error"):void 0)}_flush(e){return e()}addSemanticType(e,t){for(let n=0,i=this.semanticTypes.length;n<i;n+=2){var r;if(this.semanticTypes[n]===e)return r=this.semanticTypes[n+1],this.semanticTypes[n+1]=t,r}return this.semanticTypes.push(e,t),null}_pushUInt8(e){var r=t.allocUnsafe(1);return r.writeUInt8(e,0),this.push(r)}_pushUInt16BE(e){var r=t.allocUnsafe(2);return r.writeUInt16BE(e,0),this.push(r)}_pushUInt32BE(e){var r=t.allocUnsafe(4);return r.writeUInt32BE(e,0),this.push(r)}_pushFloatBE(e){var r=t.allocUnsafe(4);return r.writeFloatBE(e,0),this.push(r)}_pushDoubleBE(e){var r=t.allocUnsafe(8);return r.writeDoubleBE(e,0),this.push(r)}_pushNaN(){return this.push(A)}_pushInfinity(e){return e=e<0?E:k,this.push(e)}_pushFloat(e){if(this.canonical){var r=t.allocUnsafe(2);if(o.writeHalf(r,e)&&o.parseHalf(r)===e)return this._pushUInt8(m)&&this.push(r)}return Math.fround(e)===e?this._pushUInt8(p)&&this._pushFloatBE(e):this._pushUInt8(g)&&this._pushDoubleBE(e)}_pushInt(e,t,r){var n=t<<5;switch(!1){case!(e<24):return this._pushUInt8(n|e);case!(e<=255):return this._pushUInt8(n|c.ONE)&&this._pushUInt8(e);case!(e<=65535):return this._pushUInt8(n|c.TWO)&&this._pushUInt16BE(e);case!(e<=4294967295):return this._pushUInt8(n|c.FOUR)&&this._pushUInt32BE(e);case!(e<=Number.MAX_SAFE_INTEGER):return this._pushUInt8(n|c.EIGHT)&&this._pushUInt32BE(Math.floor(e/h))&&this._pushUInt32BE(e%h);default:return t===u.NEG_INT?this._pushFloat(r):this._pushFloat(e)}}_pushIntNum(e){return Object.is(e,-0)?this.push(I):e<0?this._pushInt(-e-1,u.NEG_INT,e):this._pushInt(e,u.POS_INT)}_pushNumber(e){switch(!1){case!isNaN(e):return this._pushNaN();case isFinite(e):return this._pushInfinity(e);case Math.round(e)!==e:return this._pushIntNum(e);default:return this._pushFloat(e)}}_pushString(e){var r=t.byteLength(e,"utf8");return this._pushInt(r,u.UTF8_STRING)&&this.push(e,"utf8")}_pushBoolean(e){return this._pushUInt8(e?b:y)}_pushUndefined(e){switch(typeof this.encodeUndefined){case"undefined":return this._pushUInt8(v);case"function":return this.pushAny(this.encodeUndefined.call(this,e));case"object":if(t.isBuffer(this.encodeUndefined))return this.push(this.encodeUndefined)}return this.pushAny(this.encodeUndefined)}_pushNull(e){return this._pushUInt8(w)}_pushArray(e,t){var r=t.length;if(!e._pushInt(r,u.ARRAY))return!1;for(let n=0;n<r;n++)if(!e.pushAny(t[n]))return!1;return!0}_pushTag(e){return this._pushInt(e,u.TAG)}_pushDate(e,t){switch(e.dateType){case"string":return e._pushTag(d.DATE_STRING)&&e._pushString(t.toISOString());case"int":case"integer":return e._pushTag(d.DATE_EPOCH)&&e._pushIntNum(Math.round(t/1e3));case"float":return e._pushTag(d.DATE_EPOCH)&&e._pushFloat(t/1e3);default:return e._pushTag(d.DATE_EPOCH)&&e.pushAny(t/1e3)}}_pushBuffer(e,t){return e._pushInt(t.length,u.BYTE_STRING)&&e.push(t)}_pushNoFilter(e,t){return e._pushBuffer(e,t.slice())}_pushRegexp(e,t){return e._pushTag(d.REGEXP)&&e.pushAny(t.source)}_pushSet(e,t){if(!e._pushInt(t.size,u.ARRAY))return!1;for(const r of t)if(!e.pushAny(r))return!1;return!0}_pushUrl(e,t){return e._pushTag(d.URI)&&e.pushAny(t.format())}_pushURL(e,t){return e._pushTag(d.URI)&&e.pushAny(t.toString())}_pushBigint(e){let r=d.POS_BIGINT,n=(e.isNegative()&&(e=e.negated().minus(1),r=d.NEG_BIGINT),e.toString(16));return n.length%2&&(n="0"+n),e=t.from(n,"hex"),this._pushTag(r)&&this._pushBuffer(this,e)}_pushJSBigint(e){let r=d.POS_BIGINT,n=(e<0&&(e=-e+BigInt("-1"),r=d.NEG_BIGINT),e.toString(16));return n.length%2&&(n="0"+n),e=t.from(n,"hex"),this._pushTag(r)&&this._pushBuffer(this,e)}_pushBigNumber(e,t){var r,n;return t.isNaN()?e._pushNaN():t.isFinite()?t.isInteger()?e._pushBigint(t):!(!e._pushTag(d.DECIMAL_FRAC)||!e._pushInt(2,u.ARRAY)||(r=t.decimalPlaces(),n=t.times(new s(10).pow(r)),!e._pushIntNum(-r)))&&(n.abs().isLessThan(S)?e._pushIntNum(n.toNumber()):e._pushBigint(n)):e._pushInfinity(t.isNegative()?-1/0:1/0)}_pushMap(e,t){if(!e._pushInt(t.size,u.MAP))return!1;if(e.canonical){var r,n,i=[...t.entries()];const s=new B(this),o=new a({highWaterMark:this.readableHighWaterMark});for([r,n]of(s.pipe(o),i.sort(([e],[t])=>(s.pushAny(e),e=o.read(),s.pushAny(t),t=o.read(),e.compare(t))),i)){if(e.disallowUndefinedKeys&&void 0===r)throw new Error("Invalid Map key: undefined");if(!e.pushAny(r)||!e.pushAny(n))return!1}}else for(var[s,o]of t){if(e.disallowUndefinedKeys&&void 0===s)throw new Error("Invalid Map key: undefined");if(!e.pushAny(s)||!e.pushAny(o))return!1}return!0}_pushUint8Array(e,r){return e._pushBuffer(e,t.from(r))}_pushFloat32Array(e,t){var r=t.length;if(!e._pushInt(r,u.ARRAY))return!1;for(let n=0;n<r;n++)if(!e._pushUInt8(p)||!e._pushFloatBE(t[n]))return!1;return!0}_pushFloat64Array(e,t){var r=t.length;if(!e._pushInt(r,u.ARRAY))return!1;for(let n=0;n<r;n++)if(!e._pushUInt8(g)||!e._pushDoubleBE(t[n]))return!1;return!0}removeLoopDetectors(e){if(!this.detectLoops||"object"!=typeof e||!e)return!1;var t=e[_];if(!t||t!==this.detectLoops)return!1;if(delete e[_],Array.isArray(e))for(const t of e)this.removeLoopDetectors(t);else for(const t in e)this.removeLoopDetectors(e[t]);return!0}_pushObject(e){if(!e)return this._pushNull(e);if(this.detectLoops){if(e[_]===this.detectLoops)throw new Error("Loop detected while CBOR encoding");e[_]=this.detectLoops}var t=e.encodeCBOR;if("function"==typeof t)return t.call(e,this);for(let t=0,r=this.semanticTypes.length;t<r;t+=2)if(e instanceof this.semanticTypes[t])return this.semanticTypes[t+1].call(e,this,e);var r=Object.keys(e);const n={};if(this.canonical&&r.sort((e,t)=>(e=n[e]||(n[e]=B.encode(e)),t=n[t]||(n[t]=B.encode(t)),e.compare(t))),!this._pushInt(r.length,u.MAP))return!1;let i;for(let t=0,a=r.length;t<a;t++){var s=r[t];if(this.canonical&&(i=n[s])){if(!this.push(i))return!1}else if(!this._pushString(s))return!1;if(!this.pushAny(e[s]))return!1}return!0}pushAny(e){switch(typeof e){case"number":return this._pushNumber(e);case"bigint":return this._pushJSBigint(e);case"string":return this._pushString(e);case"boolean":return this._pushBoolean(e);case"undefined":return this._pushUndefined(e);case"object":return this._pushObject(e);case"symbol":switch(e){case f.NULL:return this._pushNull(null);case f.UNDEFINED:return this._pushUndefined(void 0);default:throw new Error("Unknown symbol: "+e.toString())}default:throw new Error("Unknown type: "+typeof e+", "+(e?e.toString():""))}}_pushAny(e){return this.pushAny(e)}_encodeAll(e){var t=new a({highWaterMark:this.readableHighWaterMark});this.pipe(t);for(const t of e)this.pushAny(t);return this.end(),t.read()}static encode(...e){return(new B)._encodeAll(e)}static encodeCanonical(...e){return new B({canonical:!0})._encodeAll(e)}static encodeOne(e,t){return new B(t)._encodeAll([e])}static encodeAsync(e,r){return new Promise((n,i)=>{const s=[];var a=new B(r);a.on("data",e=>s.push(e)),a.on("error",i),a.on("finish",()=>n(t.concat(s))),a.pushAny(e),a.end()})}}e.exports=B}).call(this,r(9).Buffer)},,,function(e,t,r){"use strict";t.a={"1.2.840.113549.1.1.11":"sha256WithRSAEncryption"}},function(e,t,r){function n(e){var t=s[e];return void 0!==t||(t=s[e]={exports:{}},i[e](t,t.exports,n)),t.exports}var i,s,a;e.exports=(i={8599:e=>{"use strict";var{AbortController:t,AbortSignal:r}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=r,e.exports.default=t},9742:(e,t)=>{"use strict";t.byteLength=function(e){return 3*((e=o(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){for(var t,r=(s=o(e))[0],s=s[1],a=new i(3*(r+s)/4-s),l=0,u=0<s?r-4:r,c=0;c<u;c+=4)t=n[e.charCodeAt(c)]<<18|n[e.charCodeAt(c+1)]<<12|n[e.charCodeAt(c+2)]<<6|n[e.charCodeAt(c+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===s&&(t=n[e.charCodeAt(c)]<<2|n[e.charCodeAt(c+1)]>>4,a[l++]=255&t),1===s&&(t=n[e.charCodeAt(c)]<<10|n[e.charCodeAt(c+1)]<<4|n[e.charCodeAt(c+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],a=0,o=n-i;a<o;a+=16383)s.push(function(e,t,n){for(var i,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(i=i)>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return s.join("")}(e,a,o<a+16383?o:a+16383));return 1==i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2==i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=s[a],n[s.charCodeAt(a)]=a;function o(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return[e=-1===(e=e.indexOf("="))?t:e,e===t?0:4-e%4]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},8764:(e,t,r)=>{"use strict";const n=r(9742),i=r(645),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,a=(t.Buffer=l,t.SlowBuffer=function(e){return l.alloc(+(e=+e!=e?0:e))},t.INSPECT_MAX_BYTES=50,2147483647);function o(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');return e=new Uint8Array(e),Object.setPrototypeOf(e,l.prototype),e}function l(e,t,r){if("number"!=typeof e)return u(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}function u(e,t,r){if("string"==typeof e){var n=e,i=t;if(!l.isEncoding(i="string"==typeof i&&""!==i?i:"utf8"))throw new TypeError("Unknown encoding: "+i);var s=0|p(n,i);let r=o(s);return n=r.write(n,i),r=n!==s?r.slice(0,n):r}if(ArrayBuffer.isView(e))return V(i=e,Uint8Array)?d((s=new Uint8Array(i)).buffer,s.byteOffset,s.byteLength):f(i);if(null!=e){if(V(e,ArrayBuffer)||e&&V(e.buffer,ArrayBuffer))return d(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(V(e,SharedArrayBuffer)||e&&V(e.buffer,SharedArrayBuffer)))return d(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');if(null!=(n=e.valueOf&&e.valueOf())&&n!==e)return l.from(n,t,r);var a,u,c=l.isBuffer(a=e)?(0!==(u=o(c=0|m(a.length))).length&&a.copy(u,0,0,c),u):void 0!==a.length?"number"!=typeof a.length||M(a.length)?o(0):f(a):"Buffer"===a.type&&Array.isArray(a.data)?f(a.data):void 0;if(c)return c;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return c(e),o(e<0?0:0|m(e))}function f(e){var t=e.length<0?0:0|m(e.length),r=o(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function d(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');return e=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(e,l.prototype),e}function m(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function p(e,t){if(l.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||V(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(e).length;default:if(i)return n?-1:R(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let i=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":{var s=t,a=r,o=this.length;(!s||s<0)&&(s=0),(!a||a<0||o<a)&&(a=o);let e="";for(let t=s;t<a;++t)e+=H[this[t]];return e}case"utf8":case"utf-8":return w(this,t,r);case"ascii":{o=t;var l=r;let e="";l=Math.min(this.length,l);for(let t=o;t<l;++t)e+=String.fromCharCode(127&this[t]);return e}case"latin1":case"binary":{s=t;var u=r;let e="";u=Math.min(this.length,u);for(let t=s;t<u;++t)e+=String.fromCharCode(this[t]);return e}case"base64":return h=this,d=r,0===(f=t)&&d===h.length?n.fromByteArray(h):n.fromByteArray(h.slice(f,d));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":{f=t,d=r;var c=(h=this).slice(f,d);let e="";for(let t=0;t<c.length-1;t+=2)e+=String.fromCharCode(c[t]+256*c[t+1]);return e}default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}var h,f,d}function b(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=M(r=+r)?i?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:v(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(i?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):v(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function v(e,t,r,n,i){let s,a=1,o=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,o/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(s=r;s<o;s++)if(u(e,s)===u(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===l)return n*a}else-1!==n&&(s-=s-n),n=-1}else for(r+l>o&&(r=o-l),s=r;0<=s;s--){let r=!0;for(let n=0;n<l;n++)if(u(e,s+n)!==u(t,n)){r=!1;break}if(r)return s}return-1}function w(e,t,r){r=Math.min(e.length,r);var n=[];let i=t;for(;i<r;){const t=e[i];let s=null,a=239<t?4:223<t?3:191<t?2:1;if(i+a<=r){let r,n,o,l;switch(a){case 1:t<128&&(s=t);break;case 2:128==(192&(r=e[i+1]))&&127<(l=(31&t)<<6|63&r)&&(s=l);break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&2047<(l=(15&t)<<12|(63&r)<<6|63&n)&&(l<55296||57343<l)&&(s=l);break;case 4:r=e[i+1],n=e[i+2],o=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&o)&&65535<(l=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&o)&&l<1114112&&(s=l)}}null===s?(s=65533,a=1):65535<s&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}{var s=n,a=s.length;if(a<=S)return String.fromCharCode.apply(String,s);let e="",t=0;for(;t<a;)e+=String.fromCharCode.apply(String,s.slice(t,t+=S));return e}}t.kMaxLength=a,(l.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=u,Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(e,t,r){return t=t,r=r,c(e=e),e<=0||void 0===t?o(e):"string"==typeof r?o(e).fill(t,r):o(e).fill(t)},l.allocUnsafe=h,l.allocUnsafeSlow=h,l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(V(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),V(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(V(t,Uint8Array))i+t.length>n.length?(t=l.isBuffer(t)?t:l.from(t)).copy(n,i):Uint8Array.prototype.set.call(n,t,i);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},l.byteLength=p,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},l.prototype.toLocaleString=l.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):g.apply(this,arguments)},l.prototype.equals=function(e){if(l.isBuffer(e))return this===e||0===l.compare(this,e);throw new TypeError("Argument must be a Buffer")},l.prototype.inspect=function(){let e="";var r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(l.prototype[s]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,i){if(V(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(i<=n&&r<=t)return 0;if(i<=n)return-1;if(r<=t)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);var o=Math.min(s,a),u=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<o;++e)if(u[e]!==c[e]){s=u[e],a=c[e];break}return s<a?-1:a<s?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i,s,a,o,l,u=this.length-t;if((void 0===r||u<r)&&(r=u),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";let c=!1;for(;;)switch(n){case"hex":{var h=e,f=t,d=r;f=Number(f)||0;var m=this.length-f;let n;for((m=((!d||(d=Number(d))>m)&&(d=m),h.length))/2<d&&(d=m/2),n=0;n<d;++n){const e=parseInt(h.substr(2*n,2),16);if(M(e))return n;this[f+n]=e}return n}case"utf8":case"utf-8":return m=t,l=r,L(R(e,(o=this).length-m),o,m,l);case"ascii":case"latin1":case"binary":return o=this,l=t,a=r,L(function(e){var t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),o,l,a);case"base64":return a=this,i=t,s=r,L(U(e),a,i,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return i=t,s=r,L(function(e,t){var r,n,i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=(r=e.charCodeAt(s))>>8,i.push(r%256),i.push(n);return i}(e,this.length-i),this,i,s);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function A(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,r,n,i,s){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<t||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function k(e,t,r,n,i){return j(t,n,i,e,r,7),n=Number(t&BigInt(4294967295)),e[r++]=n,e[r++]=n>>=8,e[r++]=n>>=8,e[r++]=n>>=8,i=Number(t>>BigInt(32)&BigInt(4294967295)),e[r++]=i,e[r++]=i>>=8,e[r++]=i>>=8,e[r++]=i>>=8,r}function I(e,t,r,n,i){return j(t,n,i,e,r,7),n=Number(t&BigInt(4294967295)),e[r+7]=n,e[r+6]=n>>=8,e[r+5]=n>>=8,e[r+4]=n>>=8,i=Number(t>>BigInt(32)&BigInt(4294967295)),e[r+3]=i,e[r+2]=i>>=8,e[r+1]=i>>=8,e[r]=i>>=8,r+8}function _(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,s){return t=+t,r>>>=0,s||_(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,s){return t=+t,r>>>=0,s||_(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),r=this.subarray(e,t);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=this[e+--t],i=1;for(;0<t&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=F((function(e){T(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||P(e,this.length-8),t=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,e=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(t)+(BigInt(e)<<BigInt(32))})),l.prototype.readBigUInt64BE=F((function(e){T(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||P(e,this.length-8),t=t*2**24+65536*this[++e]+256*this[++e]+this[++e],e=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(t)<<BigInt(32))+BigInt(e)})),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||A(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;0<n&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},l.prototype.readInt8=function(e,t){return e>>>=0,t||A(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){return e>>>=0,t||A(e,2,this.length),32768&(t=this[e]|this[e+1]<<8)?4294901760|t:t},l.prototype.readInt16BE=function(e,t){return e>>>=0,t||A(e,2,this.length),32768&(t=this[e+1]|this[e]<<8)?4294901760|t:t},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||A(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=F((function(e){T(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||P(e,this.length-8),r=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),l.prototype.readBigInt64BE=F((function(e){T(e>>>=0,"offset");var t=this[e],r=this[e+7];void 0!==t&&void 0!==r||P(e,this.length-8),t=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(t)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||A(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||A(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||A(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||A(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||E(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||E(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,s=1;for(this[t+i]=255&e;0<=--i&&(s*=256);)this[t+i]=e/s&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=F((function(e,t=0){return k(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=F((function(e,t=0){return I(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}let i=0,s=1,a=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}let i=r-1,s=1,a=0;for(this[t+i]=255&e;0<=--i&&(s*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/s>>0)-a&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=F((function(e,t=0){return k(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=F((function(e,t=0){return I(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var i=(n=e.length-t<n-r?e.length-t+r:n)-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(!(r<=t)){let a;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(a=t;a<r;++a)this[a]=e;else{var i=l.isBuffer(e)?e:l.from(e,n),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<r-t;++a)this[a+t]=i[a%s]}}return this};const C={};function O(e,t,r){C[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=this.name+` [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return this.name+` [${e}]: `+this.message}}}function x(e){let t="",r=e.length;for(var n="-"===e[0]?1:0;r>=4+n;r-=3)t="_"+e.slice(r-3,r)+t;return""+e.slice(0,r)+t}function j(e,t,r,n,i,s){if(r<e||e<t){const n="bigint"==typeof t?"n":"";throw t=3<s?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** `+8*(s+1)+n:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** `+(8*(s+1)-1)+n:`>= ${t}${n} and <= `+r+n,new C.ERR_OUT_OF_RANGE("value",t,e)}r=n,t=s,T(e=i,"offset"),void 0!==r[e]&&void 0!==r[e+t]||P(e,r.length-(t+1))}function T(e,t){if("number"!=typeof e)throw new C.ERR_INVALID_ARG_TYPE(t,"number",e)}function P(e,t,r){if(Math.floor(e)!==e)throw T(e,r),new C.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new C.ERR_BUFFER_OUT_OF_BOUNDS;throw new C.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= `+t,e)}O("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?e+" is outside of buffer bounds":"Attempt to access memory outside buffer bounds"}),RangeError),O("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type `+typeof t}),TypeError),O("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=x(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=x(i)),i+="n"),n+` It must be ${t}. Received `+i}),RangeError);const D=/[^+/0-9A-Za-z-_]/g;function R(e,t){let r;t=t||1/0;var n=e.length;let i=null;var s=[];for(let a=0;a<n;++a){if(55295<(r=e.charCodeAt(a))&&r<57344){if(!i){if(56319<r){-1<(t-=3)&&s.push(239,191,189);continue}if(a+1===n){-1<(t-=3)&&s.push(239,191,189);continue}i=r;continue}if(r<56320){-1<(t-=3)&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&-1<(t-=3)&&s.push(239,191,189);if(i=null,r<128){if(--t<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function U(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function L(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function V(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function M(e){return e!=e}const H=function(){var e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){var r=16*n;for(let i=0;i<16;++i)t[r+i]=e[n]+e[i]}return t}();function F(e){return"undefined"==typeof BigInt?K:e}function K(){throw new Error("BigInt not supported")}},2141:(e,t,r)=>{"use strict";const n=r(2020),i=r(4694),s=r(6774),a=r(4666),o=r(9032),l=r(4785),u=r(3070),c=r(8112);e.exports={Commented:n,Diagnose:i,Decoder:s,Encoder:a,Simple:o,Tagged:l,Map:u,SharedValueEncoder:c,comment:n.comment,decodeAll:s.decodeAll,decodeFirst:s.decodeFirst,decodeAllSync:s.decodeAllSync,decodeFirstSync:s.decodeFirstSync,diagnose:i.diagnose,encode:a.encode,encodeCanonical:a.encodeCanonical,encodeOne:a.encodeOne,encodeAsync:a.encodeAsync,decode:s.decodeFirstSync,leveldb:{decode:s.decodeFirstSync,encode:a.encode,buffer:!0,name:"cbor"},reset(){a.reset(),l.reset()}}},2020:(e,t,r)=>{"use strict";const n=r(2830),i=r(9873),s=r(6774),a=r(4202),{MT:o,NUMBYTES:l,SYMS:u}=r(9066),c=r(8764).Buffer;function h(e){return 1<e?"s":""}class f extends n.Transform{constructor(e={}){const{depth:t=1,max_depth:r=10,no_summary:n=!1,tags:i={},preferWeb:o,encoding:l,...u}=e;super({...u,readableObjectMode:!1,writableObjectMode:!1}),this.depth=t,this.max_depth=r,this.all=new a,i[24]||(i[24]=this._tag_24.bind(this)),this.parser=new s({tags:i,max_depth:r,preferWeb:o,encoding:l}),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("start-string",this._on_start_string.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("error",this._on_error.bind(this)),n||this.parser.on("data",this._on_data.bind(this)),this.parser.bs.on("read",this._on_read.bind(this))}_tag_24(e){var t=new f({depth:this.depth+1,no_summary:!0});t.on("data",e=>this.push(e)),t.on("error",e=>this.emit("error",e)),t.end(e)}_transform(e,t,r){this.parser.write(e,t,r)}_flush(e){return this.parser._flush(e)}static comment(e,t={},r=null){if(null==e)throw new Error("input required");({options:t,cb:r}=function(e,t){switch(typeof e){case"function":return{options:{},cb:e};case"string":return{options:{encoding:e},cb:t};case"number":return{options:{max_depth:e},cb:t};case"object":return{options:e||{},cb:t};default:throw new TypeError("Unknown option type")}}(t,r));const n=new a,{encoding:s="hex",...o}=t,l=new f(o);let u=null;return"function"==typeof r?(l.on("end",()=>{r(null,n.toString("utf8"))}),l.on("error",r)):u=new Promise((e,t)=>{l.on("end",()=>{e(n.toString("utf8"))}),l.on("error",t)}),l.pipe(n),i.guessEncoding(e,s).pipe(l),u}_on_error(e){this.push("ERROR: "),this.push(e.toString()),this.push("\n")}_on_read(e){this.all.write(e),e=e.toString("hex"),this.push(new Array(this.depth+1).join("  ")),this.push(e);let t=2*(this.max_depth-this.depth)-e.length;t<1&&(t=1),this.push(new Array(t+1).join(" ")),this.push("-- ")}_on_more(e,t,r,n){let i="";switch(this.depth++,e){case o.POS_INT:i="Positive number,";break;case o.NEG_INT:i="Negative number,";break;case o.ARRAY:i="Array, length";break;case o.MAP:i="Map, count";break;case o.BYTE_STRING:i="Bytes, length";break;case o.UTF8_STRING:i="String, length";break;case o.SIMPLE_FLOAT:i=1===t?"Simple value,":"Float,"}this.push(`${i} next ${t} byte${h(t)}\n`)}_on_start_string(e,t,r,n){let i="";switch(this.depth++,e){case o.BYTE_STRING:i="Bytes, length: "+t;break;case o.UTF8_STRING:i="String, length: "+t.toString()}this.push(i+"\n")}_on_start(e,t,r,n){switch(this.depth++,r){case o.ARRAY:this.push(`[${n}], `);break;case o.MAP:n%2?this.push(`{Val:${Math.floor(n/2)}}, `):this.push(`{Key:${Math.floor(n/2)}}, `)}switch(e){case o.TAG:this.push("Tag #"+t),24===t&&this.push(" Encoded CBOR data item");break;case o.ARRAY:t===u.STREAM?this.push("Array (streaming)"):this.push(`Array, ${t} item`+h(t));break;case o.MAP:t===u.STREAM?this.push("Map (streaming)"):this.push(`Map, ${t} pair`+h(t));break;case o.BYTE_STRING:this.push("Bytes (streaming)");break;case o.UTF8_STRING:this.push("String (streaming)")}this.push("\n")}_on_stop(e){this.depth--}_on_value(e,t,r,n){if(e!==u.BREAK)switch(t){case o.ARRAY:this.push(`[${r}], `);break;case o.MAP:r%2?this.push(`{Val:${Math.floor(r/2)}}, `):this.push(`{Key:${Math.floor(r/2)}}, `)}switch(t=i.cborValueToString(e,-1/0),"string"==typeof e||c.isBuffer(e)?(0<e.length&&(this.push(t),this.push("\n")),this.depth--):(this.push(t),this.push("\n")),n){case l.ONE:case l.TWO:case l.FOUR:case l.EIGHT:this.depth--}}_on_data(){this.push("0x"),this.push(this.all.read().toString("hex")),this.push("\n")}}e.exports=f},9066:(e,t)=>{"use strict";t.MT={POS_INT:0,NEG_INT:1,BYTE_STRING:2,UTF8_STRING:3,ARRAY:4,MAP:5,TAG:6,SIMPLE_FLOAT:7},t.TAG={DATE_STRING:0,DATE_EPOCH:1,POS_BIGINT:2,NEG_BIGINT:3,DECIMAL_FRAC:4,BIGFLOAT:5,BASE64URL_EXPECTED:21,BASE64_EXPECTED:22,BASE16_EXPECTED:23,CBOR:24,URI:32,BASE64URL:33,BASE64:34,REGEXP:35,MIME:36,SET:258},t.NUMBYTES={ZERO:0,ONE:24,TWO:25,FOUR:26,EIGHT:27,INDEFINITE:31},t.SIMPLE={FALSE:20,TRUE:21,NULL:22,UNDEFINED:23},t.SYMS={NULL:Symbol.for("github.com/hildjj/node-cbor/null"),UNDEFINED:Symbol.for("github.com/hildjj/node-cbor/undef"),PARENT:Symbol.for("github.com/hildjj/node-cbor/parent"),BREAK:Symbol.for("github.com/hildjj/node-cbor/break"),STREAM:Symbol.for("github.com/hildjj/node-cbor/stream")},t.SHIFT32=4294967296,t.BI={MINUS_ONE:BigInt(-1),NEG_MAX:BigInt(-1)-BigInt(Number.MAX_SAFE_INTEGER),MAXINT32:BigInt("0xffffffff"),MAXINT64:BigInt("0xffffffffffffffff"),SHIFT32:BigInt(t.SHIFT32)}},6774:(e,t,r)=>{"use strict";const n=r(71),i=r(4785),s=r(9032),a=r(9873),o=r(4202),l=(r(2830),r(9066)),{MT:u,NUMBYTES:c,SYMS:h,BI:f}=l,d=r(8764).Buffer,m=Symbol("count"),p=Symbol("major type"),g=Symbol("error"),b=Symbol("not found");function y(e,t,r){var n=[];return n[m]=r,n[h.PARENT]=e,n[p]=t,n}class v extends Error{constructor(e,t){super("Unexpected data: 0x"+e.toString(16)),this.name="UnexpectedDataError",this.byte=e,this.value=t}}function w(e,t){switch(typeof e){case"function":return{options:{},cb:e};case"string":return{options:{encoding:e},cb:t};case"object":return{options:e||{},cb:t};default:throw new TypeError("Unknown option type")}}class S extends n{constructor(e={}){const{tags:t={},max_depth:r=-1,preferWeb:n=!1,required:i=!1,encoding:s="hex",extendedResults:a=!1,preventDuplicateKeys:l=!1,...u}=e;super({defaultEncoding:s,...u}),this.running=!0,this.max_depth=r,this.tags=t,this.preferWeb=n,this.extendedResults=a,this.required=i,this.preventDuplicateKeys=l,a&&(this.bs.on("read",this._onRead.bind(this)),this.valueBytes=new o)}static nullcheck(e){switch(e){case h.NULL:return null;case h.UNDEFINED:return;case b:throw new Error("Value not found");default:return e}}static decodeFirstSync(e,t={}){if(null==e)throw new TypeError("input required");t=w(t).options;const{encoding:r="hex",...n}=t,i=new S(n),s=a.guessEncoding(e,r),o=i._parse();let l=o.next();for(;!l.done;){const e=s.read(l.value);if(null==e||e.length!==l.value)throw new Error("Insufficient data");i.extendedResults&&i.valueBytes.write(e),l=o.next(e)}let u=null;if(i.extendedResults)(u=l.value).unused=s.read();else if(u=S.nullcheck(l.value),0<s.length){const e=s.read(1);throw s.unshift(e),new v(e[0],u)}return u}static decodeAllSync(e,t={}){if(null==e)throw new TypeError("input required");t=w(t).options;const{encoding:r="hex",...n}=t,i=new S(n),s=a.guessEncoding(e,r),o=[];for(;0<s.length;){const e=i._parse();let t=e.next();for(;!t.done;){const r=s.read(t.value);if(null==r||r.length!==t.value)throw new Error("Insufficient data");i.extendedResults&&i.valueBytes.write(r),t=e.next(r)}o.push(S.nullcheck(t.value))}return o}static decodeFirst(e,t={},r=null){if(null==e)throw new TypeError("input required");({options:t,cb:r}=w(t,r));const{encoding:n="hex",required:i=!1,...s}=t,o=new S(s);let l=b;return t=a.guessEncoding(e,n),e=new Promise((e,t)=>{o.on("data",e=>{l=S.nullcheck(e),o.close()}),o.once("error",r=>o.extendedResults&&r instanceof v?(l.unused=o.bs.slice(),e(l)):(l!==b&&(r.value=l),l=g,o.close(),t(r))),o.once("end",()=>{switch(l){case b:return i?t(new Error("No CBOR found")):e(l);case g:return;default:return e(l)}})}),"function"==typeof r&&e.then(e=>r(null,e),r),t.pipe(o),e}static decodeAll(e,t={},r=null){if(null==e)throw new TypeError("input required");({options:t,cb:r}=w(t,r));const{encoding:n="hex",...i}=t,s=new S(i),o=[];return s.on("data",e=>o.push(S.nullcheck(e))),t=new Promise((e,t)=>{s.on("error",t),s.on("end",()=>e(o))}),"function"==typeof r&&t.then(e=>r(void 0,e),e=>r(e,void 0)),a.guessEncoding(e,n).pipe(s),t}close(){this.running=!1,this.__fresh=!0}_onRead(e){this.valueBytes.write(e)}*_parse(){let e=null,t=0,r=null;for(;;){if(0<=this.max_depth&&t>this.max_depth)throw new Error(`Maximum depth ${this.max_depth} exceeded`);var[n]=yield 1;if(!this.running)throw this.bs.unshift(d.from([n])),new v(n);var l=n>>5,g=31&n,b=null==e?void 0:e[p],w=null==e?void 0:e.length;switch(g){case c.ONE:this.emit("more-bytes",l,1,b,w),[r]=yield 1;break;case c.TWO:case c.FOUR:case c.EIGHT:{const e=1<<g-24,t=(this.emit("more-bytes",l,e,b,w),yield e);r=l===u.SIMPLE_FLOAT?t:a.parseCBORint(g,t);break}case 28:case 29:case 30:throw this.running=!1,new Error("Additional info not implemented: "+g);case c.INDEFINITE:switch(l){case u.POS_INT:case u.NEG_INT:case u.TAG:throw new Error("Invalid indefinite encoding for MT "+l)}r=-1;break;default:r=g}switch(l){case u.POS_INT:break;case u.NEG_INT:r=r===Number.MAX_SAFE_INTEGER?f.NEG_MAX:"bigint"==typeof r?f.MINUS_ONE-r:-1-r;break;case u.BYTE_STRING:case u.UTF8_STRING:switch(r){case 0:this.emit("start-string",l,r,b,w),r=l===u.UTF8_STRING?"":this.preferWeb?new Uint8Array(0):d.allocUnsafe(0);break;case-1:this.emit("start",l,h.STREAM,b,w),E=e,k=l,I=void 0,(I=new o)[m]=-1,I[h.PARENT]=E,I[p]=k,e=I,t++;continue;default:this.emit("start-string",l,r,b,w),r=yield r,l===u.UTF8_STRING?r=a.utf8(r):this.preferWeb&&(r=new Uint8Array(r.buffer,r.byteOffset,r.length))}break;case u.ARRAY:case u.MAP:switch(r){case 0:r=l===u.MAP?{}:[];break;case-1:this.emit("start",l,h.STREAM,b,w),e=y(e,l,-1),t++;continue;default:this.emit("start",l,r,b,w),e=y(e,l,r*(l-3)),t++;continue}break;case u.TAG:this.emit("start",l,r,b,w),(e=y(e,l,1)).push(r),t++;continue;case u.SIMPLE_FLOAT:if("number"==typeof r){if(g===c.ONE&&r<32)throw new Error("Invalid two-byte encoding of simple value "+r);const t=null!=e;r=s.decode(r,t,t&&e[m]<0)}else r=a.parseCBORfloat(r)}this.emit("value",r,b,w,g);let _=!1;for(;null!=e;){if(r===h.BREAK)e[m]=1;else if(Array.isArray(e))e.push(r);else{const t=e[p];if(null!=t&&t!==l)throw this.running=!1,new Error("Invalid major type in indefinite encoding");e.write(r)}if(0!=--e[m]){_=!0;break}if(--t,delete e[m],Array.isArray(e))switch(e[p]){case u.ARRAY:r=e;break;case u.MAP:{let t=!0;if(e.length%2!=0)throw new Error("Invalid map length: "+e.length);for(let r=0,n=e.length;r<n;r+=2)if("string"!=typeof e[r]||"__proto__"===e[r]){t=!1;break}if(t){r={};for(let t=0,n=e.length;t<n;t+=2){if(this.preventDuplicateKeys&&Object.prototype.hasOwnProperty.call(r,e[t]))throw new Error("Duplicate keys in a map");r[e[t]]=e[t+1]}}else{r=new Map;for(let t=0,n=e.length;t<n;t+=2){if(this.preventDuplicateKeys&&r.has(e[t]))throw new Error("Duplicate keys in a map");r.set(e[t],e[t+1])}}break}case u.TAG:r=new i(e[0],e[1]).convert(this.tags)}else if(e instanceof o)switch(e[p]){case u.BYTE_STRING:r=e.slice(),this.preferWeb&&(r=new Uint8Array(r.buffer,r.byteOffset,r.length));break;case u.UTF8_STRING:r=e.toString("utf-8")}this.emit("stop",e[p]);var A=e;e=e[h.PARENT],delete A[h.PARENT],delete A[p]}if(!_){if(this.extendedResults){const e=this.valueBytes.slice(),t={value:S.nullcheck(r),bytes:e,length:e.length};return this.valueBytes=new o,t}return r}}var E,k,I}}S.NOT_FOUND=b,e.exports=S},4694:(e,t,r)=>{"use strict";const n=r(2830),i=r(6774),s=r(9873),a=r(4202),{MT:o,SYMS:l}=r(9066);class u extends n.Transform{constructor(e={}){const{separator:t="\n",stream_errors:r=!1,tags:n,max_depth:s,preferWeb:a,encoding:o,...l}=e;super({...l,readableObjectMode:!1,writableObjectMode:!1}),this.float_bytes=-1,this.separator=t,this.stream_errors=r,this.parser=new i({tags:n,max_depth:s,preferWeb:a,encoding:o}),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("data",this._on_data.bind(this)),this.parser.on("error",this._on_error.bind(this))}_transform(e,t,r){this.parser.write(e,t,r)}_flush(e){this.parser._flush(t=>this.stream_errors?(t&&this._on_error(t),e()):e(t))}static diagnose(e,t={},r=null){if(null==e)throw new TypeError("input required");({options:t,cb:r}=function(e,t){switch(typeof e){case"function":return{options:{},cb:e};case"string":return{options:{encoding:e},cb:t};case"object":return{options:e||{},cb:t};default:throw new TypeError("Unknown option type")}}(t,r));const{encoding:n="hex",...i}=t,o=new a,l=new u(i);let c=null;return"function"==typeof r?(l.on("end",()=>r(null,o.toString("utf8"))),l.on("error",r)):c=new Promise((e,t)=>{l.on("end",()=>e(o.toString("utf8"))),l.on("error",t)}),l.pipe(o),s.guessEncoding(e,n).pipe(l),c}_on_error(e){this.stream_errors?this.push(e.toString()):this.emit("error",e)}_on_more(e,t,r,n){e===o.SIMPLE_FLOAT&&(this.float_bytes={2:1,4:2,8:3}[t])}_fore(e,t){switch(e){case o.BYTE_STRING:case o.UTF8_STRING:case o.ARRAY:0<t&&this.push(", ");break;case o.MAP:0<t&&(t%2?this.push(": "):this.push(", "))}}_on_value(e,t,r){e!==l.BREAK&&(this._fore(t,r),t=this.float_bytes,this.float_bytes=-1,this.push(s.cborValueToString(e,t)))}_on_start(e,t,r,n){switch(this._fore(r,n),e){case o.TAG:this.push(t+"(");break;case o.ARRAY:this.push("[");break;case o.MAP:this.push("{");break;case o.BYTE_STRING:case o.UTF8_STRING:this.push("(")}t===l.STREAM&&this.push("_ ")}_on_stop(e){switch(e){case o.TAG:this.push(")");break;case o.ARRAY:this.push("]");break;case o.MAP:this.push("}");break;case o.BYTE_STRING:case o.UTF8_STRING:this.push(")")}}_on_data(){this.push(this.separator)}}e.exports=u},4666:(e,t,r)=>{"use strict";const n=r(2830),i=r(4202),s=r(9873),a=r(9066),{MT:o,NUMBYTES:l,SHIFT32:u,SIMPLE:c,SYMS:h,TAG:f,BI:d}=a,m=r(8764).Buffer,p=o.SIMPLE_FLOAT<<5|l.TWO,g=o.SIMPLE_FLOAT<<5|l.FOUR,b=o.SIMPLE_FLOAT<<5|l.EIGHT,y=o.SIMPLE_FLOAT<<5|c.TRUE,v=o.SIMPLE_FLOAT<<5|c.FALSE,w=o.SIMPLE_FLOAT<<5|c.UNDEFINED,S=o.SIMPLE_FLOAT<<5|c.NULL,A=m.from([255]),E=m.from("f97e00","hex"),k=m.from("f9fc00","hex"),I=m.from("f97c00","hex"),_=m.from("f98000","hex"),B={};let N={};class C extends n.Transform{constructor(e={}){const{canonical:t=!1,encodeUndefined:r,disallowUndefinedKeys:n=!1,dateType:i="number",collapseBigIntegers:s=!1,detectLoops:a=!1,omitUndefinedProperties:o=!1,genTypes:l=[],...u}=e;if(super({...u,readableObjectMode:!1,writableObjectMode:!0}),this.canonical=t,this.encodeUndefined=r,this.disallowUndefinedKeys=n,this.dateType=function(e){if(!e)return"number";switch(e.toLowerCase()){case"number":return"number";case"float":return"float";case"int":case"integer":return"int";case"string":return"string"}throw new TypeError(`dateType invalid, got "${e}"`)}(i),this.collapseBigIntegers=!!this.canonical||s,this.detectLoops=void 0,"boolean"==typeof a)a&&(this.detectLoops=new WeakSet);else{if(!(a instanceof WeakSet))throw new TypeError("detectLoops must be boolean or WeakSet");this.detectLoops=a}if(this.omitUndefinedProperties=o,this.semanticTypes={...C.SEMANTIC_TYPES},Array.isArray(l))for(let e=0,t=l.length;e<t;e+=2)this.addSemanticType(l[e],l[e+1]);else for(const[e,t]of Object.entries(l))this.addSemanticType(e,t)}_transform(e,t,r){r(!1===this.pushAny(e)?new Error("Push Error"):void 0)}_flush(e){e()}_pushUInt8(e){var t=m.allocUnsafe(1);return t.writeUInt8(e,0),this.push(t)}_pushUInt16BE(e){var t=m.allocUnsafe(2);return t.writeUInt16BE(e,0),this.push(t)}_pushUInt32BE(e){var t=m.allocUnsafe(4);return t.writeUInt32BE(e,0),this.push(t)}_pushFloatBE(e){var t=m.allocUnsafe(4);return t.writeFloatBE(e,0),this.push(t)}_pushDoubleBE(e){var t=m.allocUnsafe(8);return t.writeDoubleBE(e,0),this.push(t)}_pushNaN(){return this.push(E)}_pushInfinity(e){return e=e<0?k:I,this.push(e)}_pushFloat(e){if(this.canonical){var t=m.allocUnsafe(2);if(s.writeHalf(t,e))return this._pushUInt8(p)&&this.push(t)}return Math.fround(e)===e?this._pushUInt8(g)&&this._pushFloatBE(e):this._pushUInt8(b)&&this._pushDoubleBE(e)}_pushInt(e,t,r){var n=t<<5;if(e<24)return this._pushUInt8(n|e);if(e<=255)return this._pushUInt8(n|l.ONE)&&this._pushUInt8(e);if(e<=65535)return this._pushUInt8(n|l.TWO)&&this._pushUInt16BE(e);if(e<=4294967295)return this._pushUInt8(n|l.FOUR)&&this._pushUInt32BE(e);let i=Number.MAX_SAFE_INTEGER;return t===o.NEG_INT&&i--,e<=i?this._pushUInt8(n|l.EIGHT)&&this._pushUInt32BE(Math.floor(e/u))&&this._pushUInt32BE(e%u):t===o.NEG_INT?this._pushFloat(r):this._pushFloat(e)}_pushIntNum(e){return Object.is(e,-0)?this.push(_):e<0?this._pushInt(-e-1,o.NEG_INT,e):this._pushInt(e,o.POS_INT)}_pushNumber(e){return isNaN(e)?this._pushNaN():isFinite(e)?Math.round(e)===e?this._pushIntNum(e):this._pushFloat(e):this._pushInfinity(e)}_pushString(e){var t=m.byteLength(e,"utf8");return this._pushInt(t,o.UTF8_STRING)&&this.push(e,"utf8")}_pushBoolean(e){return this._pushUInt8(e?y:v)}_pushUndefined(e){switch(typeof this.encodeUndefined){case"undefined":return this._pushUInt8(w);case"function":return this.pushAny(this.encodeUndefined(e));case"object":{const e=s.bufferishToBuffer(this.encodeUndefined);if(e)return this.push(e)}}return this.pushAny(this.encodeUndefined)}_pushNull(e){return this._pushUInt8(S)}_pushTag(e){return this._pushInt(e,o.TAG)}_pushJSBigint(e){let t=o.POS_INT,r=f.POS_BIGINT;if(e<0&&(e=-e+d.MINUS_ONE,t=o.NEG_INT,r=f.NEG_BIGINT),this.collapseBigIntegers&&e<=d.MAXINT64)return e<=4294967295?this._pushInt(Number(e),t):this._pushUInt8(t<<5|l.EIGHT)&&this._pushUInt32BE(Number(e/d.SHIFT32))&&this._pushUInt32BE(Number(e%d.SHIFT32));let n=e.toString(16);return n.length%2&&(n="0"+n),e=m.from(n,"hex"),this._pushTag(r)&&C._pushBuffer(this,e)}_pushObject(e,t){if(!e)return this._pushNull(e);if(!(t={indefinite:!1,skipTypes:!1,...t}).indefinite&&this.detectLoops){if(this.detectLoops.has(e))throw new Error("Loop detected while CBOR encoding.\nCall removeLoopDetectors before resuming.");this.detectLoops.add(e)}if(!t.skipTypes){const t=e.encodeCBOR;if("function"==typeof t)return t.call(e,this);const r=this.semanticTypes[e.constructor.name];if(r)return r.call(e,this,e)}const r=Object.keys(e).filter(t=>"function"!=(t=typeof e[t])&&(!this.omitUndefinedProperties||"undefined"!=t)),n={};if(this.canonical&&r.sort((e,t)=>(e=n[e]||(n[e]=C.encode(e)),t=n[t]||(n[t]=C.encode(t)),e.compare(t))),t.indefinite){if(!this._pushUInt8(o.MAP<<5|l.INDEFINITE))return!1}else if(!this._pushInt(r.length,o.MAP))return!1;let i=null;for(let t=0,a=r.length;t<a;t++){var s=r[t];if(this.canonical&&(i=n[s])){if(!this.push(i))return!1}else if(!this._pushString(s))return!1;if(!this.pushAny(e[s]))return!1}if(t.indefinite){if(!this.push(A))return!1}else this.detectLoops&&this.detectLoops.delete(e);return!0}_encodeAll(e){const t=new i({highWaterMark:this.readableHighWaterMark});this.pipe(t);for(const t of e)this.pushAny(t);return this.end(),t.read()}addSemanticType(e,t){e="string"==typeof e?e:e.name;var r=this.semanticTypes[e];if(t){if("function"!=typeof t)throw new TypeError("fun must be of type function");this.semanticTypes[e]=t}else r&&delete this.semanticTypes[e];return r}pushAny(e){switch(typeof e){case"number":return this._pushNumber(e);case"bigint":return this._pushJSBigint(e);case"string":return this._pushString(e);case"boolean":return this._pushBoolean(e);case"undefined":return this._pushUndefined(e);case"object":return this._pushObject(e);case"symbol":switch(e){case h.NULL:return this._pushNull(null);case h.UNDEFINED:return this._pushUndefined(void 0);default:throw new TypeError("Unknown symbol: "+e.toString())}default:throw new TypeError(`Unknown type: ${typeof e}, `+("function"==typeof e.toString?e.toString():""))}}static pushArray(e,t,r){r={indefinite:!1,...r};var n=t.length;if(r.indefinite){if(!e._pushUInt8(o.ARRAY<<5|l.INDEFINITE))return!1}else if(!e._pushInt(n,o.ARRAY))return!1;for(let r=0;r<n;r++)if(!e.pushAny(t[r]))return!1;return!(r.indefinite&&!e.push(A))}removeLoopDetectors(){return!!this.detectLoops&&(this.detectLoops=new WeakSet,!0)}static _pushDate(e,t){switch(e.dateType){case"string":return e._pushTag(f.DATE_STRING)&&e._pushString(t.toISOString());case"int":return e._pushTag(f.DATE_EPOCH)&&e._pushIntNum(Math.round(t.getTime()/1e3));case"float":return e._pushTag(f.DATE_EPOCH)&&e._pushFloat(t.getTime()/1e3);default:return e._pushTag(f.DATE_EPOCH)&&e.pushAny(t.getTime()/1e3)}}static _pushBuffer(e,t){return e._pushInt(t.length,o.BYTE_STRING)&&e.push(t)}static _pushNoFilter(e,t){return C._pushBuffer(e,t.slice())}static _pushRegexp(e,t){return e._pushTag(f.REGEXP)&&e.pushAny(t.source)}static _pushSet(e,t){if(!e._pushTag(f.SET))return!1;if(!e._pushInt(t.size,o.ARRAY))return!1;for(const r of t)if(!e.pushAny(r))return!1;return!0}static _pushURL(e,t){return e._pushTag(f.URI)&&e.pushAny(t.toString())}static _pushBoxed(e,t){return e.pushAny(t.valueOf())}static _pushMap(e,t,r){r={indefinite:!1,...r};let n=[...t.entries()];if(e.omitUndefinedProperties&&(n=n.filter(([,e])=>void 0!==e)),r.indefinite){if(!e._pushUInt8(o.MAP<<5|l.INDEFINITE))return!1}else if(!e._pushInt(n.length,o.MAP))return!1;if(e.canonical){const t=new C({genTypes:e.semanticTypes,canonical:e.canonical,detectLoops:Boolean(e.detectLoops),dateType:e.dateType,disallowUndefinedKeys:e.disallowUndefinedKeys,collapseBigIntegers:e.collapseBigIntegers}),r=new i({highWaterMark:e.readableHighWaterMark});t.pipe(r),n.sort(([e],[n])=>(t.pushAny(e),e=r.read(),t.pushAny(n),n=r.read(),e.compare(n)));for(const[t,r]of n){if(e.disallowUndefinedKeys&&void 0===t)throw new Error("Invalid Map key: undefined");if(!e.pushAny(t)||!e.pushAny(r))return!1}}else for(const[t,r]of n){if(e.disallowUndefinedKeys&&void 0===t)throw new Error("Invalid Map key: undefined");if(!e.pushAny(t)||!e.pushAny(r))return!1}return!(r.indefinite&&!e.push(A))}static _pushTypedArray(e,t){let r=64,n=t.BYTES_PER_ELEMENT;var i=t.constructor.name;return i.startsWith("Float")?(r|=16,n/=2):i.includes("U")||(r|=8),(i.includes("Clamped")||1!==n&&!s.isBigEndian())&&(r|=4),r|={1:0,2:1,4:2,8:3}[n],!!e._pushTag(r)&&C._pushBuffer(e,m.from(t.buffer,t.byteOffset,t.byteLength))}static _pushArrayBuffer(e,t){return C._pushBuffer(e,m.from(t))}static encodeIndefinite(e,t,r={}){if(null==t){if(null==this)throw new Error("No object to encode");t=this}var{chunkSize:n=4096}=r;let i=!0;var a=null;if("string"==(r=typeof t)){i=i&&e._pushUInt8(o.UTF8_STRING<<5|l.INDEFINITE);let r=0;for(;r<t.length;){const s=r+n;i=i&&e._pushString(t.slice(r,s)),r=s}i=i&&e.push(A)}else if(a=s.bufferishToBuffer(t)){i=i&&e._pushUInt8(o.BYTE_STRING<<5|l.INDEFINITE);let t=0;for(;t<a.length;){const r=t+n;i=i&&C._pushBuffer(e,a.slice(t,r)),t=r}i=i&&e.push(A)}else if(Array.isArray(t))i=i&&C.pushArray(e,t,{indefinite:!0});else if(t instanceof Map)i=i&&C._pushMap(e,t,{indefinite:!0});else{if("object"!=r)throw new Error("Invalid indefinite encoding");i=i&&e._pushObject(t,{indefinite:!0,skipTypes:!0})}return i}static encode(...e){return(new C)._encodeAll(e)}static encodeCanonical(...e){return new C({canonical:!0})._encodeAll(e)}static encodeOne(e,t){return new C(t)._encodeAll([e])}static encodeAsync(e,t){return new Promise((r,n)=>{const i=[],s=new C(t);s.on("data",e=>i.push(e)),s.on("error",n),s.on("finish",()=>r(m.concat(i))),s.pushAny(e),s.end()})}static get SEMANTIC_TYPES(){return N}static set SEMANTIC_TYPES(e){N=e}static reset(){C.SEMANTIC_TYPES={...B}}}Object.assign(B,{Array:C.pushArray,Date:C._pushDate,Buffer:C._pushBuffer,[m.name]:C._pushBuffer,Map:C._pushMap,NoFilter:C._pushNoFilter,[i.name]:C._pushNoFilter,RegExp:C._pushRegexp,Set:C._pushSet,ArrayBuffer:C._pushArrayBuffer,Uint8ClampedArray:C._pushTypedArray,Uint8Array:C._pushTypedArray,Uint16Array:C._pushTypedArray,Uint32Array:C._pushTypedArray,Int8Array:C._pushTypedArray,Int16Array:C._pushTypedArray,Int32Array:C._pushTypedArray,Float32Array:C._pushTypedArray,Float64Array:C._pushTypedArray,URL:C._pushURL,Boolean:C._pushBoxed,Number:C._pushBoxed,String:C._pushBoxed}),"undefined"!=typeof BigUint64Array&&(B[BigUint64Array.name]=C._pushTypedArray),"undefined"!=typeof BigInt64Array&&(B[BigInt64Array.name]=C._pushTypedArray),C.reset(),e.exports=C},3070:(e,t,r)=>{"use strict";const n=r(8764).Buffer,i=r(4666),s=r(6774),a=r(9066).MT;class o extends Map{constructor(e){super(e)}static _encode(e){return i.encodeCanonical(e).toString("base64")}static _decode(e){return s.decodeFirstSync(e,"base64")}get(e){return super.get(o._encode(e))}set(e,t){return super.set(o._encode(e),t)}delete(e){return super.delete(o._encode(e))}has(e){return super.has(o._encode(e))}*keys(){for(const e of super.keys())yield o._decode(e)}*entries(){for(const e of super.entries())yield[o._decode(e[0]),e[1]]}[Symbol.iterator](){return this.entries()}forEach(e,t){if("function"!=typeof e)throw new TypeError("Must be function");for(const t of super.entries())e.call(this,t[1],o._decode(t[0]),this)}encodeCBOR(e){if(!e._pushInt(this.size,a.MAP))return!1;if(e.canonical){var t=Array.from(super.entries()).map(e=>[n.from(e[0],"base64"),e[1]]);t.sort((e,t)=>e[0].compare(t[0]));for(const r of t)if(!e.push(r[0])||!e.pushAny(r[1]))return!1}else for(const t of super.entries())if(!e.push(n.from(t[0],"base64"))||!e.pushAny(t[1]))return!1;return!0}}e.exports=o},1226:e=>{"use strict";class t{constructor(){this.clear()}clear(){this.map=new WeakMap,this.count=0,this.recording=!0}stop(){this.recording=!1}check(e){var r=this.map.get(e);if(r)return 1<r.length?r[0]||this.recording?r[1]:(r[0]=!0,t.FIRST):this.recording?(r.push(this.count++),r[1]):t.NEVER;if(this.recording)return this.map.set(e,[!1]),t.NEVER;throw new Error("New object detected when not recording")}}t.NEVER=-1,t.FIRST=-2,e.exports=t},8112:(e,t,r)=>{"use strict";const n=r(4666),i=r(1226),s=r(8764).Buffer;class a extends n{constructor(e){super(e),this.valueSharing=new i}_pushObject(e,t){if(null!==e){const t=this.valueSharing.check(e);switch(t){case i.FIRST:this._pushTag(28);break;case i.NEVER:break;default:return this._pushTag(29)&&this._pushIntNum(t)}}return super._pushObject(e,t)}stopRecording(){this.valueSharing.stop()}clearRecording(){this.valueSharing.clear()}static encode(...e){var t=new a;t.on("data",()=>{});for(const r of e)t.pushAny(r);return t.stopRecording(),t.removeAllListeners("data"),t._encodeAll(e)}static encodeCanonical(){throw new Error("Cannot encode canonically in a SharedValueEncoder, which serializes objects multiple times.")}static encodeOne(e,t){return(t=new a(t)).on("data",()=>{}),t.pushAny(e),t.stopRecording(),t.removeAllListeners("data"),t._encodeAll([e])}static encodeAsync(e,t){return new Promise((r,n)=>{const i=[],o=new a(t);o.on("data",()=>{}),o.on("error",n),o.on("finish",()=>r(s.concat(i))),o.pushAny(e),o.stopRecording(),o.removeAllListeners("data"),o.on("data",e=>i.push(e)),o.pushAny(e),o.end()})}}e.exports=a},9032:(e,t,r)=>{"use strict";const{MT:n,SIMPLE:i,SYMS:s}=r(9066);class a{constructor(e){if("number"!=typeof e)throw new Error("Invalid Simple type: "+typeof e);if(e<0||255<e||(0|e)!==e)throw new Error("value must be a small positive integer: "+e);this.value=e}toString(){return`simple(${this.value})`}[Symbol.for("nodejs.util.inspect.custom")](e,t){return`simple(${this.value})`}encodeCBOR(e){return e._pushInt(this.value,n.SIMPLE_FLOAT)}static isSimple(e){return e instanceof a}static decode(e,t=!0,r=!1){switch(e){case i.FALSE:return!1;case i.TRUE:return!0;case i.NULL:return t?null:s.NULL;case i.UNDEFINED:return t?void 0:s.UNDEFINED;case-1:if(t&&r)return s.BREAK;throw new Error("Invalid BREAK");default:return new a(e)}}}e.exports=a},4785:(e,t,r)=>{"use strict";const n=r(9066),i=r(9873),s=Symbol("INTERNAL_JSON");function a(e,t){if(i.isBufferish(e))e.toJSON=t;else if(Array.isArray(e))for(const r of e)a(r,t);else if(e&&"object"==typeof e&&(!(e instanceof m)||e.tag<21||23<e.tag))for(const r of Object.values(e))a(r,t)}function o(){return i.base64(this)}function l(){return i.base64url(this)}function u(){return this.toString("hex")}const c={0:e=>new Date(e),1:e=>new Date(1e3*e),2:e=>i.bufferToBigInt(e),3:e=>n.BI.MINUS_ONE-i.bufferToBigInt(e),21:(e,t)=>(i.isBufferish(e)?t[s]=l:a(e,l),t),22:(e,t)=>(i.isBufferish(e)?t[s]=o:a(e,o),t),23:(e,t)=>(i.isBufferish(e)?t[s]=u:a(e,u),t),32:e=>new URL(e),33:(e,t)=>{if(!e.match(/^[a-zA-Z0-9_-]+$/))throw new Error("Invalid base64url characters");var r=e.length%4;if(1==r)throw new Error("Invalid base64url length");if(2==r){if(-1==="AQgw".indexOf(e[e.length-1]))throw new Error("Invalid base64 padding")}else if(3==r&&-1==="AEIMQUYcgkosw048".indexOf(e[e.length-1]))throw new Error("Invalid base64 padding");return t},34:(e,t)=>{var r=e.match(/^[a-zA-Z0-9+/]+(?<padding>={0,2})$/);if(!r)throw new Error("Invalid base64 characters");if(e.length%4!=0)throw new Error("Invalid base64 length");if("="===r.groups.padding){if(-1==="AQgw".indexOf(e[e.length-2]))throw new Error("Invalid base64 padding")}else if("=="===r.groups.padding&&-1==="AEIMQUYcgkosw048".indexOf(e[e.length-3]))throw new Error("Invalid base64 padding");return t},35:e=>new RegExp(e),258:e=>new Set(e)},h={64:Uint8Array,65:Uint16Array,66:Uint32Array,68:Uint8ClampedArray,69:Uint16Array,70:Uint32Array,72:Int8Array,73:Int16Array,74:Int32Array,77:Int16Array,78:Int32Array,81:Float32Array,82:Float64Array,85:Float32Array,86:Float64Array};function f(e,t){if(!i.isBufferish(e))throw new TypeError("val not a buffer");t=t.tag;var r=h[t];if(r){var n=2**(((16&t)>>4)+(3&t));if(!(4&t)!==i.isBigEndian()&&1<n){var s=e.buffer,a=n;n=e.byteOffset;var o=e.byteLength,l=new DataView(s),[u,c]={2:[l.getUint16,l.setUint16],4:[l.getUint32,l.setUint32],8:[l.getBigUint64,l.setBigUint64]}[a],f=n+o;for(let e=n;e<f;e+=a)c.call(l,e,u.call(l,e,!0))}return new r(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}throw new Error("Invalid typed array tag: "+t)}"undefined"!=typeof BigUint64Array&&(h[67]=BigUint64Array,h[71]=BigUint64Array),"undefined"!=typeof BigInt64Array&&(h[75]=BigInt64Array,h[79]=BigInt64Array);for(const e of Object.keys(h))c[e]=f;let d={};class m{constructor(e,t,r){if(this.tag=e,this.value=t,this.err=r,"number"!=typeof this.tag)throw new Error(`Invalid tag type (${typeof this.tag})`);if(this.tag<0||(0|this.tag)!==this.tag)throw new Error("Tag must be a positive integer: "+this.tag)}toJSON(){var e;return this[s]?this[s].call(this.value):(e={tag:this.tag,value:this.value},this.err&&(e.err=this.err),e)}toString(){return`${this.tag}(${JSON.stringify(this.value)})`}encodeCBOR(e){return e._pushTag(this.tag),e.pushAny(this.value)}convert(e){let t=null==e?void 0:e[this.tag];if(null===t)return this;if("function"!=typeof t&&"function"!=typeof(t=m.TAGS[this.tag]))return this;try{return t.call(this,this.value,this)}catch(e){return e&&e.message&&0<e.message.length?this.err=e.message:this.err=e,this}}static get TAGS(){return d}static set TAGS(e){d=e}static reset(){m.TAGS={...c}}}m.INTERNAL_JSON=s,m.reset(),e.exports=m},9873:(e,t,r)=>{"use strict";const n=r(8764).Buffer,i=r(4202),s=r(2830),a=r(9066),{NUMBYTES:o,SHIFT32:l,BI:u,SYMS:c}=a,h=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0}),f=(t.utf8=e=>h.decode(e),t.utf8.checksUTF8=!0,t.isBufferish=function(e){return e&&"object"==typeof e&&(n.isBuffer(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof ArrayBuffer||e instanceof DataView)},t.bufferishToBuffer=function(e){return n.isBuffer(e)?e:ArrayBuffer.isView(e)?n.from(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?n.from(e):null},t.parseCBORint=function(e,t){switch(e){case o.ONE:return t.readUInt8(0);case o.TWO:return t.readUInt16BE(0);case o.FOUR:return t.readUInt32BE(0);case o.EIGHT:{const e=t.readUInt32BE(0),r=t.readUInt32BE(4);return 2097151<e?BigInt(e)*u.SHIFT32+BigInt(r):e*l+r}default:throw new Error("Invalid additional info for int: "+e)}},t.writeHalf=function(e,t){var r=n.allocUnsafe(4);if(0!=(8191&(t=(r.writeFloatBE(t,0),r.readUInt32BE(0)))))return!1;let i=t>>16&32768;if(r=t>>23&255,t&=8388607,113<=r&&r<=142)i+=(r-112<<10)+(t>>13);else{if(!(103<=r&&r<113))return!1;if(t&(1<<126-r)-1)return!1;i+=8388608+t>>126-r}return e.writeUInt16BE(i),!0},t.parseHalf=function(e){var t=128&e[0]?-1:1,r=(124&e[0])>>2;e=(3&e[0])<<8|e[1];return r?31==r?t*(e?NaN:1/0):t*2**(r-25)*(1024+e):5.960464477539063e-8*t*e},t.parseCBORfloat=function(e){switch(e.length){case 2:return t.parseHalf(e);case 4:return e.readFloatBE(0);case 8:return e.readDoubleBE(0);default:throw new Error("Invalid float size: "+e.length)}},t.hex=function(e){return n.from(e.replace(/^0x/,""),"hex")},t.bin=function(e){let t=0,r=(e=e.replace(/\s/g,"")).length%8||8;for(var i=[];r<=e.length;)i.push(parseInt(e.slice(t,r),2)),t=r,r+=8;return n.from(i)},t.arrayEqual=function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.length===t.length&&e.every((e,r)=>e===t[r])},t.bufferToBigInt=function(e){return BigInt("0x"+e.toString("hex"))},t.cborValueToString=function(e,r=-1){switch(typeof e){case"symbol":{switch(e){case c.NULL:return"null";case c.UNDEFINED:return"undefined";case c.BREAK:return"BREAK"}if(e.description)return e.description;const t=e.toString().match(/^Symbol\((?<name>.*)\)/);return t&&t.groups.name?t.groups.name:"Symbol"}case"string":return JSON.stringify(e);case"bigint":return e.toString();case"number":{const t=Object.is(e,-0)?"-0":String(e);return 0<r?t+"_"+r:t}case"object":var n=t.bufferishToBuffer(e);if(n){const e=n.toString("hex");return r===-1/0?e:`h'${e}'`}return"function"==typeof e[Symbol.for("nodejs.util.inspect.custom")]?e[Symbol.for("nodejs.util.inspect.custom")]():Array.isArray(e)?"[]":"{}"}return String(e)},t.guessEncoding=function(e,r){if("string"==typeof e)return new i(e,null==r?"hex":r);var n;if(r=t.bufferishToBuffer(e))return new i(r);if((n=e)instanceof s.Readable||["read","on","pipe"].every(e=>"function"==typeof n[e]))return e;throw new Error("Unknown input type")},{"=":"","+":"-","/":"_"});t.base64url=function(e){return t.bufferishToBuffer(e).toString("base64").replace(/[=+/]/g,e=>f[e])},t.base64=function(e){return t.bufferishToBuffer(e).toString("base64")},t.isBigEndian=function(){var e=new Uint8Array(4);return!((new Uint32Array(e.buffer)[0]=1)&e[0])}},4202:(e,t,r)=>{"use strict";const n=r(2830),i=r(8764).Buffer,s=new TextDecoder("utf8",{fatal:!0,ignoreBOM:!0});class a extends n.Transform{constructor(e,t,r={}){let n=null,s=null;switch(typeof e){case"object":i.isBuffer(e)?n=e:e&&(r=e);break;case"string":n=e;break;case"undefined":break;default:throw new TypeError("Invalid input")}switch(typeof t){case"object":t&&(r=t);break;case"string":s=t;break;case"undefined":break;default:throw new TypeError("Invalid inputEncoding")}if(!r||"object"!=typeof r)throw new TypeError("Invalid options");null==n&&(n=r.input),null==s&&(s=r.inputEncoding),delete r.input,delete r.inputEncoding;var a=null==r.watchPipe||r.watchPipe,o=(delete r.watchPipe,Boolean(r.readError));delete r.readError,super(r),this.readError=o,a&&this.on("pipe",e=>{if(e=e._readableState.objectMode,0<this.length&&e!==this._readableState.objectMode)throw new Error("Do not switch objectMode in the middle of the stream");this._readableState.objectMode=e,this._writableState.objectMode=e}),null!=n&&this.end(n,s)}static isNoFilter(e){return e instanceof this}static compare(e,t){if(e instanceof this)return e===t?0:e.compare(t);throw new TypeError("Arguments must be NoFilters")}static concat(e,t){if(!Array.isArray(e))throw new TypeError("list argument must be an Array of NoFilters");if(0===e.length||0===t)return i.alloc(0);null==t&&(t=e.reduce((e,t)=>{if(t instanceof a)return e+t.length;throw new TypeError("list argument must be an Array of NoFilters")},0));let r=!0,n=!0;if(e=e.map(e=>{if(e instanceof a)return e=e.slice(),i.isBuffer(e)?n=!1:r=!1,e;throw new TypeError("list argument must be an Array of NoFilters")}),r)return i.concat(e,t);if(n)return[].concat(...e).slice(0,t);throw new Error("Concatenating mixed object and byte streams not supported")}_transform(e,t,r){this._readableState.objectMode||i.isBuffer(e)||(e=i.from(e,t)),this.push(e),r()}_bufArray(){let e=this._readableState.buffer;if(!Array.isArray(e)){let t=e.head;for(e=[];null!=t;)e.push(t.data),t=t.next}return e}read(e){var t=super.read(e);if(null!=t){if(this.emit("read",t),this.readError&&t.length<e)throw new Error(`Read ${t.length}, wanted `+e)}else if(this.readError)throw new Error("No data available, wanted "+e);return t}readFull(e){let t=null,r=null,n=null;return new Promise((i,s)=>{this.length>=e?i(this.read(e)):this.writableFinished?s(new Error(`Stream finished before ${e} bytes were available`)):(t=t=>{this.length>=e&&i(this.read(e))},r=()=>{s(new Error(`Stream finished before ${e} bytes were available`))},n=s,this.on("readable",t),this.on("error",n),this.on("finish",r))}).finally(()=>{t&&(this.removeListener("readable",t),this.removeListener("error",n),this.removeListener("finish",r))})}promise(e){let t=!1;return new Promise((r,n)=>{this.on("finish",()=>{var n=this.read();null==e||t||(t=!0,e(null,n)),r(n)}),this.on("error",r=>{null==e||t||(t=!0,e(r)),n(r)})})}compare(e){if(!(e instanceof a))throw new TypeError("Arguments must be NoFilters");if(this===e)return 0;var t=this.slice();e=e.slice();if(i.isBuffer(t)&&i.isBuffer(e))return t.compare(e);throw new Error("Cannot compare streams in object mode")}equals(e){return 0===this.compare(e)}slice(e,t){if(this._readableState.objectMode)return this._bufArray().slice(e,t);var r=this._bufArray();switch(r.length){case 0:return i.alloc(0);case 1:return r[0].slice(e,t);default:return i.concat(r).slice(e,t)}}get(e){return this.slice()[e]}toJSON(){var e=this.slice();return i.isBuffer(e)?e.toJSON():e}toString(e,t,r){return t=this.slice(t,r),i.isBuffer(t)?e&&"utf8"!==e?t.toString(e):s.decode(t):JSON.stringify(t)}[Symbol.for("nodejs.util.inspect.custom")](e,t){var r=this._bufArray().map(e=>i.isBuffer(e)?t.stylize(e.toString("hex"),"string"):JSON.stringify(e)).join(", ");return this.constructor.name+` [${r}]`}get length(){return this._readableState.length}writeBigInt(e){let t=e.toString(16);var r;return e<0&&(r=BigInt(Math.floor(t.length/2)),t=(e=(BigInt(1)<<r*BigInt(8))+e).toString(16)),t.length%2&&(t="0"+t),this.push(i.from(t,"hex"))}readUBigInt(e){return e=this.read(e),i.isBuffer(e)?BigInt("0x"+e.toString("hex")):null}readBigInt(e){if(e=this.read(e),!i.isBuffer(e))return null;let t=BigInt("0x"+e.toString("hex"));return 128&e[0]&&(t-=BigInt(1)<<BigInt(e.length)*BigInt(8)),t}writeUInt8(e){return e=i.from([e]),this.push(e)}writeUInt16LE(e){var t=i.alloc(2);return t.writeUInt16LE(e),this.push(t)}writeUInt16BE(e){var t=i.alloc(2);return t.writeUInt16BE(e),this.push(t)}writeUInt32LE(e){var t=i.alloc(4);return t.writeUInt32LE(e),this.push(t)}writeUInt32BE(e){var t=i.alloc(4);return t.writeUInt32BE(e),this.push(t)}writeInt8(e){return e=i.from([e]),this.push(e)}writeInt16LE(e){var t=i.alloc(2);return t.writeUInt16LE(e),this.push(t)}writeInt16BE(e){var t=i.alloc(2);return t.writeUInt16BE(e),this.push(t)}writeInt32LE(e){var t=i.alloc(4);return t.writeUInt32LE(e),this.push(t)}writeInt32BE(e){var t=i.alloc(4);return t.writeUInt32BE(e),this.push(t)}writeFloatLE(e){var t=i.alloc(4);return t.writeFloatLE(e),this.push(t)}writeFloatBE(e){var t=i.alloc(4);return t.writeFloatBE(e),this.push(t)}writeDoubleLE(e){var t=i.alloc(8);return t.writeDoubleLE(e),this.push(t)}writeDoubleBE(e){var t=i.alloc(8);return t.writeDoubleBE(e),this.push(t)}writeBigInt64LE(e){var t=i.alloc(8);return t.writeBigInt64LE(e),this.push(t)}writeBigInt64BE(e){var t=i.alloc(8);return t.writeBigInt64BE(e),this.push(t)}writeBigUInt64LE(e){var t=i.alloc(8);return t.writeBigUInt64LE(e),this.push(t)}writeBigUInt64BE(e){var t=i.alloc(8);return t.writeBigUInt64BE(e),this.push(t)}readUInt8(){var e=this.read(1);return i.isBuffer(e)?e.readUInt8():null}readUInt16LE(){var e=this.read(2);return i.isBuffer(e)?e.readUInt16LE():null}readUInt16BE(){var e=this.read(2);return i.isBuffer(e)?e.readUInt16BE():null}readUInt32LE(){var e=this.read(4);return i.isBuffer(e)?e.readUInt32LE():null}readUInt32BE(){var e=this.read(4);return i.isBuffer(e)?e.readUInt32BE():null}readInt8(){var e=this.read(1);return i.isBuffer(e)?e.readInt8():null}readInt16LE(){var e=this.read(2);return i.isBuffer(e)?e.readInt16LE():null}readInt16BE(){var e=this.read(2);return i.isBuffer(e)?e.readInt16BE():null}readInt32LE(){var e=this.read(4);return i.isBuffer(e)?e.readInt32LE():null}readInt32BE(){var e=this.read(4);return i.isBuffer(e)?e.readInt32BE():null}readFloatLE(){var e=this.read(4);return i.isBuffer(e)?e.readFloatLE():null}readFloatBE(){var e=this.read(4);return i.isBuffer(e)?e.readFloatBE():null}readDoubleLE(){var e=this.read(8);return i.isBuffer(e)?e.readDoubleLE():null}readDoubleBE(){var e=this.read(8);return i.isBuffer(e)?e.readDoubleBE():null}readBigInt64LE(){var e=this.read(8);return i.isBuffer(e)?e.readBigInt64LE():null}readBigInt64BE(){var e=this.read(8);return i.isBuffer(e)?e.readBigInt64BE():null}readBigUInt64LE(){var e=this.read(8);return i.isBuffer(e)?e.readBigUInt64LE():null}readBigUInt64BE(){var e=this.read(8);return i.isBuffer(e)?e.readBigUInt64BE():null}}e.exports=a},71:(e,t,r)=>{"use strict";const n=r(2830),i=r(4202);class s extends n.Transform{constructor(e){super(e),this._writableState.objectMode=!1,this._readableState.objectMode=!0,this.bs=new i,this.__restart()}_transform(e,t,r){for(this.bs.write(e);this.bs.length>=this.__needed;){let t=null;const n=null===this.__needed?void 0:this.bs.read(this.__needed);try{t=this.__parser.next(n)}catch(e){return r(e)}this.__needed&&(this.__fresh=!1),t.done?(this.push(t.value),this.__restart()):this.__needed=t.value||1/0}return r()}*_parse(){throw new Error("Must be implemented in subclass")}__restart(){this.__needed=null,this.__parser=this._parse(),this.__fresh=!0}_flush(e){e(this.__fresh?null:new Error("unexpected end of input"))}}e.exports=s},7187:e=>{"use strict";var t="object"==typeof Reflect?Reflect:null,r=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},n=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,e.exports.once=function(e,t){return new Promise((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&"function"==typeof e.on&&m(e,"error",i,{once:!0})}))},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var a=10;function o(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var i,s;return o(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener||r),i=e._events),s=i[t]),void 0===s?(s=i[t]=r,++e._eventsCount):("function"==typeof s?s=i[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),0<(i=l(e))&&s.length>i&&!s.warned&&(s.warned=!0,(n=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=s.length,console)&&console.warn&&console.warn(n)),e}function c(e,t,r){return(t=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(e={fired:!1,wrapFn:void 0,target:e,type:t,listener:r})).listener=r,e.wrapFn=t}function h(e,t,r){if(void 0===(e=e._events))return[];if(void 0===(e=e[t]))return[];if("function"==typeof e)return r?[e.listener||e]:[e];if(r){for(var n=e,i=new Array(n.length),s=0;s<i.length;++s)i[s]=n[s].listener||n[s];return i}return d(e,e.length)}function f(e){var t=this._events;if(void 0!==t){if("function"==typeof(t=t[e]))return 1;if(void 0!==t)return t.length}return 0}function d(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,s=this._events;if(void 0!==s)i=i&&void 0===s.error;else if(!i)return!1;if(i){if((a=0<t.length?t[0]:a)instanceof Error)throw a;throw(i=new Error("Unhandled error."+(a?" ("+a.message+")":""))).context=a,i}var a=s[e];if(void 0===a)return!1;if("function"==typeof a)r(a,this,t);else{var o=a.length,l=d(a,o);for(n=0;n<o;++n)r(l[n],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){return o(t),this.on(e,c(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){return o(t),this.prependListener(e,c(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var r,n,i,s,a;if(o(t),void 0!==(n=this._events)&&void 0!==(r=n[e]))if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,s=r.length-1;0<=s;s--)if(r[s]===t||r[s].listener===t){a=r[s].listener,i=s;break}if(i<0)return this;if(0===i)r.shift();else{for(var l=r,u=i;u+1<l.length;u++)l[u]=l[u+1];l.pop()}1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,r;if(void 0!==(r=this._events))if(void 0===r.removeListener)0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]);else if(0===arguments.length){for(var n,i=Object.keys(r),s=0;s<i.length;++s)"removeListener"!==(n=i[s])&&this.removeAllListeners(n);this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0}else if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(s=t.length-1;0<=s;s--)this.removeListener(e,t[s]);return this},s.prototype.listeners=function(e){return h(this,e,!0)},s.prototype.rawListeners=function(e){return h(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return 0<this._eventsCount?n(this._events):[]}},645:(e,t)=>{t.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,l=(1<<o)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1;i=e[t+h];for(h+=f,s=i&(1<<-c)-1,i>>=-c,c+=o;0<c;s=256*s+e[t+h],h+=f,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;0<c;a=256*a+e[t+h],h+=f,c-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,n),s-=u}return(i?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var a,o,l=8*s-i-1,u=(1<<l)-1,c=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,d=n?1:-1;s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+c?h/n:h*Math.pow(2,1-c))*n&&(a++,n/=2),u<=a+c?(o=0,a=u):1<=a+c?(o=(t*n-1)*Math.pow(2,i),a+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));8<=i;e[r+f]=255&o,f+=d,o/=256,i-=8);for(a=a<<i|o,l+=i;0<l;e[r+f]=255&a,f+=d,a/=256,l-=8);e[r+f-d]|=128*s}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){var r;t&&(e.super_=t,(r=function(){}).prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e)}},4155:e=>{var t,r;e=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===n||!t)&&setTimeout)return(t=setTimeout)(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}try{t="function"==typeof setTimeout?setTimeout:n}catch(e){t=n}try{r="function"==typeof clearTimeout?clearTimeout:i}catch(e){r=i}var a,o=[],l=!1,u=-1;function c(){l&&a&&(l=!1,a.length?o=a.concat(o):u=-1,o.length)&&h()}function h(){if(!l){var e=s(c);l=!0;for(var t=o.length;t;){for(a=o,o=[];++u<t;)a&&a[u].run();u=-1,t=o.length}a=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return(r=clearTimeout)(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function d(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];o.push(new f(e,t)),1!==o.length||l||s(h)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=d,e.addListener=d,e.once=d,e.off=d,e.removeListener=d,e.removeAllListeners=d,e.emit=d,e.prependListener=d,e.prependOnceListener=d,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},6753:(e,t,r)=>{"use strict";e.exports=r(5099).Duplex},2725:(e,t,r)=>{"use strict";e.exports=r(5099).PassThrough},9481:(e,t,r)=>{"use strict";e.exports=r(5099).Readable},4605:(e,t,r)=>{"use strict";e.exports=r(5099).Transform},4229:(e,t,r)=>{"use strict";e.exports=r(5099).Writable},196:(e,t,r)=>{"use strict";const{AbortError:n,codes:i}=r(4381),{isNodeStream:s,isWebStream:a,kControllerErrorFunction:o}=r(5874),l=r(8610),u=i.ERR_INVALID_ARG_TYPE;e.exports.addAbortSignal=function(t,r){if("object"!=typeof t||!("aborted"in t))throw new u("signal","AbortSignal",t);if(s(r)||a(r))return e.exports.addAbortSignalNoValidate(t,r);throw new u("stream",["ReadableStream","WritableStream","Stream"],r)},e.exports.addAbortSignalNoValidate=function(e,t){if("object"==typeof e&&"aborted"in e){const r=s(t)?()=>{t.destroy(new n(void 0,{cause:e.reason}))}:()=>{t[o](new n(void 0,{cause:e.reason}))};e.aborted?r():(e.addEventListener("abort",r),l(t,()=>e.removeEventListener("abort",r)))}return t}},7327:(e,t,r)=>{"use strict";const{StringPrototypeSlice:n,SymbolIterator:i,TypedArrayPrototypeSet:s,Uint8Array:a}=r(9061),o=r(8764).Buffer,l=r(6087).inspect;e.exports=class{constructor(){this.head=null,this.tail=null,this.length=0}push(e){e={data:e,next:null},0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length}unshift(e){e={data:e,next:this.head},0===this.length&&(this.tail=e),this.head=e,++this.length}shift(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}clear(){this.head=this.tail=null,this.length=0}join(e){if(0===this.length)return"";let t=this.head,r=""+t.data;for(;null!==(t=t.next);)r+=e+t.data;return r}concat(e){if(0===this.length)return o.alloc(0);var t=o.allocUnsafe(e>>>0);let r=this.head,n=0;for(;r;)s(t,r.data,n),n+=r.data.length,r=r.next;return t}consume(e,t){var r=this.head.data;if(e<r.length){const t=r.slice(0,e);return this.head.data=r.slice(e),t}return e===r.length?this.shift():t?this._getString(e):this._getBuffer(e)}first(){return this.head.data}*[i](){for(let e=this.head;e;e=e.next)yield e.data}_getString(e){let t="",r=this.head,i=0;do{var s=r.data;if(!(e>s.length)){e===s.length?(t+=s,++i,r.next?this.head=r.next:this.head=this.tail=null):(t+=n(s,0,e),(this.head=r).data=n(s,e));break}t+=s,e-=s.length,++i}while(null!==(r=r.next));return this.length-=i,t}_getBuffer(e){var t=o.allocUnsafe(e),r=e;let n=this.head,i=0;do{const o=n.data;if(!(e>o.length)){e===o.length?(s(t,o,r-e),++i,n.next?this.head=n.next:this.head=this.tail=null):(s(t,new a(o.buffer,o.byteOffset,e),r-e),(this.head=n).data=o.slice(e));break}s(t,o,r-e),e-=o.length,++i}while(null!==(n=n.next));return this.length-=i,t}[Symbol.for("nodejs.util.inspect.custom")](e,t){return l(this,{...t,depth:0,customInspect:!1})}}},299:(e,t,r)=>{"use strict";const n=r(9946).pipeline,i=r(8672),s=r(1195).destroyer,{isNodeStream:a,isReadable:o,isWritable:l,isWebStream:u,isTransformStream:c,isWritableStream:h,isReadableStream:f}=r(5874),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:p}}=r(4381),g=r(8610);e.exports=function(...e){if(0===e.length)throw new p("streams");if(1===e.length)return i.from(e[0]);const t=[...e];if("function"==typeof e[0]&&(e[0]=i.from(e[0])),"function"==typeof e[e.length-1]){const t=e.length-1;e[t]=i.from(e[t])}for(let r=0;r<e.length;++r)if(a(e[r])||u(e[r])){if(r<e.length-1&&!(o(e[r])||f(e[r])||c(e[r])))throw new m(`streams[${r}]`,t[r],"must be readable");if(0<r&&!(l(e[r])||h(e[r])||c(e[r])))throw new m(`streams[${r}]`,t[r],"must be writable")}let r,b,y,v,w;const S=e[0],A=n(e,(function(e){var t=v;v=null,t?t(e):e?w.destroy(e):k||E||w.destroy()})),E=!!(l(S)||h(S)||c(S)),k=!!(o(A)||f(A)||c(A));if(w=new i({writableObjectMode:!(null==S||!S.writableObjectMode),readableObjectMode:!(null==A||!A.writableObjectMode),writable:E,readable:k}),E){if(a(S))w._write=function(e,t,n){S.write(e,t)?n():r=n},w._final=function(e){S.end(),b=e},S.on("drain",(function(){var e;r&&(e=r,r=null,e())}));else if(u(S)){const e=(c(S)?S.writable:S).getWriter();w._write=async function(t,r,n){try{await e.ready,e.write(t).catch(()=>{}),n()}catch(t){n(t)}},w._final=async function(t){try{await e.ready,e.close().catch(()=>{}),b=t}catch(e){t(e)}}}const e=c(A)?A.readable:A;g(e,()=>{var e;b&&(e=b,b=null,e())})}if(k)if(a(A))A.on("readable",(function(){var e;y&&(e=y,y=null,e())})),A.on("end",(function(){w.push(null)})),w._read=function(){for(;;){var e=A.read();if(null===e)return void(y=w._read);if(!w.push(e))return}};else if(u(A)){const e=(c(A)?A.readable:A).getReader();w._read=async function(){for(;;)try{var{value:t,done:r}=await e.read();if(!w.push(t))return;if(r)return void w.push(null)}catch{return}}}return w._destroy=function(e,t){e||null===v||(e=new d),y=null,r=null,(b=null)===v?t(e):(v=t,a(A)&&s(A,e))},w}},1195:(e,t,r)=>{"use strict";const n=r(4155),{aggregateTwoErrors:i,codes:{ERR_MULTIPLE_CALLBACK:s},AbortError:a}=r(4381),o=r(9061).Symbol,{kDestroyed:l,isDestroyed:u,isFinished:c,isServerRequest:h}=r(5874),f=o("kDestroy"),d=o("kConstruct");function m(e,t,r){e&&(e.stack,t&&!t.errored&&(t.errored=e),r)&&!r.errored&&(r.errored=e)}function p(e,t,r){let i=!1;function s(t){var s,a;i||(i=!0,s=e._readableState,m(t,a=e._writableState,s),a&&(a.closed=!0),s&&(s.closed=!0),"function"==typeof r&&r(t),t?n.nextTick(g,e,t):n.nextTick(b,e))}try{e._destroy(t||null,s)}catch(t){s(t)}}function g(e,t){y(e,t),b(e)}function b(e){var t=e._readableState,r=e._writableState;r&&(r.closeEmitted=!0),t&&(t.closeEmitted=!0),(null!=r&&r.emitClose||null!=t&&t.emitClose)&&e.emit("close")}function y(e,t){var r=e._readableState,n=e._writableState;null!=n&&n.errorEmitted||null!=r&&r.errorEmitted||(n&&(n.errorEmitted=!0),r&&(r.errorEmitted=!0),e.emit("error",t))}function v(e,t,r){var i=e._readableState,s=e._writableState;if(null!=s&&s.destroyed||null!=i&&i.destroyed)return this;null!=i&&i.autoDestroy||null!=s&&s.autoDestroy?e.destroy(t):t&&(t.stack,s&&!s.errored&&(s.errored=t),i&&!i.errored&&(i.errored=t),r?n.nextTick(y,e,t):y(e,t))}function w(e){let t=!1;function r(r){var i,a,o;t?v(e,null!=r?r:new s):(t=!0,i=e._readableState,o=(a=e._writableState)||i,i&&(i.constructed=!0),a&&(a.constructed=!0),o.destroyed?e.emit(f,r):r?v(e,r,!0):n.nextTick(S,e))}try{e._construct(e=>{n.nextTick(r,e)})}catch(e){n.nextTick(r,e)}}function S(e){e.emit(d)}function A(e){return null!=e&&e.setHeader&&"function"==typeof e.abort}function E(e){e.emit("close")}function k(e,t){e.emit("error",t),n.nextTick(E,e)}e.exports={construct:function(e,t){var r,i;"function"!=typeof e._construct||(r=e._readableState,i=e._writableState,r&&(r.constructed=!1),i&&(i.constructed=!1),e.once(d,t),1<e.listenerCount(d))||n.nextTick(w,e)},destroyer:function(e,t){e&&!u(e)&&(t||c(e)||(t=new a),h(e)?(e.socket=null,e.destroy(t)):A(e)?e.abort():A(e.req)?e.req.abort():"function"==typeof e.destroy?e.destroy(t):"function"==typeof e.close?e.close():t?n.nextTick(k,e,t):n.nextTick(E,e),e.destroyed||(e[l]=!0))},destroy:function(e,t){var r=this._readableState,n=this._writableState,s=n||r;return null!=n&&n.destroyed||null!=r&&r.destroyed?"function"==typeof t&&t():(m(e,n,r),n&&(n.destroyed=!0),r&&(r.destroyed=!0),s.constructed?p(this,e,t):this.once(f,(function(r){p(this,i(r,e),t)}))),this},undestroy:function(){var e=this._readableState,t=this._writableState;e&&(e.constructed=!0,e.closed=!1,e.closeEmitted=!1,e.destroyed=!1,e.errored=null,e.errorEmitted=!1,e.reading=!1,e.ended=!1===e.readable,e.endEmitted=!1===e.readable),t&&(t.constructed=!0,t.destroyed=!1,t.closed=!1,t.closeEmitted=!1,t.errored=null,t.errorEmitted=!1,t.finalCalled=!1,t.prefinished=!1,t.ended=!1===t.writable,t.ending=!1===t.writable,t.finished=!1===t.writable)},errorOrDestroy:v}},8672:(e,t,r)=>{"use strict";var{ObjectDefineProperties:n,ObjectGetOwnPropertyDescriptor:i,ObjectKeys:s,ObjectSetPrototypeOf:a}=r(9061);e.exports=u;const o=r(911),l=r(6304);a(u.prototype,o.prototype),a(u,o);{const e=s(l.prototype);for(let t=0;t<e.length;t++){const r=e[t];u.prototype[r]||(u.prototype[r]=l.prototype[r])}}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),l.call(this,e),e?(this.allowHalfOpen=!1!==e.allowHalfOpen,!1===e.readable&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===e.writable&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}let c,h;function f(){return c=void 0===c?{}:c}n(u.prototype,{writable:{__proto__:null,...i(l.prototype,"writable")},writableHighWaterMark:{__proto__:null,...i(l.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...i(l.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...i(l.prototype,"writableBuffer")},writableLength:{__proto__:null,...i(l.prototype,"writableLength")},writableFinished:{__proto__:null,...i(l.prototype,"writableFinished")},writableCorked:{__proto__:null,...i(l.prototype,"writableCorked")},writableEnded:{__proto__:null,...i(l.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...i(l.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set(e){this._readableState&&this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}}),u.fromWeb=function(e,t){return f().newStreamDuplexFromReadableWritablePair(e,t)},u.toWeb=function(e){return f().newReadableWritablePairFromDuplex(e)},u.from=function(e){return(h=h||r(7946))(e,"body")}},7946:(e,t,r)=>{const n=r(4155),i=r(8764),{isReadable:s,isWritable:a,isIterable:o,isNodeStream:l,isReadableNodeStream:u,isWritableNodeStream:c,isDuplexNodeStream:h}=r(5874),f=r(8610),{AbortError:d,codes:{ERR_INVALID_ARG_TYPE:m,ERR_INVALID_RETURN_VALUE:p}}=r(4381),g=r(1195).destroyer,b=r(8672),y=r(911),v=r(6087).createDeferredPromise,w=r(6307),S=globalThis.Blob||i.Blob,A=void 0!==S?function(e){return e instanceof S}:function(e){return!1},E=globalThis.AbortController||r(8599).AbortController,k=r(9061).FunctionPrototypeCall;class I extends b{constructor(e){super(e),!1===(null==e?void 0:e.readable)&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),!1===(null==e?void 0:e.writable)&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}function _(e){const t=e.readable&&"function"!=typeof e.readable.read?y.wrap(e.readable):e.readable,r=e.writable;let n,i,o,l,u,c=!!s(t),h=!!a(r);function m(e){var t=l;l=null,t?t(e):e&&u.destroy(e)}return u=new I({readableObjectMode:!(null==t||!t.readableObjectMode),writableObjectMode:!(null==r||!r.writableObjectMode),readable:c,writable:h}),h&&(f(r,e=>{e&&g(t,e),m(e)}),u._write=function(e,t,i){r.write(e,t)?i():n=i},u._final=function(e){r.end(),i=e},r.on("drain",(function(){var e;n&&(e=n,n=null,e())})),r.on("finish",(function(){var e;i&&(e=i,i=null,e())}))),c&&(f(t,e=>{e&&g(t,e),m(e)}),t.on("readable",(function(){var e;o&&(e=o,o=null,e())})),t.on("end",(function(){u.push(null)})),u._read=function(){for(;;){var e=t.read();if(null===e)return void(o=u._read);if(!u.push(e))return}}),u._destroy=function(e,s){e||null===l||(e=new d),o=null,n=null,(i=null)===l?s(e):(l=s,g(r,e),g(t,e))},u}e.exports=function e(t,r){if(h(t))return t;if(u(t))return _({readable:t});if(c(t))return _({writable:t});if(l(t))return _({writable:!1,readable:!1});if("function"==typeof t){const{value:e,write:i,final:s,destroy:a}=function(e){let{promise:t,resolve:r}=v();const i=new E,s=i.signal;return{value:e(async function*(){for(;;){var e=t,{chunk:e,done:i,cb:a}=(t=null,await e);if(n.nextTick(a),i)return;if(s.aborted)throw new d(void 0,{cause:s.reason});({promise:t,resolve:r}=v()),yield e}}(),{signal:s}),write(e,t,n){var i=r;r=null,i({chunk:e,done:!1,cb:n})},final(e){r({done:!(r=null),cb:e})},destroy(e,t){i.abort(),t(e)}}}(t);if(o(e))return w(I,e,{objectMode:!0,write:i,final:s,destroy:a});const l=null==e?void 0:e.then;if("function"!=typeof l)throw new p("Iterable, AsyncIterable or AsyncFunction",r,e);{let t;const r=k(l,e,e=>{if(null!=e)throw new p("nully","body",e)},e=>{g(t,e)});return t=new I({objectMode:!0,readable:!1,write:i,final(e){s(async()=>{try{await r,n.nextTick(e,null)}catch(t){n.nextTick(e,t)}})},destroy:a})}}if(A(t))return e(t.arrayBuffer());if(o(t))return w(I,t,{objectMode:!0,writable:!1});if("object"==typeof(null==t?void 0:t.writable)||"object"==typeof(null==t?void 0:t.readable))return _({readable:null!=t&&t.readable?u(null==t?void 0:t.readable)?null==t?void 0:t.readable:e(t.readable):void 0,writable:null!=t&&t.writable?c(null==t?void 0:t.writable)?null==t?void 0:t.writable:e(t.writable):void 0});const i=null==t?void 0:t.then;if("function"!=typeof i)throw new m(r,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],t);{let e;return k(i,t,t=>{null!=t&&e.push(t),e.push(null)},t=>{g(e,t)}),e=new I({objectMode:!0,writable:!1,read(){}})}}},8610:(e,t,r)=>{const n=r(4155),{AbortError:i,codes:s}=r(4381),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_PREMATURE_CLOSE:o}=s,{kEmptyObject:l,once:u}=r(6087),{validateAbortSignal:c,validateFunction:h,validateObject:f,validateBoolean:d}=r(6547),{Promise:m,PromisePrototypeThen:p}=r(9061),{isClosed:g,isReadable:b,isReadableNodeStream:y,isReadableStream:v,isReadableFinished:w,isReadableErrored:S,isWritable:A,isWritableNodeStream:E,isWritableStream:k,isWritableFinished:I,isWritableErrored:_,isNodeStream:B,willEmitClose:N,kIsClosedPromise:C}=r(5874),O=()=>{};function x(e,t,r){var s;if(2===arguments.length?(r=t,t=l):null==t?t=l:f(t,"options"),h(r,"callback"),c(t.signal,"options.signal"),r=u(r),v(e)||k(e)){var d=e,m=t,x=r;let s=!1,a=void 0;if(m.signal)if(a=()=>{s=!0,x.call(d,new i(void 0,{cause:m.signal.reason}))},m.signal.aborted)n.nextTick(a);else{const e=x;x=u((...t)=>{m.signal.removeEventListener("abort",a),e.apply(d,t)}),m.signal.addEventListener("abort",a)}var j=(...e)=>{s||n.nextTick(()=>x.apply(d,e))};return p(d[C].promise,j,j),O}if(!B(e))throw new a("stream",["ReadableStream","WritableStream","Stream"],e);const T=null!=(s=t.readable)?s:y(e),P=null!=(j=t.writable)?j:E(e),D=e._writableState,R=e._readableState,U=()=>{e.writable||M()};let L=N(e)&&y(e)===T&&E(e)===P,V=I(e,!1);const M=()=>{V=!0,(L=!e.destroyed&&L)&&(!e.readable||T)||T&&!H||r.call(e)};let H=w(e,!1);const F=()=>{H=!0,(L=!e.destroyed&&L)&&(!e.writable||P)||P&&!V||r.call(e)},K=t=>{r.call(e,t)};let J=g(e);const q=()=>{J=!0;var t=_(e)||S(e);return t&&"boolean"!=typeof t?r.call(e,t):T&&!H&&y(e,!0)&&!w(e,!1)||P&&!V&&!I(e,!1)?r.call(e,new o):void r.call(e)},W=()=>{J=!0;var t=_(e)||S(e);if(t&&"boolean"!=typeof t)return r.call(e,t);r.call(e)},G=()=>{e.req.on("finish",M)},$=(e.setHeader&&"function"==typeof e.abort?(e.on("complete",M),L||e.on("abort",q),e.req?G():e.on("request",G)):P&&!D&&(e.on("end",U),e.on("close",U)),L||"boolean"!=typeof e.aborted||e.on("aborted",q),e.on("end",F),e.on("finish",M),!1!==t.error&&e.on("error",K),e.on("close",q),J?n.nextTick(q):null!=D&&D.errorEmitted||null!=R&&R.errorEmitted?L||n.nextTick(W):(T||L&&!b(e)||!V&&!1!==A(e))&&(P||L&&!A(e)||!H&&!1!==b(e))&&!(R&&e.req&&e.aborted)||n.nextTick(W),()=>{r=O,e.removeListener("aborted",q),e.removeListener("complete",M),e.removeListener("abort",q),e.removeListener("request",G),e.req&&e.req.removeListener("finish",M),e.removeListener("end",U),e.removeListener("close",U),e.removeListener("finish",M),e.removeListener("end",F),e.removeListener("error",K),e.removeListener("close",q)});if(t.signal&&!J){const s=()=>{var n=r;$(),n.call(e,new i(void 0,{cause:t.signal.reason}))};if(t.signal.aborted)n.nextTick(s);else{const n=r;r=u((...r)=>{t.signal.removeEventListener("abort",s),n.apply(e,r)}),t.signal.addEventListener("abort",s)}}return $}e.exports=x,e.exports.finished=function(e,t){var r;let n=!1;return null!=(r=t=null===t?l:t)&&r.cleanup&&(d(t.cleanup,"cleanup"),n=t.cleanup),new m((r,i)=>{const s=x(e,t,e=>{n&&s(),e?i(e):r()})})}},6307:(e,t,r)=>{"use strict";const n=r(4155),{PromisePrototypeThen:i,SymbolAsyncIterator:s,SymbolIterator:a}=r(9061),o=r(8764).Buffer,{ERR_INVALID_ARG_TYPE:l,ERR_STREAM_NULL_VALUES:u}=r(4381).codes;e.exports=function(e,t,r){let c,h;if("string"==typeof t||t instanceof o)return new e({objectMode:!0,...r,read(){this.push(t),this.push(null)}});if(t&&t[s])h=!0,c=t[s]();else{if(!t||!t[a])throw new l("iterable",["Iterable"],t);h=!1,c=t[a]()}const f=new e({objectMode:!0,highWaterMark:1,...r});let d=!1;return f._read=function(){d||(d=!0,async function(){for(;;){try{var{value:e,done:t}=h?await c.next():c.next();if(t)f.push(null);else{var r=e&&"function"==typeof e.then?await e:e;if(null===r)throw d=!1,new u;if(f.push(r))continue;d=!1}}catch(e){f.destroy(e)}break}}())},f._destroy=function(e,t){i(async function(e){const t=null!=e,r="function"==typeof c.throw;if(t&&r){const{value:t,done:r}=await c.throw(e);if(await t,r)return}if("function"==typeof c.return){const e=(await c.return()).value;await e}}(e),()=>n.nextTick(t,e),r=>n.nextTick(t,r||e))},f}},4870:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ObjectSetPrototypeOf:i}=r(9061),s=r(7187).EventEmitter;function a(e){s.call(this,e)}function o(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?n(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}i(a.prototype,s.prototype),i(a,s),a.prototype.pipe=function(e,t){const r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function i(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",i),e._isStdio||t&&!1===t.end||(r.on("end",l),r.on("close",u));let a=!1;function l(){a||(a=!0,e.end())}function u(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function c(e){h(),0===s.listenerCount(this,"error")&&this.emit("error",e)}function h(){r.removeListener("data",n),e.removeListener("drain",i),r.removeListener("end",l),r.removeListener("close",u),r.removeListener("error",c),e.removeListener("error",c),r.removeListener("end",h),r.removeListener("close",h),e.removeListener("close",h)}return o(r,"error",c),o(e,"error",c),r.on("end",h),r.on("close",h),e.on("close",h),e.emit("pipe",r),e},e.exports={Stream:a,prependListener:o}},4382:(e,t,r)=>{"use strict";const n=globalThis.AbortController||r(8599).AbortController,{codes:{ERR_INVALID_ARG_VALUE:i,ERR_INVALID_ARG_TYPE:s,ERR_MISSING_ARGS:a,ERR_OUT_OF_RANGE:o},AbortError:l}=r(4381),{validateAbortSignal:u,validateInteger:c,validateObject:h}=r(6547),f=r(9061).Symbol("kWeak"),d=r(8610).finished,m=r(299),p=r(196).addAbortSignalNoValidate,{isWritable:g,isNodeStream:b}=r(5874),{ArrayPrototypePush:y,MathFloor:v,Number:w,NumberIsNaN:S,Promise:A,PromiseReject:E,PromisePrototypeThen:k,Symbol:I}=r(9061),_=I("kEmpty"),B=I("kEof");function N(e,t){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal");let r=1;return null!=(null==t?void 0:t.concurrency)&&(r=v(t.concurrency)),c(r,"concurrency",1),async function*(){var i;const s=new n,a=this,o=[],u=s.signal,c={signal:u},h=()=>s.abort();let f,d,m=(null!=t&&null!=(i=t.signal)&&i.aborted&&h(),null!=t&&null!=(i=t.signal)&&i.addEventListener("abort",h),!1);function p(){m=!0}!async function(){try{for await(var n of a){var i;if(m)return;if(u.aborted)throw new l;try{n=e(n,c)}catch(i){n=E(i)}n!==_&&("function"==typeof(null==(i=n)?void 0:i.catch)&&n.catch(p),o.push(n),f&&(f(),f=null),!m)&&o.length&&o.length>=r&&await new A(e=>{d=e})}o.push(B)}catch(i){const e=E(i);k(e,void 0,p),o.push(e)}finally{var s;m=!0,f&&(f(),f=null),null!=t&&null!=(s=t.signal)&&s.removeEventListener("abort",h)}}();try{for(;;){for(;0<o.length;){const e=await o[0];if(e===B)return;if(u.aborted)throw new l;e!==_&&(yield e),o.shift(),d&&(d(),d=null)}await new A(e=>{f=e})}}finally{s.abort(),m=!0,d&&(d(),d=null)}}.call(this)}async function C(e,t){for await(const r of O.call(this,e,t))return!0;return!1}function O(e,t){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);return N.call(this,(async function(t,r){return await e(t,r)?t:_}),t)}class x extends a{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}function j(e){if(e=w(e),S(e))return 0;if(e<0)throw new o("number",">= 0",e);return e}e.exports.streamReturningOperators={asIndexedPairs:function(e){return null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&u(e.signal,"options.signal"),async function*(){let t=0;for await(const n of this){var r;if(null!=e&&null!=(r=e.signal)&&r.aborted)throw new l({cause:e.signal.reason});yield[t++,n]}}.call(this)},drop:function(e,t){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),e=j(e),async function*(){var r,n;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(const r of this){if(null!=t&&null!=(n=t.signal)&&n.aborted)throw new l;e--<=0&&(yield r)}}.call(this)},filter:O,flatMap:function(e,t){const r=N.call(this,e,t);return async function*(){for await(const e of r)yield*e}.call(this)},map:N,take:function(e,t){return null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),e=j(e),async function*(){var r,n;if(null!=t&&null!=(r=t.signal)&&r.aborted)throw new l;for await(const r of this){if(null!=t&&null!=(n=t.signal)&&n.aborted)throw new l;if(!(0<e--))return;yield r}}.call(this)},compose:function(e,t){if(null!=t&&h(t,"options"),null!=(null==t?void 0:t.signal)&&u(t.signal,"options.signal"),b(e)&&!g(e))throw new i("stream",e,"must be writable");return e=m(this,e),null!=t&&t.signal&&p(t.signal,e),e}},e.exports.promiseReturningOperators={every:async function(e,t){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);return!await C.call(this,async(...t)=>!await e(...t),t)},forEach:async function(e,t){if("function"!=typeof e)throw new s("fn",["Function","AsyncFunction"],e);for await(const r of N.call(this,(async function(t,r){return await e(t,r),_}),t));},reduce:async function(e,t,r){var i,a;if("function"!=typeof e)throw new s("reducer",["Function","AsyncFunction"],e);null!=r&&h(r,"options"),null!=(null==r?void 0:r.signal)&&u(r.signal,"options.signal");let o=1<arguments.length;if(null!=r&&null!=(i=r.signal)&&i.aborted){const e=new l(void 0,{cause:r.signal.reason});throw this.once("error",()=>{}),await d(this.destroy(e)),e}const c=new n,m=c.signal;if(null!=r&&r.signal){const e={once:!0,[f]:this};r.signal.addEventListener("abort",()=>c.abort(),e)}let p=!1;try{for await(const n of this){if(p=!0,null!=r&&null!=(a=r.signal)&&a.aborted)throw new l;o?t=await e(t,n,{signal:m}):(t=n,o=!0)}if(!p&&!o)throw new x}finally{c.abort()}return t},toArray:async function(e){null!=e&&h(e,"options"),null!=(null==e?void 0:e.signal)&&u(e.signal,"options.signal");var t,r=[];for await(const n of this){if(null!=e&&null!=(t=e.signal)&&t.aborted)throw new l(void 0,{cause:e.signal.reason});y(r,n)}return r},some:C,find:async function(e,t){for await(const r of O.call(this,e,t))return r}}},917:(e,t,r)=>{"use strict";var n=r(9061).ObjectSetPrototypeOf;e.exports=s;const i=r(1161);function s(e){if(!(this instanceof s))return new s(e);i.call(this,e)}n(s.prototype,i.prototype),n(s,i),s.prototype._transform=function(e,t,r){r(null,e)}},9946:(e,t,r)=>{const n=r(4155),{ArrayIsArray:i,Promise:s,SymbolAsyncIterator:a}=r(9061),o=r(8610),l=r(6087).once,u=r(1195),c=r(8672),{aggregateTwoErrors:h,codes:{ERR_INVALID_ARG_TYPE:f,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:m,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:g},AbortError:b}=r(4381),{validateFunction:y,validateAbortSignal:v}=r(6547),{isIterable:w,isReadable:S,isReadableNodeStream:A,isNodeStream:E,isTransformStream:k,isWebStream:I,isReadableStream:_,isReadableEnded:B}=r(5874),N=globalThis.AbortController||r(8599).AbortController;let C,O;function x(e,t,r){let n=!1;return e.on("close",()=>{n=!0}),{destroy:t=>{n||(n=!0,u.destroyer(e,t||new p("pipe")))},cleanup:o(e,{readable:t,writable:r},e=>{n=!e})}}function j(e){if(w(e))return e;if(A(e))return async function*(e){yield*(O=O||r(911)).prototype[a].call(e)}(e);throw new f("val",["Readable","Iterable","AsyncIterable"],e)}async function T(e,t,r,{end:n}){let i,a=null;var l=e=>{if(e&&(i=e),a){const e=a;a=null,e()}},u=()=>new s((e,t)=>{i?t(i):a=()=>{i?t(i):e()}}),c=(t.on("drain",l),o(t,{readable:!1},l));try{t.writableNeedDrain&&await u();for await(const r of e)t.write(r)||await u();n&&t.end(),await u(),r()}catch(e){r(i!==e?h(i,e):e)}finally{c(),t.off("drain",l)}}async function P(e,t,r,{end:n}){var i=(t=k(t)?t.writable:t).getWriter();try{for await(const t of e)await i.ready,i.write(t).catch(()=>{});await i.ready,n&&await i.close(),r()}catch(e){try{await i.abort(e),r(e)}catch(e){r(e)}}}function D(e,t,s){if((e=1===e.length&&i(e[0])?e[0]:e).length<2)throw new m("streams");const a=new N,l=a.signal,u=null==s?void 0:s.signal,h=[];function p(){V(new b)}let y,O;v(u,"options.signal"),null!=u&&u.addEventListener("abort",p);const D=[];let R,U=0;function L(e){V(e,0==--U)}function V(e,r){if((y=!e||y&&"ERR_STREAM_PREMATURE_CLOSE"!==y.code?y:e)||r){for(;D.length;)D.shift()(y);null!=u&&u.removeEventListener("abort",p),a.abort(),r&&(y||h.forEach(e=>e()),n.nextTick(t,y,O))}}for(let t=0;t<e.length;t++){const i=e[t],a=t<e.length-1,u=0<t,m=a||!1!==(null==s?void 0:s.end),p=t===e.length-1;function M(e){e&&"AbortError"!==e.name&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code&&L(e)}var H,F;if(E(i)&&(m&&(({destroy:H,cleanup:F}=x(i,a,u)),D.push(H),S(i))&&p&&h.push(F),i.on("error",M),S(i))&&p&&h.push(()=>{i.removeListener("error",M)}),0===t)if("function"==typeof i){if(R=i({signal:l}),!w(R))throw new d("Iterable, AsyncIterable or Stream","source",R)}else R=w(i)||A(i)||k(i)?i:c.from(i);else if("function"==typeof i)if(R=k(R)?j(null==(H=R)?void 0:H.readable):j(R),R=i(R,{signal:l}),a){if(!w(R,!0))throw new d("AsyncIterable",`transform[${t-1}]`,R)}else{const e=new(C=C||r(917))({objectMode:!0}),t=null==(F=R)?void 0:F.then;if("function"==typeof t)U++,t.call(R,t=>{null!=(O=t)&&e.write(t),m&&e.end(),n.nextTick(L)},t=>{e.destroy(t),n.nextTick(L,t)});else if(w(R,!0))U++,T(R,e,L,{end:m});else{if(!_(R)&&!k(R))throw new d("AsyncIterable or Promise","destination",R);var K=R.readable||R;U++,T(K,e,L,{end:m})}var{destroy:K,cleanup:J}=x(R=e,!1,!0);D.push(K),p&&h.push(J)}else if(E(i)){if(A(R))U+=2,J=function(e,t,r,{end:i}){let s=!1;{function a(){s=!0,t.end()}t.on("close",()=>{s||r(new g)}),e.pipe(t,{end:!1}),i?B(e)?n.nextTick(a):e.once("end",a):r()}return o(e,{readable:!0,writable:!1},t=>{var n=e._readableState;t&&"ERR_STREAM_PREMATURE_CLOSE"===t.code&&n&&n.ended&&!n.errored&&!n.errorEmitted?e.once("end",r).once("error",r):r(t)}),o(t,{readable:!1,writable:!0},r)}(R,i,L,{end:m}),S(i)&&p&&h.push(J);else if(k(R)||_(R)){var q=R.readable||R;U++,T(q,i,L,{end:m})}else{if(!w(R))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);U++,T(R,i,L,{end:m})}R=i}else if(I(i)){if(A(R))U++,P(j(R),i,L,{end:m});else if(_(R)||w(R))U++,P(R,i,L,{end:m});else{if(!k(R))throw new f("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],R);U++,P(R.readable,i,L,{end:m})}R=i}else R=c.from(i)}return(null!=l&&l.aborted||null!=u&&u.aborted)&&n.nextTick(p),R}e.exports={pipelineImpl:D,pipeline:function(...e){return D(e,l((y((e=e)[e.length-1],"streams[stream.length - 1]"),e.pop())))}}},911:(e,t,r)=>{const n=r(4155),{ArrayPrototypeIndexOf:i,NumberIsInteger:s,NumberIsNaN:a,NumberParseInt:o,ObjectDefineProperties:l,ObjectKeys:u,ObjectSetPrototypeOf:c,Promise:h,SafeSet:f,SymbolAsyncIterator:d,Symbol:m}=r(9061),p=((e.exports=V).ReadableState=L,r(7187)).EventEmitter,{Stream:g,prependListener:b}=r(4870),y=r(8764).Buffer,v=r(196).addAbortSignal,w=r(8610);let S=r(6087).debuglog("stream",e=>{S=e});const A=r(7327),E=r(1195),{getHighWaterMark:k,getDefaultHighWaterMark:I}=r(2457),{aggregateTwoErrors:_,codes:{ERR_INVALID_ARG_TYPE:B,ERR_METHOD_NOT_IMPLEMENTED:N,ERR_OUT_OF_RANGE:C,ERR_STREAM_PUSH_AFTER_EOF:O,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:x}}=r(4381),j=r(6547).validateObject,T=m("kPaused"),P=r(2553).StringDecoder,D=r(6307),R=(c(V.prototype,g.prototype),c(V,g),()=>{}),U=E.errorOrDestroy;function L(e,t,n){"boolean"!=typeof n&&(n=t instanceof r(8672)),this.objectMode=!(!e||!e.objectMode),n&&(this.objectMode=this.objectMode||!(!e||!e.readableObjectMode)),this.highWaterMark=e?k(this,e,"readableHighWaterMark",n):I(!1),this.buffer=new A,this.length=0,this.pipes=[],this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.constructed=!0,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this[T]=null,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.destroyed=!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.multiAwaitDrain=!1,this.readingMore=!1,this.dataEmitted=!1,this.decoder=null,this.encoding=null,e&&e.encoding&&(this.decoder=new P(e.encoding),this.encoding=e.encoding)}function V(e){if(!(this instanceof V))return new V(e);var t=this instanceof r(8672);this._readableState=new L(e,this,t),e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.construct&&(this._construct=e.construct),e.signal)&&!t&&v(e.signal,this),g.call(this,e),E.construct(this,()=>{this._readableState.needReadable&&q(this,this._readableState)})}function M(e,t,r,n){S("readableAddChunk",t);var i=e._readableState;let s;if(i.objectMode||("string"==typeof t?(r=r||i.defaultEncoding,i.encoding!==r&&(n&&i.encoding?t=y.from(t,r).toString(i.encoding):(t=y.from(t,r),r=""))):t instanceof y?r="":g._isUint8Array(t)?(t=g._uint8ArrayToBuffer(t),r=""):null!=t&&(s=new B("chunk",["string","Buffer","Uint8Array"],t))),s)U(e,s);else if(null===t){i.reading=!1;var a=e,o=i;if(S("onEofChunk"),!o.ended){if(o.decoder){const e=o.decoder.end();e&&e.length&&(o.buffer.push(e),o.length+=o.objectMode?1:e.length)}o.ended=!0,(o.sync?K:(o.needReadable=!1,o.emittedReadable=!0,J))(a)}}else if(i.objectMode||t&&0<t.length)if(n)if(i.endEmitted)U(e,new x);else{if(i.destroyed||i.errored)return!1;H(e,i,t,!0)}else if(i.ended)U(e,new O);else{if(i.destroyed||i.errored)return!1;i.reading=!1,!i.decoder||r||(t=i.decoder.write(t),i.objectMode)||0!==t.length?H(e,i,t,!1):q(e,i)}else n||(i.reading=!1,q(e,i));return!i.ended&&(i.length<i.highWaterMark||0===i.length)}function H(e,t,r,n){t.flowing&&0===t.length&&!t.sync&&0<e.listenerCount("data")?(t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null,t.dataEmitted=!0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&K(e)),q(e,t)}function F(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:a(e)?(t.flowing&&t.length?t.buffer.first():t).length:e<=t.length?e:t.ended?t.length:0}function K(e){var t=e._readableState;S("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(S("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(J,e))}function J(e){var t=e._readableState;S("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||t.errored||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,z(e)}function q(e,t){!t.readingMore&&t.constructed&&(t.readingMore=!0,n.nextTick(W,e,t))}function W(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(S("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function G(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!1===t[T]?t.flowing=!0:0<e.listenerCount("data")?e.resume():t.readableListening||(t.flowing=null)}function $(e){S("readable nexttick read 0"),e.read(0)}function Y(e,t){S("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),z(e),t.flowing&&!t.reading&&e.read(0)}function z(e){var t=e._readableState;for(S("flow",t.flowing);t.flowing&&null!==e.read(););}function X(e,t){return(t=async function*(e,t){let r,n=R;function i(t){n=this===e?(n(),R):t}e.on("readable",i);var s=w(e,{writable:!1},e=>{r=e?_(r,e):null,n(),n=R});try{for(;;){const t=e.destroyed?null:e.read();if(null!==t)yield t;else{if(r)throw r;if(null===r)return;await new h(i)}}}catch(e){throw r=_(r,e)}finally{!r&&!1===(null==t?void 0:t.destroyOnReturn)||void 0!==r&&!e._readableState.autoDestroy?(e.off("readable",i),s()):E.destroyer(e,null)}}(e="function"!=typeof e.read?V.wrap(e,{objectMode:!0}):e,t)).stream=e,t}function Q(e,t){if(0===t.length)return null;let r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function Z(e){var t=e._readableState;S("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(ee,t,e))}function ee(e,t){if(S("endReadableNT",e.endEmitted,e.length),!e.errored&&!e.closeEmitted&&!e.endEmitted&&0===e.length)if(e.endEmitted=!0,t.emit("end"),t.writable&&!1===t.allowHalfOpen)n.nextTick(te,t);else if(e.autoDestroy){const e=t._writableState;e&&(!e.autoDestroy||!e.finished&&!1!==e.writable)||t.destroy()}}function te(e){!e.writable||e.writableEnded||e.destroyed||e.end()}let re;function ne(){return re=void 0===re?{}:re}V.prototype.destroy=E.destroy,V.prototype._undestroy=E.undestroy,V.prototype._destroy=function(e,t){t(e)},V.prototype[p.captureRejectionSymbol]=function(e){this.destroy(e)},V.prototype.push=function(e,t){return M(this,e,t,!1)},V.prototype.unshift=function(e,t){return M(this,e,t,!0)},V.prototype.isPaused=function(){var e=this._readableState;return!0===e[T]||!1===e.flowing},V.prototype.setEncoding=function(e){var t=new P(e),r=(this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding,this._readableState.buffer);let n="";for(const e of r)n+=t.write(e);return r.clear(),""!==n&&r.push(n),this._readableState.length=n.length,this},V.prototype.read=function(e){S("read",e),void 0===e?e=NaN:s(e)||(e=o(e,10));var t=this._readableState,r=e;if(e>t.highWaterMark&&(t.highWaterMark=function(e){if(1073741824<e)throw new C("size","<= 1GiB",e);return e--,e=(e=(e=(e=(e|=e>>>1)|e>>>2)|e>>>4)|e>>>8)|e>>>16,++e}(e)),0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:0<t.length)||t.ended))return S("read: emitReadable",t.length,t.ended),(0===t.length&&t.ended?Z:K)(this),null;if(0===(e=F(e,t))&&t.ended)return 0===t.length&&Z(this),null;let n,i=t.needReadable;if(S("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&(i=!0,S("length less than watermark",i)),t.ended||t.reading||t.destroyed||t.errored||!t.constructed)i=!1,S("reading, ended or constructing",i);else if(i){S("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0);try{this._read(t.highWaterMark)}catch(e){U(this,e)}t.sync=!1,t.reading||(e=F(r,t))}return null===(n=0<e?Q(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.multiAwaitDrain?t.awaitDrainWriters.clear():t.awaitDrainWriters=null),0===t.length&&(t.ended||(t.needReadable=!0),r!==e)&&t.ended&&Z(this),null===n||t.errorEmitted||t.closeEmitted||(t.dataEmitted=!0,this.emit("data",n)),n},V.prototype._read=function(e){throw new N("_read()")},V.prototype.pipe=function(e,t){const r=this,i=this._readableState;function s(){S("onend"),e.end()}1!==i.pipes.length||i.multiAwaitDrain||(i.multiAwaitDrain=!0,i.awaitDrainWriters=new f(i.awaitDrainWriters?[i.awaitDrainWriters]:[])),i.pipes.push(e),S("pipe count=%d opts=%j",i.pipes.length,t),t=t&&!1===t.end||e===n.stdout||e===n.stderr?m:s;let a,o=(i.endEmitted?n.nextTick(t):r.once("end",t),e.on("unpipe",(function t(n,l){S("onunpipe"),n===r&&l&&!1===l.hasUnpiped&&(l.hasUnpiped=!0,S("cleanup"),e.removeListener("close",h),e.removeListener("finish",d),a&&e.removeListener("drain",a),e.removeListener("error",c),e.removeListener("unpipe",t),r.removeListener("end",s),r.removeListener("end",m),r.removeListener("data",u),o=!0,a)&&i.awaitDrainWriters&&(!e._writableState||e._writableState.needDrain)&&a()})),!1);function l(){var t,n;o||(1===i.pipes.length&&i.pipes[0]===e?(S("false write response, pause",0),i.awaitDrainWriters=e,i.multiAwaitDrain=!1):1<i.pipes.length&&i.pipes.includes(e)&&(S("false write response, pause",i.awaitDrainWriters.size),i.awaitDrainWriters.add(e)),r.pause()),a||(t=r,a=function(){var e=t._readableState;e.awaitDrainWriters===n?(S("pipeOnDrain",1),e.awaitDrainWriters=null):e.multiAwaitDrain&&(S("pipeOnDrain",e.awaitDrainWriters.size),e.awaitDrainWriters.delete(n)),e.awaitDrainWriters&&0!==e.awaitDrainWriters.size||!t.listenerCount("data")||t.resume()},(n=e).on("drain",a))}function u(t){S("ondata"),t=e.write(t),S("dest.write",t),!1===t&&l()}function c(t){var r;S("onerror",t),m(),e.removeListener("error",c),0===e.listenerCount("error")&&((r=e._writableState||e._readableState)&&!r.errorEmitted?U(e,t):e.emit("error",t))}function h(){e.removeListener("finish",d),m()}function d(){S("onfinish"),e.removeListener("close",h),m()}function m(){S("unpipe"),r.unpipe(e)}return r.on("data",u),b(e,"error",c),e.once("close",h),e.once("finish",d),e.emit("pipe",r),!0===e.writableNeedDrain?i.flowing&&l():i.flowing||(S("pipe resume"),r.resume()),e},V.prototype.unpipe=function(e){var t=this._readableState;if(0!==t.pipes.length)if(e){var r=i(t.pipes,e);-1!==r&&(t.pipes.splice(r,1),0===t.pipes.length&&this.pause(),e.emit("unpipe",this,{hasUnpiped:!1}))}else{const e=t.pipes;t.pipes=[],this.pause();for(let t=0;t<e.length;t++)e[t].emit("unpipe",this,{hasUnpiped:!1})}return this},V.prototype.addListener=V.prototype.on=function(e,t){t=g.prototype.on.call(this,e,t);var r=this._readableState;return"data"===e?(r.readableListening=0<this.listenerCount("readable"),!1!==r.flowing&&this.resume()):"readable"!==e||r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,S("on readable",r.length,r.reading),r.length?K(this):r.reading||n.nextTick($,this)),t},V.prototype.off=V.prototype.removeListener=function(e,t){return t=g.prototype.removeListener.call(this,e,t),"readable"===e&&n.nextTick(G,this),t},V.prototype.removeAllListeners=function(e){var t=g.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(G,this),t},V.prototype.resume=function(){var e,t=this._readableState;return t.flowing||(S("resume"),t.flowing=!t.readableListening,this,(e=t).resumeScheduled||(e.resumeScheduled=!0,n.nextTick(Y,this,e))),t[T]=!1,this},V.prototype.pause=function(){return S("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(S("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[T]=!0,this},V.prototype.wrap=function(e){let t=!1;e.on("data",r=>{!this.push(r)&&e.pause&&(t=!0,e.pause())}),e.on("end",()=>{this.push(null)}),e.on("error",e=>{U(this,e)}),e.on("close",()=>{this.destroy()}),e.on("destroy",()=>{this.destroy()}),this._read=()=>{t&&e.resume&&(t=!1,e.resume())};var r=u(e);for(let t=1;t<r.length;t++){var n=r[t];void 0===this[n]&&"function"==typeof e[n]&&(this[n]=e[n].bind(e))}return this},V.prototype[d]=function(){return X(this)},V.prototype.iterator=function(e){return void 0!==e&&j(e,"options"),X(this,e)},l(V.prototype,{readable:{__proto__:null,get(){var e=this._readableState;return!(!e||!1===e.readable||e.destroyed||e.errorEmitted||e.endEmitted)},set(e){this._readableState&&(this._readableState.readable=!!e)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._readableState.readable||!this._readableState.destroyed&&!this._readableState.errored||this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.objectMode}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return!!this._readableState&&this._readableState.closed}},destroyed:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.destroyed},set(e){this._readableState&&(this._readableState.destroyed=e)}},readableEnded:{__proto__:null,enumerable:!1,get(){return!!this._readableState&&this._readableState.endEmitted}}}),l(L.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return!1!==this[T]},set(e){this[T]=!!e}}}),V._fromList=Q,V.from=function(e,t){return D(V,e,t)},V.fromWeb=function(e,t){return ne().newStreamReadableFromReadableStream(e,t)},V.toWeb=function(e,t){return ne().newReadableStreamFromStreamReadable(e,t)},V.wrap=function(e,t){var r;return new V({objectMode:null==(r=null!=(r=e.readableObjectMode)?r:e.objectMode)||r,...t,destroy(t,r){E.destroyer(e,t),r(t)}}).wrap(e)}},2457:(e,t,r)=>{"use strict";const{MathFloor:n,NumberIsInteger:i}=r(9061),s=r(4381).codes.ERR_INVALID_ARG_VALUE;function a(e){return e?16:16384}e.exports={getHighWaterMark:function(e,t,r,o){if(null==(t=null!=t.highWaterMark?t.highWaterMark:o?t[r]:null))return a(e.objectMode);if(!i(t)||t<0)throw new s(o?"options."+r:"options.highWaterMark",t);return n(t)},getDefaultHighWaterMark:a}},1161:(e,t,r)=>{"use strict";var{ObjectSetPrototypeOf:n,Symbol:i}=r(9061);e.exports=u;const s=r(4381).codes.ERR_METHOD_NOT_IMPLEMENTED,a=r(8672),o=r(2457).getHighWaterMark,l=(n(u.prototype,a.prototype),n(u,a),i("kCallback"));function u(e){if(!(this instanceof u))return new u(e);var t=e?o(this,e,"readableHighWaterMark",!0):null;0===t&&(e={...e,highWaterMark:null,readableHighWaterMark:t,writableHighWaterMark:e.writableHighWaterMark||0}),a.call(this,e),this._readableState.sync=!1,this[l]=null,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush)&&(this._flush=e.flush),this.on("prefinish",h)}function c(e){"function"!=typeof this._flush||this.destroyed?(this.push(null),e&&e()):this._flush((t,r)=>{t?e?e(t):this.destroy(t):(null!=r&&this.push(r),this.push(null),e&&e())})}function h(){this._final!==c&&c.call(this)}u.prototype._final=c,u.prototype._transform=function(e,t,r){throw new s("_transform()")},u.prototype._write=function(e,t,r){const n=this._readableState,i=this._writableState,s=n.length;this._transform(e,t,(e,t)=>{e?r(e):(null!=t&&this.push(t),i.ended||s===n.length||n.length<n.highWaterMark?r():this[l]=r)})},u.prototype._read=function(){var e;this[l]&&(e=this[l],this[l]=null,e())}},5874:(e,t,r)=>{"use strict";const{Symbol:n,SymbolAsyncIterator:i,SymbolIterator:s,SymbolFor:a}=r(9061),o=n("kDestroyed"),l=n("kIsErrored"),u=n("kIsReadable"),c=n("kIsDisturbed"),h=a("nodejs.webstream.isClosedPromise"),f=a("nodejs.webstream.controllerErrorFunction");function d(e,t=!1){return!(!e||"function"!=typeof e.pipe||"function"!=typeof e.on||t&&("function"!=typeof e.pause||"function"!=typeof e.resume)||e._writableState&&!1===(null==(t=e._readableState)?void 0:t.readable)||e._writableState&&!e._readableState)}function m(e){return!(!e||"function"!=typeof e.write||"function"!=typeof e.on||e._readableState&&!1===(null==(e=e._writableState)?void 0:e.writable))}function p(e){return e&&(e._readableState||e._writableState||"function"==typeof e.write&&"function"==typeof e.on||"function"==typeof e.pipe&&"function"==typeof e.on)}function g(e){return!(!e||p(e)||"function"!=typeof e.pipeThrough||"function"!=typeof e.getReader||"function"!=typeof e.cancel)}function b(e){return!(!e||p(e)||"function"!=typeof e.getWriter||"function"!=typeof e.abort)}function y(e){return!(!e||p(e)||"object"!=typeof e.readable||"object"!=typeof e.writable)}function v(e){var t,r;return p(e)?(r=e._writableState,t=e._readableState,r=r||t,!!(e.destroyed||e[o]||null!=r&&r.destroyed)):null}function w(e){return m(e)?!0===e.writableEnded||(null==(e=e._writableState)||!e.errored)&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended):null}function S(e,t){return d(e)?(null==(e=e._readableState)||!e.errored)&&("boolean"!=typeof(null==e?void 0:e.endEmitted)?null:!!(e.endEmitted||!1===t&&!0===e.ended&&0===e.length)):null}function A(e){return e&&null!=e[u]?e[u]:"boolean"!=typeof(null==e?void 0:e.readable)?null:!v(e)&&d(e)&&e.readable&&!S(e)}function E(e){return"boolean"!=typeof(null==e?void 0:e.writable)?null:!v(e)&&m(e)&&e.writable&&!w(e)}function k(e){return"boolean"==typeof e._closed&&"boolean"==typeof e._defaultKeepAlive&&"boolean"==typeof e._removedConnection&&"boolean"==typeof e._removedContLen}function I(e){return"boolean"==typeof e._sent100&&k(e)}e.exports={kDestroyed:o,isDisturbed:function(e){var t;return!(!e||!(null!=(t=e[c])?t:e.readableDidRead||e.readableAborted))},kIsDisturbed:c,isErrored:function(e){var t;return!(!e||!(null!=(t=null!=(t=null!=(t=null!=(t=null!=(t=null!=(t=e[l])?t:e.readableErrored)?t:e.writableErrored)?t:null==(t=e._readableState)?void 0:t.errorEmitted)?t:null==(t=e._writableState)?void 0:t.errorEmitted)?t:null==(t=e._readableState)?void 0:t.errored)?t:null!=(t=e._writableState)&&t.errored))},kIsErrored:l,isReadable:A,kIsReadable:u,kIsClosedPromise:h,kControllerErrorFunction:f,isClosed:function(e){var t,r;return p(e)?"boolean"==typeof e.closed?e.closed:(t=e._writableState,r=e._readableState,"boolean"==typeof(null==t?void 0:t.closed)||"boolean"==typeof(null==r?void 0:r.closed)?(null==t?void 0:t.closed)||(null==r?void 0:r.closed):"boolean"==typeof e._closed&&k(e)?e._closed:null):null},isDestroyed:v,isDuplexNodeStream:function(e){return!(!e||"function"!=typeof e.pipe||!e._readableState||"function"!=typeof e.on||"function"!=typeof e.write)},isFinished:function(e,t){return p(e)?!(!v(e)&&(!1!==(null==t?void 0:t.readable)&&A(e)||!1!==(null==t?void 0:t.writable)&&E(e))):null},isIterable:function(e,t){return null!=e&&(!0===t?"function"==typeof e[i]:!1!==t&&"function"==typeof e[i]||"function"==typeof e[s])},isReadableNodeStream:d,isReadableStream:g,isReadableEnded:function(e){return d(e)?!0===e.readableEnded||!(!(e=e._readableState)||e.errored)&&("boolean"!=typeof(null==e?void 0:e.ended)?null:e.ended):null},isReadableFinished:S,isReadableErrored:function(e){return p(e)?e.readableErrored||(null!=(e=null==(e=e._readableState)?void 0:e.errored)?e:null):null},isNodeStream:p,isWebStream:function(e){return g(e)||b(e)||y(e)},isWritable:E,isWritableNodeStream:m,isWritableStream:b,isWritableEnded:w,isWritableFinished:function(e,t){return m(e)?!0===e.writableFinished||(null==(e=e._writableState)||!e.errored)&&("boolean"!=typeof(null==e?void 0:e.finished)?null:!!(e.finished||!1===t&&!0===e.ended&&0===e.length)):null},isWritableErrored:function(e){return p(e)?e.writableErrored||(null!=(e=null==(e=e._writableState)?void 0:e.errored)?e:null):null},isServerRequest:function(e){return"boolean"==typeof e._consuming&&"boolean"==typeof e._dumped&&void 0===(null==(e=e.req)?void 0:e.upgradeOrConnect)},isServerResponse:I,willEmitClose:function(e){var t,r;return p(e)?(r=e._writableState,t=e._readableState,!(r=r||t)&&I(e)||!!(r&&r.autoDestroy&&r.emitClose&&!1===r.closed)):null},isTransformStream:y}},6304:(e,t,r)=>{const n=r(4155),{ArrayPrototypeSlice:i,Error:s,FunctionPrototypeSymbolHasInstance:a,ObjectDefineProperty:o,ObjectDefineProperties:l,ObjectSetPrototypeOf:u,StringPrototypeToLowerCase:c,Symbol:h,SymbolHasInstance:f}=r(9061),d=((e.exports=P).WritableState=j,r(7187)).EventEmitter,m=r(4870).Stream,p=r(8764).Buffer,g=r(1195),b=r(196).addAbortSignal,{getHighWaterMark:y,getDefaultHighWaterMark:v}=r(2457),{ERR_INVALID_ARG_TYPE:w,ERR_METHOD_NOT_IMPLEMENTED:S,ERR_MULTIPLE_CALLBACK:A,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:k,ERR_STREAM_ALREADY_FINISHED:I,ERR_STREAM_NULL_VALUES:_,ERR_STREAM_WRITE_AFTER_END:B,ERR_UNKNOWN_ENCODING:N}=r(4381).codes,C=g.errorOrDestroy;function O(){}u(P.prototype,m.prototype),u(P,m);const x=h("kOnFinished");function j(e,t,i){"boolean"!=typeof i&&(i=t instanceof r(8672)),this.objectMode=!(!e||!e.objectMode),i&&(this.objectMode=this.objectMode||!(!e||!e.writableObjectMode)),this.highWaterMark=e?y(this,e,"writableHighWaterMark",i):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,i=!(!e||!1!==e.decodeStrings),this.decodeStrings=!i,this.defaultEncoding=e&&e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e,t){var r=e._writableState,i=r.sync,s=r.writecb;"function"==typeof s?(r.writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t?(t.stack,r.errored||(r.errored=t),e._readableState&&!e._readableState.errored&&(e._readableState.errored=t),i?n.nextTick(U,e,r,t,s):U(e,r,t,s)):(r.buffered.length>r.bufferedIndex&&H(e,r),i?null!==r.afterWriteTickInfo&&r.afterWriteTickInfo.cb===s?r.afterWriteTickInfo.count++:(r.afterWriteTickInfo={count:1,cb:s,stream:e,state:r},n.nextTick(L,r.afterWriteTickInfo)):V(e,r,1,s))):C(e,new A)}.bind(void 0,t),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,T(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!e||!1!==e.emitClose,this.autoDestroy=!e||!1!==e.autoDestroy,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[x]=[]}function T(e){e.buffered=[],e.bufferedIndex=0,e.allBuffers=!0,e.allNoop=!0}function P(e){var t=this instanceof r(8672);if(!t&&!a(P,this))return new P(e);this._writableState=new j(e,this,t),e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final),"function"==typeof e.construct&&(this._construct=e.construct),e.signal)&&b(e.signal,this),m.call(this,e),g.construct(this,()=>{var e=this._writableState;e.writing||H(this,e),K(this,e)})}function D(e,t,r,i){var s,a,o=e._writableState;if("function"==typeof r)i=r,r=o.defaultEncoding;else{if(r){if("buffer"!==r&&!p.isEncoding(r))throw new N(r)}else r=o.defaultEncoding;"function"!=typeof i&&(i=O)}if(null===t)throw new _;if(!o.objectMode)if("string"==typeof t)!1!==o.decodeStrings&&(t=p.from(t,r),r="buffer");else{if(!(t instanceof p)){if(!m._isUint8Array(t))throw new w("chunk",["string","Buffer","Uint8Array"],t);t=m._uint8ArrayToBuffer(t)}r="buffer"}let l;return o.ending?l=new B:o.destroyed&&(l=new k("write")),l?(n.nextTick(i,l),C(e,l,!0),l):(o.pendingcb++,e=e,t=t,r=r,i=i,s=(o=o).objectMode?1:t.length,o.length+=s,(a=o.length<o.highWaterMark)||(o.needDrain=!0),o.writing||o.corked||o.errored||!o.constructed?(o.buffered.push({chunk:t,encoding:r,callback:i}),o.allBuffers&&"buffer"!==r&&(o.allBuffers=!1),o.allNoop&&i!==O&&(o.allNoop=!1)):(o.writelen=s,o.writecb=i,o.writing=!0,o.sync=!0,e._write(t,r,o.onwrite),o.sync=!1),a&&!o.errored&&!o.destroyed)}function R(e,t,r,n,i,s,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new k("write")):r?e._writev(i,t.onwrite):e._write(i,s,t.onwrite),t.sync=!1}function U(e,t,r,n){--t.pendingcb,n(r),M(t),C(e,r)}function L({stream:e,state:t,count:r,cb:n}){return t.afterWriteTickInfo=null,V(e,t,r,n)}function V(e,t,r,n){for(t.ending||e.destroyed||0!==t.length||!t.needDrain||(t.needDrain=!1,e.emit("drain"));0<r--;)t.pendingcb--,n();t.destroyed&&M(t),K(e,t)}function M(e){if(!e.writing){for(let r=e.bufferedIndex;r<e.buffered.length;++r){var t;const{chunk:n,callback:i}=e.buffered[r],s=e.objectMode?1:n.length;e.length-=s,i(null!=(t=e.errored)?t:new k("write"))}var r,n=e[x].splice(0);for(let t=0;t<n.length;t++)n[t](null!=(r=e.errored)?r:new k("end"));T(e)}}function H(e,t){if(!(t.corked||t.bufferProcessing||t.destroyed)&&t.constructed){const{buffered:r,bufferedIndex:n,objectMode:s}=t,a=r.length-n;if(a){let o=n;if(t.bufferProcessing=!0,1<a&&e._writev){t.pendingcb-=a-1;const n=t.allNoop?O:e=>{for(let t=o;t<r.length;++t)r[t].callback(e)},s=t.allNoop&&0===o?r:i(r,o);s.allBuffers=t.allBuffers,R(e,t,!0,t.length,s,"",n),T(t)}else{do{const{chunk:n,encoding:i,callback:a}=r[o];r[o++]=null,R(e,t,!1,s?1:n.length,n,i,a)}while(o<r.length&&!t.writing);o===r.length?T(t):256<o?(r.splice(0,o),t.bufferedIndex=0):t.bufferedIndex=o}t.bufferProcessing=!1}}}function F(e){return e.ending&&!e.destroyed&&e.constructed&&0===e.length&&!e.errored&&0===e.buffered.length&&!e.finished&&!e.writing&&!e.errorEmitted&&!e.closeEmitted}function K(e,t,r){F(t)&&(function(e,t){if(!t.prefinished&&!t.finalCalled)if("function"!=typeof e._final||t.destroyed)t.prefinished=!0,e.emit("prefinish");else{t.finalCalled=!0;{var r=e,i=t;let a=!1;function s(e){if(a)C(r,null!=e?e:A());else if(a=!0,i.pendingcb--,e){const t=i[x].splice(0);for(let r=0;r<t.length;r++)t[r](e);C(r,e,i.sync)}else F(i)&&(i.prefinished=!0,r.emit("prefinish"),i.pendingcb++,n.nextTick(J,r,i))}i.sync=!0,i.pendingcb++;try{r._final(s)}catch(r){s(r)}i.sync=!1}}}(e,t),0===t.pendingcb)&&(r?(t.pendingcb++,n.nextTick((e,t)=>{F(t)?J(e,t):t.pendingcb--},e,t)):F(t)&&(t.pendingcb++,J(e,t)))}function J(e,t){t.pendingcb--,t.finished=!0;var r=t[x].splice(0);for(let e=0;e<r.length;e++)r[e]();if(e.emit("finish"),t.autoDestroy){const t=e._readableState;t&&(!t.autoDestroy||!t.endEmitted&&!1!==t.readable)||e.destroy()}}j.prototype.getBuffer=function(){return i(this.buffered,this.bufferedIndex)},o(j.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}}),o(P,f,{__proto__:null,value:function(e){return!!a(this,e)||this===P&&e&&e._writableState instanceof j}}),P.prototype.pipe=function(){C(this,new E)},P.prototype.write=function(e,t,r){return!0===D(this,e,t,r)},P.prototype.cork=function(){this._writableState.corked++},P.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||H(this,e))},P.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=c(e)),p.isEncoding(e))return this._writableState.defaultEncoding=e,this;throw new N(e)},P.prototype._write=function(e,t,r){if(!this._writev)throw new S("_write()");this._writev([{chunk:e,encoding:t}],r)},P.prototype._writev=null,P.prototype.end=function(e,t,r){var i=this._writableState;let a;if("function"==typeof e?(r=e,t=e=null):"function"==typeof t&&(r=t,t=null),null!=e){const r=D(this,e,t);r instanceof s&&(a=r)}return i.corked&&(i.corked=1,this.uncork()),a||(i.errored||i.ending?i.finished?a=new I("end"):i.destroyed&&(a=new k("end")):(i.ending=!0,K(this,i,!0),i.ended=!0)),"function"==typeof r&&(a||i.finished?n.nextTick(r,a):i[x].push(r)),this},l(P.prototype,{closed:{__proto__:null,get(){return!!this._writableState&&this._writableState.closed}},destroyed:{__proto__:null,get(){return!!this._writableState&&this._writableState.destroyed},set(e){this._writableState&&(this._writableState.destroyed=e)}},writable:{__proto__:null,get(){var e=this._writableState;return!(!e||!1===e.writable||e.destroyed||e.errored||e.ending||e.ended)},set(e){this._writableState&&(this._writableState.writable=!!e)}},writableFinished:{__proto__:null,get(){return!!this._writableState&&this._writableState.finished}},writableObjectMode:{__proto__:null,get(){return!!this._writableState&&this._writableState.objectMode}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return!!this._writableState&&this._writableState.ending}},writableNeedDrain:{__proto__:null,get(){var e=this._writableState;return!!e&&!e.destroyed&&!e.ending&&e.needDrain}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!(!1===this._writableState.writable||!this._writableState.destroyed&&!this._writableState.errored||this._writableState.finished)}}});const q=g.destroy;let W;function G(){return W=void 0===W?{}:W}P.prototype.destroy=function(e,t){var r=this._writableState;return!r.destroyed&&(r.bufferedIndex<r.buffered.length||r[x].length)&&n.nextTick(M,r),q.call(this,e,t),this},P.prototype._undestroy=g.undestroy,P.prototype._destroy=function(e,t){t(e)},P.prototype[d.captureRejectionSymbol]=function(e){this.destroy(e)},P.fromWeb=function(e,t){return G().newStreamWritableFromWritableStream(e,t)},P.toWeb=function(e){return G().newWritableStreamFromStreamWritable(e)}},6547:(e,t,r)=>{"use strict";const{ArrayIsArray:n,ArrayPrototypeIncludes:i,ArrayPrototypeJoin:s,ArrayPrototypeMap:a,NumberIsInteger:o,NumberIsNaN:l,NumberMAX_SAFE_INTEGER:u,NumberMIN_SAFE_INTEGER:c,NumberParseInt:h,ObjectPrototypeHasOwnProperty:f,RegExpPrototypeExec:d,String:m,StringPrototypeToUpperCase:p,StringPrototypeTrim:g}=r(9061),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:w,ERR_OUT_OF_RANGE:S,ERR_UNKNOWN_SIGNAL:A}}=r(4381),E=r(6087).normalizeEncoding,{isAsyncFunction:k,isArrayBufferView:I}=r(6087).types,_={},B=/^[0-7]+$/,N=b((e,t,r=c,n=u)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!o(e))throw new S(t,"an integer",e);if(e<r||n<e)throw new S(t,`>= ${r} && <= `+n,e)}),C=b((e,t,r=-2147483648,n=2147483647)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!o(e))throw new S(t,"an integer",e);if(e<r||n<e)throw new S(t,`>= ${r} && <= `+n,e)}),O=b((e,t,r=!1)=>{if("number"!=typeof e)throw new v(t,"number",e);if(!o(e))throw new S(t,"an integer",e);if(e<(r=r?1:0)||4294967295<e)throw new S(t,`>= ${r} && <= 4294967295`,e)});function x(e,t){if("string"!=typeof e)throw new v(t,"string",e)}function j(e,t){if("boolean"!=typeof e)throw new v(t,"boolean",e)}function T(e,t,r){return null!=e&&f(e,t)?e[t]:r}r=b((e,t,r)=>{if(!i(r,e))throw r=s(a(r,e=>"string"==typeof e?`'${e}'`:m(e)),", "),new w(t,e,"must be one of: "+r)});const P=b((e,t,r=null)=>{var i=T(r,"allowArray",!1),s=T(r,"allowFunction",!1);if(!T(r,"nullable",!1)&&null===e||!i&&n(e)||"object"!=typeof e&&(!s||"function"!=typeof e))throw new v(t,"Object",e)}),D=b((e,t)=>{if(null!=e&&"object"!=typeof e&&"function"!=typeof e)throw new v(t,"a dictionary",e)}),R=b((e,t,r=0)=>{if(!n(e))throw new v(t,"Array",e);if(e.length<r)throw new w(t,e,"must be longer than "+r)}),U=b((e,t="buffer")=>{if(!I(e))throw new v(t,["Buffer","TypedArray","DataView"],e)}),L=b((e,t)=>{if(!(void 0===e||null!==e&&"object"==typeof e&&"aborted"in e))throw new v(t,"AbortSignal",e)}),V=b((e,t)=>{if("function"!=typeof e)throw new v(t,"Function",e)}),M=b((e,t)=>{if("function"!=typeof e||k(e))throw new v(t,"Function",e)}),H=b((e,t)=>{if(void 0!==e)throw new v(t,"undefined",e)}),F=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function K(e,t){if(void 0===e||!d(F,e))throw new w(t,e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}e.exports={isInt32:function(e){return e===(0|e)},isUint32:function(e){return e===e>>>0},parseFileMode:function(e,t,r){if("string"==typeof(e=void 0===e?r:e)){if(null===d(B,e))throw new w(t,e,"must be a 32-bit unsigned integer or an octal string");e=h(e,8)}return O(e,t),e},validateArray:R,validateStringArray:function(e,t){R(e,t);for(let r=0;r<e.length;r++)x(e[r],`${t}[${r}]`)},validateBooleanArray:function(e,t){R(e,t);for(let r=0;r<e.length;r++)j(e[r],`${t}[${r}]`)},validateBoolean:j,validateBuffer:U,validateDictionary:D,validateEncoding:function(e,t){var r=E(t);e=e.length;if("hex"===r&&e%2!=0)throw new w("encoding",t,"is invalid for data of length "+e)},validateFunction:V,validateInt32:C,validateInteger:N,validateNumber:function(e,t,r,n){if("number"!=typeof e)throw new v(t,"number",e);if(null!=r&&e<r||null!=n&&n<e||(null!=r||null!=n)&&l(e))throw new S(t,(null!=r?">= "+r:"")+(null!=r&&null!=n?" && ":"")+(null!=n?"<= "+n:""),e)},validateObject:P,validateOneOf:r,validatePlainFunction:M,validatePort:function(e,t="Port",r=!0){if("number"!=typeof e&&"string"!=typeof e||"string"==typeof e&&0===g(e).length||+e!=+e>>>0||65535<e||0===e&&!r)throw new y(t,e,r);return 0|e},validateSignalName:function(e,t="signal"){if(x(e,t),void 0===_[e]){if(void 0!==_[p(e)])throw new A(e+" (signals must use all capital letters)");throw new A(e)}},validateString:x,validateUint32:O,validateUndefined:H,validateUnion:function(e,t,r){if(!i(r,e))throw new v(t,`('${s(r,"|")}')`,e)},validateAbortSignal:L,validateLinkHeaderValue:function(e){if("string"==typeof e)return K(e,"hints"),e;if(n(e)){var t=e.length;let n="";if(0!==t)for(let i=0;i<t;i++){var r=e[i];K(r,"hints"),n+=r,i!==t-1&&(n+=", ")}return n}throw new w("hints",e,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}}},4381:(e,t,r)=>{"use strict";const{format:n,inspect:i,AggregateError:s}=r(6087),a=globalThis.AggregateError||s,o=Symbol("kIsNodeError"),l=["string","function","number","object","Function","Object","boolean","bigint","symbol"],u=/^([A-Z][a-z0-9]*)+$/,c={};function h(e,t){if(!e)throw new c.ERR_INTERNAL_ASSERTION(t)}function f(e){let t="",r=e.length;for(var n="-"===e[0]?1:0;r>=4+n;r-=3)t="_"+e.slice(r-3,r)+t;return""+e.slice(0,r)+t}function d(e,t,r){class i extends(r=r||Error){constructor(...r){var i,s,a;super((i=e,r=r,"function"==typeof(s=t)?(h(s.length<=r.length,`Code: ${i}; The provided arguments length (${r.length}) does not match the required ones (${s.length}).`),s(...r)):(h((a=(s.match(/%[dfijoOs]/g)||[]).length)===r.length,`Code: ${i}; The provided arguments length (${r.length}) does not match the required ones (${a}).`),0===r.length?s:n(s,...r))))}toString(){return this.name+` [${e}]: `+this.message}}Object.defineProperties(i.prototype,{name:{value:r.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return this.name+` [${e}]: `+this.message},writable:!0,enumerable:!1,configurable:!0}}),i.prototype.code=e,i.prototype[o]=!0,c[e]=i}function m(e){var t="__node_internal_"+e.name;return Object.defineProperty(e,"name",{value:t}),e}class p extends Error{constructor(e="The operation was aborted",t){if(void 0!==t&&"object"!=typeof t)throw new c.ERR_INVALID_ARG_TYPE("options","Object",t);super(e,t),this.code="ABORT_ERR",this.name="AbortError"}}d("ERR_ASSERTION","%s",Error),d("ERR_INVALID_ARG_TYPE",(e,t,r)=>{h("string"==typeof e,"'name' must be a string"),Array.isArray(t)||(t=[t]);let n="The ";e.endsWith(" argument")?n+=e+" ":n+=`"${e}" ${e.includes(".")?"property":"argument"} `,n+="must be ";var s=[],a=[],o=[];for(const e of t)h("string"==typeof e,"All expected entries have to be of type string"),l.includes(e)?s.push(e.toLowerCase()):(u.test(e)?a:(h("object"!==e,'The value "object" should be written as "Object"'),o)).push(e);if(0<a.length){const e=s.indexOf("object");-1!==e&&(s.splice(s,e,1),a.push("Object"))}if(0<s.length){switch(s.length){case 1:n+="of type "+s[0];break;case 2:n+=`one of type ${s[0]} or `+s[1];break;default:{const e=s.pop();n+=`one of type ${s.join(", ")}, or `+e}}(0<a.length||0<o.length)&&(n+=" or ")}if(0<a.length){switch(a.length){case 1:n+="an instance of "+a[0];break;case 2:n+=`an instance of ${a[0]} or `+a[1];break;default:{const e=a.pop();n+=`an instance of ${a.join(", ")}, or `+e}}0<o.length&&(n+=" or ")}switch(o.length){case 0:break;case 1:o[0].toLowerCase()!==o[0]&&(n+="an "),n+=""+o[0];break;case 2:n+=`one of ${o[0]} or `+o[1];break;default:{const e=o.pop();n+=`one of ${o.join(", ")}, or `+e}}if(null==r)n+=". Received "+r;else if("function"==typeof r&&r.name)n+=". Received function "+r.name;else if("object"==typeof r)null!=(e=r.constructor)&&e.name?n+=". Received an instance of "+r.constructor.name:n+=". Received "+i(r,{depth:-1});else{let e=i(r,{colors:!1});25<e.length&&(e=e.slice(0,25)+"..."),n+=`. Received type ${typeof r} (${e})`}return n},TypeError),d("ERR_INVALID_ARG_VALUE",(e,t,r="is invalid")=>{let n=i(t);return 128<n.length&&(n=n.slice(0,128)+"..."),`The ${e.includes(".")?"property":"argument"} '${e}' ${r}. Received `+n},TypeError),d("ERR_INVALID_RETURN_VALUE",(e,t,r)=>`Expected ${e} to be returned from the "${t}" function but got ${null!=r&&null!=(e=r.constructor)&&e.name?"instance of "+r.constructor.name:"type "+typeof r}.`,TypeError),d("ERR_MISSING_ARGS",(...e)=>{let t;h(0<e.length,"At least one arg needs to be specified");const r=e.length;switch(e=(Array.isArray(e)?e:[e]).map(e=>`"${e}"`).join(" or "),r){case 1:t+=`The ${e[0]} argument`;break;case 2:t+=`The ${e[0]} and ${e[1]} arguments`;break;default:{const r=e.pop();t+=`The ${e.join(", ")}, and ${r} arguments`}}return t+" must be specified"},TypeError),d("ERR_OUT_OF_RANGE",(e,t,r)=>{let n;return h(t,'Missing "range" argument'),Number.isInteger(r)&&Math.abs(r)>2**32?n=f(String(r)):"bigint"==typeof r?(n=String(r),(2n**32n<r||r<-(2n**32n))&&(n=f(n)),n+="n"):n=i(r),`The value of "${e}" is out of range. It must be ${t}. Received `+n},RangeError),d("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),d("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),d("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),d("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),d("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),d("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),d("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),d("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),d("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),d("ERR_STREAM_WRITE_AFTER_END","write after end",Error),d("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),e.exports={AbortError:p,aggregateTwoErrors:m((function(e,t){var r;return e&&t&&e!==t?Array.isArray(t.errors)?(t.errors.push(e),t):((r=new a([t,e],t.message)).code=t.code,r):e||t})),hideStackFrames:m,codes:c}},9061:e=>{"use strict";e.exports={ArrayIsArray:e=>Array.isArray(e),ArrayPrototypeIncludes:(e,t)=>e.includes(t),ArrayPrototypeIndexOf:(e,t)=>e.indexOf(t),ArrayPrototypeJoin:(e,t)=>e.join(t),ArrayPrototypeMap:(e,t)=>e.map(t),ArrayPrototypePop:(e,t)=>e.pop(t),ArrayPrototypePush:(e,t)=>e.push(t),ArrayPrototypeSlice:(e,t,r)=>e.slice(t,r),Error:Error,FunctionPrototypeCall:(e,t,...r)=>e.call(t,...r),FunctionPrototypeSymbolHasInstance:(e,t)=>Function.prototype[Symbol.hasInstance].call(e,t),MathFloor:Math.floor,Number:Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties:(e,t)=>Object.defineProperties(e,t),ObjectDefineProperty:(e,t,r)=>Object.defineProperty(e,t,r),ObjectGetOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t),ObjectKeys:e=>Object.keys(e),ObjectSetPrototypeOf:(e,t)=>Object.setPrototypeOf(e,t),Promise:Promise,PromisePrototypeCatch:(e,t)=>e.catch(t),PromisePrototypeThen:(e,t,r)=>e.then(t,r),PromiseReject:e=>Promise.reject(e),ReflectApply:Reflect.apply,RegExpPrototypeTest:(e,t)=>e.test(t),SafeSet:Set,String:String,StringPrototypeSlice:(e,t,r)=>e.slice(t,r),StringPrototypeToLowerCase:e=>e.toLowerCase(),StringPrototypeToUpperCase:e=>e.toUpperCase(),StringPrototypeTrim:e=>e.trim(),Symbol:Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,TypedArrayPrototypeSet:(e,t,r)=>e.set(t,r),Uint8Array:Uint8Array}},6087:(e,t,r)=>{"use strict";const n=r(8764),i=Object.getPrototypeOf((async function(){})).constructor,s=globalThis.Blob||n.Blob,a=void 0!==s?function(e){return e instanceof s}:function(e){return!1};class o extends Error{constructor(e){if(!Array.isArray(e))throw new TypeError("Expected input to be an Array, got "+typeof e);let t="";for(let r=0;r<e.length;r++)t+=`    ${e[r].stack}\n`;super(t),this.name="AggregateError",this.errors=e}}e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(e){let t=!1;return function(...r){t||(t=!0,e.apply(this,r))}},createDeferredPromise:function(){let e,t;return{promise:new Promise((r,n)=>{e=r,t=n}),resolve:e,reject:t}},promisify:e=>new Promise((t,r)=>{e((e,...n)=>e?r(e):t(...n))}),debuglog:()=>function(){},format:(e,...t)=>e.replace(/%([sdifj])/g,(function(...[,e]){var r=t.shift();return"f"===e?r.toFixed(6):"j"===e?JSON.stringify(r):"s"===e&&"object"==typeof r?((r.constructor!==Object?r.constructor.name:"")+" {}").trim():r.toString()})),inspect(e){switch(typeof e){case"string":if(e.includes("'")){if(!e.includes('"'))return`"${e}"`;if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return String(e)+"n";case"boolean":case"undefined":return String(e);case"object":return"{}"}},types:{isAsyncFunction:e=>e instanceof i,isArrayBufferView:e=>ArrayBuffer.isView(e)},isBlob:a},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")},5099:(e,t,r)=>{const n=r(8764).Buffer,{ObjectDefineProperty:i,ObjectKeys:s,ReflectApply:a}=r(9061),o=r(6087).promisify.custom,{streamReturningOperators:l,promiseReturningOperators:u}=r(4382),c=r(4381).codes.ERR_ILLEGAL_CONSTRUCTOR,h=r(299),f=r(9946).pipeline,d=r(1195).destroyer,m=r(8610),p=r(7854),g=r(5874),b=e.exports=r(4870).Stream;b.isDisturbed=g.isDisturbed,b.isErrored=g.isErrored,b.isReadable=g.isReadable,b.Readable=r(911);for(const e of s(l)){const t=l[e];function y(...e){if(new.target)throw c();return b.Readable.from(a(t,this,e))}i(y,"name",{__proto__:null,value:t.name}),i(y,"length",{__proto__:null,value:t.length}),i(b.Readable.prototype,e,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}for(const e of s(u)){const t=u[e];function y(...e){if(new.target)throw c();return a(t,this,e)}i(y,"name",{__proto__:null,value:t.name}),i(y,"length",{__proto__:null,value:t.length}),i(b.Readable.prototype,e,{__proto__:null,value:y,enumerable:!1,configurable:!0,writable:!0})}b.Writable=r(6304),b.Duplex=r(8672),b.Transform=r(1161),b.PassThrough=r(917),b.pipeline=f,e=r(196).addAbortSignal,b.addAbortSignal=e,b.finished=m,b.destroy=d,b.compose=h,i(b,"promises",{__proto__:null,configurable:!0,enumerable:!0,get:()=>p}),i(f,o,{__proto__:null,enumerable:!0,get:()=>p.pipeline}),i(m,o,{__proto__:null,enumerable:!0,get:()=>p.finished}),(b.Stream=b)._isUint8Array=function(e){return e instanceof Uint8Array},b._uint8ArrayToBuffer=function(e){return n.from(e.buffer,e.byteOffset,e.byteLength)}},7854:(e,t,r)=>{"use strict";const{ArrayPrototypePop:n,Promise:i}=r(9061),{isIterable:s,isNodeStream:a,isWebStream:o}=r(5874),l=r(9946).pipelineImpl,u=r(8610).finished;r(2830),e.exports={finished:u,pipeline:function(...e){return new i((t,r)=>{let i,u;var c=e[e.length-1];if(c&&"object"==typeof c&&!a(c)&&!s(c)&&!o(c)){const t=n(e);i=t.signal,u=t.end}l(e,(e,n)=>{e?r(e):t(n)},{signal:i,end:u})})}}},9509:(e,t,r)=>{var n=r(8764),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=a),a.prototype=Object.create(i.prototype),s(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");return e=i(e),void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},2830:(e,t,r)=>{e.exports=i;var n=r(7187).EventEmitter;function i(){n.call(this)}r(5717)(i,n),i.Readable=r(9481),i.Writable=r(4229),i.Duplex=r(6753),i.Transform=r(4605),i.PassThrough=r(2725),i.finished=r(8610),i.pipeline=r(9946),(i.Stream=i).prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function s(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",s),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",l));var a=!1;function o(){a||(a=!0,e.end())}function l(){a||(a=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(c(),0===n.listenerCount(this,"error"))throw e}function c(){r.removeListener("data",i),e.removeListener("drain",s),r.removeListener("end",o),r.removeListener("close",l),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",c),r.removeListener("close",c),e.removeListener("close",c)}return r.on("error",u),e.on("error",u),r.on("end",c),r.on("close",c),e.on("close",c),e.emit("pipe",r),e}},2553:(e,t,r)=>{"use strict";var n=r(9509).Buffer,i=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==i&&i(e))return t||e;throw new Error("Unknown encoding: "+e)}(e),this.encoding){case"utf16le":this.text=l,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=c,this.end=h,t=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);if(t=e.toString("utf16le",t)){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function u(e){var t;e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function c(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(t.StringDecoder=s).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){return e=e&&e.length?this.write(e):"",this.lastNeed?e+"":e},s.prototype.text=function(e,t){r=this,s=t;var r,n,i,s=(i=(o=e).length-1)<s?0:0<=(n=a(o[i]))?(0<n&&(r.lastNeed=n-1),n):--i<s||-2===n?0:0<=(n=a(o[i]))?(0<n&&(r.lastNeed=n-2),n):!(--i<s||-2===n)&&0<=(n=a(o[i]))?(0<n&&(2===n?n=0:r.lastNeed=n-3),n):0;if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=s;var o=e.length-(s-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}}},s={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a={},(()=>{"use strict";n.r(a);var e=n(2141),t={};for(const r in e)"default"!==r&&(t[r]=()=>e[r]);n.d(a,t)})(),a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return J}));var n=r(3),i=r(0),s=r(1);class a{constructor(e={}){this.type=Object(s.e)(e,"type",a.defaultValues("type")),this.value=Object(s.e)(e,"value",a.defaultValues("value")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return"";case"value":return{};default:throw new Error("Invalid member name for AttributeTypeAndValue class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.type||""}),new i.a({name:e.value||""})]})}static blockName(){return"AttributeTypeAndValue"}fromSchema(e){if(Object(s.c)(e,["type","typeValue"]),!1===(e=i.D(e,e,a.schema({names:{type:"type",value:"typeValue"}}))).verified)throw new Error("Object's schema was not verified against input data for AttributeTypeAndValue");this.type=e.result.type.valueBlock.toString(),this.value=e.result.typeValue}toSchema(){return new i.v({value:[new i.p({value:this.type}),this.value]})}toJSON(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){var t=[i.A.blockName(),i.c.blockName(),i.z.blockName(),i.o.blockName(),i.s.blockName(),i.x.blockName(),i.B.blockName(),i.l.blockName(),i.k.blockName(),i.C.blockName(),i.i.blockName(),i.e.blockName()];if(e.constructor.blockName()!==a.blockName())return e instanceof ArrayBuffer&&Object(s.f)(this.value.valueBeforeDecode,e);{if(this.type!==e.type)return!1;let i=[!1,!1];var r=this.value.constructor.blockName();for(const n of t)r===n&&(i[0]=!0),e.value.constructor.blockName()===n&&(i[1]=!0);if(i[0]^i[1])return!1;if(i=i[0]&&i[1]){t=Object(n.i)(this.value.valueBlock.value);var o=Object(n.i)(e.value.valueBlock.value);if(0!==t.localeCompare(o))return!1}else if(!1===Object(s.f)(this.value.valueBeforeDecode,e.value.valueBeforeDecode))return!1;return!0}}}class o{constructor(e={}){this.typesAndValues=Object(s.e)(e,"typesAndValues",o.defaultValues("typesAndValues")),this.valueBeforeDecode=Object(s.e)(e,"valueBeforeDecode",o.defaultValues("valueBeforeDecode")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"typesAndValues":return[];case"valueBeforeDecode":return new ArrayBuffer(0);default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}static compareWithDefault(e,t){switch(e){case"typesAndValues":return 0===t.length;case"valueBeforeDecode":return 0===t.byteLength;default:throw new Error("Invalid member name for RelativeDistinguishedNames class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.repeatedSequence||"",value:new i.w({value:[new i.u({name:e.repeatedSet||"",value:a.schema(e.typeAndValue||{})})]})})]})}fromSchema(e){if(Object(s.c)(e,["RDN","typesAndValues"]),!1===(e=i.D(e,e,o.schema({names:{blockName:"RDN",repeatedSet:"typesAndValues"}}))).verified)throw new Error("Object's schema was not verified against input data for RelativeDistinguishedNames");"typesAndValues"in e.result&&(this.typesAndValues=Array.from(e.result.typesAndValues,e=>new a({schema:e}))),this.valueBeforeDecode=e.result.RDN.valueBeforeDecode}toSchema(){return 0===this.valueBeforeDecode.byteLength?new i.v({value:[new i.w({value:Array.from(this.typesAndValues,e=>e.toSchema())})]}):i.E(this.valueBeforeDecode).result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,e=>e.toJSON())}}isEqual(e){if(e instanceof o){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(var[t,r]of this.typesAndValues.entries())if(!1===r.isEqual(e.typesAndValues[t]))return!1;return!0}return e instanceof ArrayBuffer&&Object(s.f)(this.valueBeforeDecode,e)}}class l{constructor(e={}){this.type=Object(s.e)(e,"type",l.defaultValues("type")),this.value=Object(s.e)(e,"value",l.defaultValues("value")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return 9;case"value":return{};default:throw new Error("Invalid member name for GeneralName class: "+e)}}static compareWithDefault(e,t){switch(e){case"type":return t===l.defaultValues(e);case"value":return 0===Object.keys(t).length;default:throw new Error("Invalid member name for GeneralName class: "+e)}}static schema(e={}){var t;e=Object(s.e)(e,"names",{});return new i.f({value:[new i.g({idBlock:{tagClass:3,tagNumber:0},name:e.blockName||"",value:[new i.p,new i.g({idBlock:{tagClass:3,tagNumber:0},value:[new i.a]})]}),new i.r({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:1}}),new i.r({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:2}}),new i.g({idBlock:{tagClass:3,tagNumber:3},name:e.blockName||"",value:[(t=e.builtInStandardAttributes||{},!1,t=Object(s.e)(t,"names",{}),new i.v({optional:!1,value:[new i.g({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:t.country_name||"",value:[new i.f({value:[new i.o,new i.s]})]}),new i.g({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:t.administration_domain_name||"",value:[new i.f({value:[new i.o,new i.s]})]}),new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:t.network_address||"",isHexOnly:!0}),new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:t.terminal_identifier||"",isHexOnly:!0}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:t.private_domain_name||"",value:[new i.f({value:[new i.o,new i.s]})]}),new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:t.organization_name||"",isHexOnly:!0}),new i.r({optional:!0,name:t.numeric_user_identifier||"",idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new i.g({optional:!0,name:t.personal_name||"",idBlock:{tagClass:3,tagNumber:5},value:[new i.r({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new i.g({optional:!0,name:t.organizational_unit_names||"",idBlock:{tagClass:3,tagNumber:6},value:[new i.u({value:new i.s})]})]})),new i.v({optional:!0,value:[new i.s,new i.s]}),new i.w({optional:!0,value:[new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.a]})]})]}),new i.g({idBlock:{tagClass:3,tagNumber:4},name:e.blockName||"",value:[o.schema(e.directoryName||{})]}),new i.g({idBlock:{tagClass:3,tagNumber:5},name:e.blockName||"",value:[new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.f({value:[new i.x,new i.s,new i.z,new i.A,new i.c]})]}),new i.g({idBlock:{tagClass:3,tagNumber:1},value:[new i.f({value:[new i.x,new i.s,new i.z,new i.A,new i.c]})]})]}),new i.r({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:6}}),new i.r({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:7}}),new i.r({name:e.blockName||"",idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){Object(s.c)(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);var t=i.D(e,e,l.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for GeneralName");switch(this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:this.value=t.result.blockName;break;case 1:case 2:case 6:var r=((r=t.result.blockName).idBlock.tagClass=1,r.idBlock.tagNumber=22,r.toBER(!1));this.value=i.E(r).result.valueBlock.value;break;case 3:this.value=t.result.blockName;break;case 4:this.value=new o({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new i.q({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:(r=t.result.blockName).idBlock.tagClass=1,r.idBlock.tagNumber=6,r=r.toBER(!1),this.value=i.E(r).result.valueBlock.toString()}}toSchema(){switch(this.type){case 0:case 3:case 5:return new i.g({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:var e=new i.l({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e;case 4:return new i.g({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:return(e=this.value).idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e;case 8:return(e=new i.p({value:this.value})).idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e;default:return l.schema()}}toJSON(){var e={type:this.type,value:""};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch(e){}return e}}class u{constructor(e={}){this.accessMethod=Object(s.e)(e,"accessMethod",u.defaultValues("accessMethod")),this.accessLocation=Object(s.e)(e,"accessLocation",u.defaultValues("accessLocation")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"accessMethod":return"";case"accessLocation":return new l;default:throw new Error("Invalid member name for AccessDescription class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.accessMethod||""}),l.schema(e.accessLocation||{})]})}fromSchema(e){if(Object(s.c)(e,["accessMethod","accessLocation"]),!1===(e=i.D(e,e,u.schema({names:{accessMethod:"accessMethod",accessLocation:{names:{blockName:"accessLocation"}}}}))).verified)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=e.result.accessMethod.valueBlock.toString(),this.accessLocation=new l({schema:e.result.accessLocation})}toSchema(){return new i.v({value:[new i.p({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}class c{constructor(e={}){"seconds"in e&&(this.seconds=Object(s.e)(e,"seconds",c.defaultValues("seconds"))),"millis"in e&&(this.millis=Object(s.e)(e,"millis",c.defaultValues("millis"))),"micros"in e&&(this.micros=Object(s.e)(e,"micros",c.defaultValues("micros"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"seconds":case"millis":case"micros":return 0;default:throw new Error("Invalid member name for Accuracy class: "+e)}}static compareWithDefault(e,t){switch(e){case"seconds":case"millis":case"micros":return t===c.defaultValues(e);default:throw new Error("Invalid member name for Accuracy class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",optional:!0,value:[new i.m({optional:!0,name:e.seconds||""}),new i.r({name:e.millis||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new i.r({name:e.micros||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){var t;if(Object(s.c)(e,["seconds","millis","micros"]),!1===(e=i.D(e,e,c.schema({names:{seconds:"seconds",millis:"millis",micros:"micros"}}))).verified)throw new Error("Object's schema was not verified against input data for Accuracy");"seconds"in e.result&&(this.seconds=e.result.seconds.valueBlock.valueDec),"millis"in e.result&&(t=new i.m({valueHex:e.result.millis.valueBlock.valueHex}),this.millis=t.valueBlock.valueDec),"micros"in e.result&&(t=new i.m({valueHex:e.result.micros.valueBlock.valueHex}),this.micros=t.valueBlock.valueDec)}toSchema(){var e,t=[];return"seconds"in this&&t.push(new i.m({value:this.seconds})),"millis"in this&&(e=new i.m({value:this.millis}),t.push(new i.r({idBlock:{tagClass:3,tagNumber:0},valueHex:e.valueBlock.valueHex}))),"micros"in this&&(e=new i.m({value:this.micros}),t.push(new i.r({idBlock:{tagClass:3,tagNumber:1},valueHex:e.valueBlock.valueHex}))),new i.v({value:t})}toJSON(){var e={};return"seconds"in this&&(e.seconds=this.seconds),"millis"in this&&(e.millis=this.millis),"micros"in this&&(e.micros=this.micros),e}}var h=r(2);class f{constructor(e={}){this.altNames=Object(s.e)(e,"altNames",f.defaultValues("altNames")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("altNames"!==e)throw new Error("Invalid member name for AltName class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.altNames||"",value:l.schema()})]})}fromSchema(e){if(Object(s.c)(e,["altNames"]),!1===(e=i.D(e,e,f.schema({names:{altNames:"altNames"}}))).verified)throw new Error("Object's schema was not verified against input data for AltName");"altNames"in e.result&&(this.altNames=Array.from(e.result.altNames,e=>new l({schema:e})))}toSchema(){return new i.v({value:Array.from(this.altNames,e=>e.toSchema())})}toJSON(){return{altNames:Array.from(this.altNames,e=>e.toJSON())}}}var d=r(6);t=r(15),r(8);class m{constructor(e={}){this.type=Object(s.e)(e,"type",m.defaultValues("type")),this.value=Object(s.e)(e,"value",m.defaultValues("value")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return 0;case"value":return new Date(0,0,0);default:throw new Error("Invalid member name for Time class: "+e)}}static schema(e={},t=!1){return e=Object(s.e)(e,"names",{}),new i.f({optional:t,value:[new i.y({name:e.utcTimeName||""}),new i.j({name:e.generalTimeName||""})]})}fromSchema(e){if(Object(s.c)(e,["utcTimeName","generalTimeName"]),!1===(e=i.D(e,e,m.schema({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}))).verified)throw new Error("Object's schema was not verified against input data for Time");"utcTimeName"in e.result&&(this.type=0,this.value=e.result.utcTimeName.toDate()),"generalTimeName"in e.result&&(this.type=1,this.value=e.result.generalTimeName.toDate())}toSchema(){let e={};return 0===this.type&&(e=new i.y({valueDate:this.value})),1===this.type?new i.j({valueDate:this.value}):e}toJSON(){return{type:this.type,value:this.value}}}var p=r(10);class g{constructor(e={}){this.attributes=Object(s.e)(e,"attributes",g.defaultValues("attributes")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("attributes"!==e)throw new Error("Invalid member name for SubjectDirectoryAttributes class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.attributes||"",value:d.a.schema()})]})}fromSchema(e){if(Object(s.c)(e,["attributes"]),!1===(e=i.D(e,e,g.schema({names:{attributes:"attributes"}}))).verified)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");this.attributes=Array.from(e.result.attributes,e=>new d.a({schema:e}))}toSchema(){return new i.v({value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){return{attributes:Array.from(this.attributes,e=>e.toJSON())}}}class b{constructor(e={}){"notBefore"in e&&(this.notBefore=Object(s.e)(e,"notBefore",b.defaultValues("notBefore"))),"notAfter"in e&&(this.notAfter=Object(s.e)(e,"notAfter",b.defaultValues("notAfter"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"notBefore":case"notAfter":return new Date;default:throw new Error("Invalid member name for PrivateKeyUsagePeriod class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.r({name:e.notBefore||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new i.r({name:e.notAfter||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){var t;if(Object(s.c)(e,["notBefore","notAfter"]),!1===(e=i.D(e,e,b.schema({names:{notBefore:"notBefore",notAfter:"notAfter"}}))).verified)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");"notBefore"in e.result&&((t=new i.j).fromBuffer(e.result.notBefore.valueBlock.valueHex),this.notBefore=t.toDate()),"notAfter"in e.result&&((t=new i.j({valueHex:e.result.notAfter.valueBlock.valueHex})).fromBuffer(e.result.notAfter.valueBlock.valueHex),this.notAfter=t.toDate())}toSchema(){var e=[];return"notBefore"in this&&e.push(new i.r({idBlock:{tagClass:3,tagNumber:0},valueHex:new i.j({valueDate:this.notBefore}).valueBlock.valueHex})),"notAfter"in this&&e.push(new i.r({idBlock:{tagClass:3,tagNumber:1},valueHex:new i.j({valueDate:this.notAfter}).valueBlock.valueHex})),new i.v({value:e})}toJSON(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e}}class y{constructor(e={}){this.cA=Object(s.e)(e,"cA",!1),"pathLenConstraint"in e&&(this.pathLenConstraint=Object(s.e)(e,"pathLenConstraint",0)),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("cA"!==e)throw new Error("Invalid member name for BasicConstraints class: "+e);return!1}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.d({optional:!0,name:e.cA||""}),new i.m({optional:!0,name:e.pathLenConstraint||""})]})}fromSchema(e){if(Object(s.c)(e,["cA","pathLenConstraint"]),!1===(e=i.D(e,e,y.schema({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}))).verified)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in e.result&&(this.cA=e.result.cA.valueBlock.value),"pathLenConstraint"in e.result&&(e.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=e.result.pathLenConstraint:this.pathLenConstraint=e.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){var e=[];return this.cA!==y.defaultValues("cA")&&e.push(new i.d({value:this.cA})),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof i.m?e.push(this.pathLenConstraint):e.push(new i.m({value:this.pathLenConstraint}))),new i.v({value:e})}toJSON(){var e={};return this.cA!==y.defaultValues("cA")&&(e.cA=this.cA),"pathLenConstraint"in this&&(this.pathLenConstraint instanceof i.m?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}class v{constructor(e={}){"distributionPoint"in e&&(this.distributionPoint=Object(s.e)(e,"distributionPoint",v.defaultValues("distributionPoint"))),this.onlyContainsUserCerts=Object(s.e)(e,"onlyContainsUserCerts",v.defaultValues("onlyContainsUserCerts")),this.onlyContainsCACerts=Object(s.e)(e,"onlyContainsCACerts",v.defaultValues("onlyContainsCACerts")),"onlySomeReasons"in e&&(this.onlySomeReasons=Object(s.e)(e,"onlySomeReasons",v.defaultValues("onlySomeReasons"))),this.indirectCRL=Object(s.e)(e,"indirectCRL",v.defaultValues("indirectCRL")),this.onlyContainsAttributeCerts=Object(s.e)(e,"onlyContainsAttributeCerts",v.defaultValues("onlyContainsAttributeCerts")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"distributionPoint":return[];case"onlyContainsUserCerts":case"onlyContainsCACerts":return!1;case"onlySomeReasons":return 0;case"indirectCRL":case"onlyContainsAttributeCerts":return!1;default:throw new Error("Invalid member name for IssuingDistributionPoint class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.f({value:[new i.g({name:e.distributionPoint||"",idBlock:{tagClass:3,tagNumber:0},value:[new i.u({name:e.distributionPointNames||"",value:l.schema()})]}),new i.g({name:e.distributionPoint||"",idBlock:{tagClass:3,tagNumber:1},value:o.schema().valueBlock.value})]})]}),new i.r({name:e.onlyContainsUserCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new i.r({name:e.onlyContainsCACerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new i.r({name:e.onlySomeReasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new i.r({name:e.indirectCRL||"",optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new i.r({name:e.onlyContainsAttributeCerts||"",optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){Object(s.c)(e,["distributionPoint","distributionPointNames","onlyContainsUserCerts","onlyContainsCACerts","onlySomeReasons","indirectCRL","onlyContainsAttributeCerts"]);var t=i.D(e,e,v.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,e=>new l({schema:e}));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new o({schema:new i.v({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}"onlyContainsUserCerts"in t.result&&(e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex),this.onlyContainsUserCerts=0!==e[0]),"onlyContainsCACerts"in t.result&&(e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex),this.onlyContainsCACerts=0!==e[0]),"onlySomeReasons"in t.result&&(e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex),this.onlySomeReasons=e[0]),"indirectCRL"in t.result&&(e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex),this.indirectCRL=0!==e[0]),"onlyContainsAttributeCerts"in t.result&&(e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex),this.onlyContainsAttributeCerts=0!==e[0])}toSchema(){var e,t=[];if("distributionPoint"in this){let e;this.distributionPoint instanceof Array?e=new i.g({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,e=>e.toSchema())}):((e=this.distributionPoint.toSchema()).idBlock.tagClass=3,e.idBlock.tagNumber=1),t.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:[e]}))}return this.onlyContainsUserCerts!==v.defaultValues("onlyContainsUserCerts")&&t.push(new i.r({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==v.defaultValues("onlyContainsCACerts")&&t.push(new i.r({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),"onlySomeReasons"in this&&(e=new ArrayBuffer(1),new Uint8Array(e)[0]=this.onlySomeReasons,t.push(new i.r({idBlock:{tagClass:3,tagNumber:3},valueHex:e}))),this.indirectCRL!==v.defaultValues("indirectCRL")&&t.push(new i.r({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==v.defaultValues("onlyContainsAttributeCerts")&&t.push(new i.r({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new i.v({value:t})}toJSON(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,e=>e.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==v.defaultValues("onlyContainsUserCerts")&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==v.defaultValues("onlyContainsCACerts")&&(e.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==v.defaultValues("indirectCRL")&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==v.defaultValues("onlyContainsAttributeCerts")&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}class w{constructor(e={}){this.names=Object(s.e)(e,"names",w.defaultValues("names")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("names"!==e)throw new Error("Invalid member name for GeneralNames class: "+e);return[]}static schema(e={},t=!1){return e=Object(s.e)(e,"names",{}),new i.v({optional:t,name:e.blockName||"",value:[new i.u({name:e.generalNames||"",value:l.schema()})]})}fromSchema(e){if(Object(s.c)(e,["names","generalNames"]),!1===(e=i.D(e,e,w.schema({names:{blockName:"names",generalNames:"generalNames"}}))).verified)throw new Error("Object's schema was not verified against input data for GeneralNames");this.names=Array.from(e.result.generalNames,e=>new l({schema:e}))}toSchema(){return new i.v({value:Array.from(this.names,e=>e.toSchema())})}toJSON(){return{names:Array.from(this.names,e=>e.toJSON())}}}class S{constructor(e={}){this.base=Object(s.e)(e,"base",S.defaultValues("base")),this.minimum=Object(s.e)(e,"minimum",S.defaultValues("minimum")),"maximum"in e&&(this.maximum=Object(s.e)(e,"maximum",S.defaultValues("maximum"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"base":return new l;case"minimum":case"maximum":return 0;default:throw new Error("Invalid member name for GeneralSubtree class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[l.schema(e.base||{}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.m({name:e.minimum||""})]}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.m({name:e.maximum||""})]})]})}fromSchema(e){if(Object(s.c)(e,["base","minimum","maximum"]),!1===(e=i.D(e,e,S.schema({names:{base:{names:{blockName:"base"}},minimum:"minimum",maximum:"maximum"}}))).verified)throw new Error("Object's schema was not verified against input data for GeneralSubtree");this.base=new l({schema:e.result.base}),"minimum"in e.result&&(e.result.minimum.valueBlock.isHexOnly?this.minimum=e.result.minimum:this.minimum=e.result.minimum.valueBlock.valueDec),"maximum"in e.result&&(e.result.maximum.valueBlock.isHexOnly?this.maximum=e.result.maximum:this.maximum=e.result.maximum.valueBlock.valueDec)}toSchema(){var e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof i.m?this.minimum:new i.m({value:this.minimum}),e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if("maximum"in this){let t=0;t=this.maximum instanceof i.m?this.maximum:new i.m({value:this.maximum}),e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new i.v({value:e})}toJSON(){var e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}class A{constructor(e={}){"permittedSubtrees"in e&&(this.permittedSubtrees=Object(s.e)(e,"permittedSubtrees",A.defaultValues("permittedSubtrees"))),"excludedSubtrees"in e&&(this.excludedSubtrees=Object(s.e)(e,"excludedSubtrees",A.defaultValues("excludedSubtrees"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"permittedSubtrees":case"excludedSubtrees":return[];default:throw new Error("Invalid member name for NameConstraints class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.u({name:e.permittedSubtrees||"",value:S.schema()})]}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.u({name:e.excludedSubtrees||"",value:S.schema()})]})]})}fromSchema(e){if(Object(s.c)(e,["permittedSubtrees","excludedSubtrees"]),!1===(e=i.D(e,e,A.schema({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}))).verified)throw new Error("Object's schema was not verified against input data for NameConstraints");"permittedSubtrees"in e.result&&(this.permittedSubtrees=Array.from(e.result.permittedSubtrees,e=>new S({schema:e}))),"excludedSubtrees"in e.result&&(this.excludedSubtrees=Array.from(e.result.excludedSubtrees,e=>new S({schema:e})))}toSchema(){var e=[];return"permittedSubtrees"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,e=>e.toSchema())})),"excludedSubtrees"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,e=>e.toSchema())})),new i.v({value:e})}toJSON(){var e={};return"permittedSubtrees"in this&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,e=>e.toJSON())),"excludedSubtrees"in this&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,e=>e.toJSON())),e}}class E{constructor(e={}){"distributionPoint"in e&&(this.distributionPoint=Object(s.e)(e,"distributionPoint",E.defaultValues("distributionPoint"))),"reasons"in e&&(this.reasons=Object(s.e)(e,"reasons",E.defaultValues("reasons"))),"cRLIssuer"in e&&(this.cRLIssuer=Object(s.e)(e,"cRLIssuer",E.defaultValues("cRLIssuer"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"distributionPoint":return[];case"reasons":return new i.b;case"cRLIssuer":return[];default:throw new Error("Invalid member name for DistributionPoint class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.f({value:[new i.g({name:e.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.u({name:e.distributionPointNames||"",value:l.schema()})]}),new i.g({name:e.distributionPoint||"",optional:!0,idBlock:{tagClass:3,tagNumber:1},value:o.schema().valueBlock.value})]})]}),new i.r({name:e.reasons||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new i.g({name:e.cRLIssuer||"",optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new i.u({name:e.cRLIssuerNames||"",value:l.schema()})]})]})}fromSchema(e){if(Object(s.c)(e,["distributionPoint","distributionPointNames","reasons","cRLIssuer","cRLIssuerNames"]),!1===(e=i.D(e,e,E.schema({names:{distributionPoint:"distributionPoint",distributionPointNames:"distributionPointNames",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuerNames:"cRLIssuerNames"}}))).verified)throw new Error("Object's schema was not verified against input data for DistributionPoint");"distributionPoint"in e.result&&(0===e.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(e.result.distributionPointNames,e=>new l({schema:e}))),1===e.result.distributionPoint.idBlock.tagNumber)&&(this.distributionPoint=new o({schema:new i.v({value:e.result.distributionPoint.valueBlock.value})})),"reasons"in e.result&&(this.reasons=new i.b({valueHex:e.result.reasons.valueBlock.valueHex})),"cRLIssuer"in e.result&&(this.cRLIssuer=Array.from(e.result.cRLIssuerNames,e=>new l({schema:e})))}toSchema(){var e=[];if("distributionPoint"in this){let t;t=this.distributionPoint instanceof Array?new i.g({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,e=>e.toSchema())}):new i.g({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return"reasons"in this&&e.push(new i.r({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHex})),"cRLIssuer"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,e=>e.toSchema())})),new i.v({value:e})}toJSON(){var e={};return"distributionPoint"in this&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,e=>e.toJSON()):e.distributionPoint=this.distributionPoint.toJSON()),"reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this&&(e.cRLIssuer=Array.from(this.cRLIssuer,e=>e.toJSON())),e}}class k{constructor(e={}){this.distributionPoints=Object(s.e)(e,"distributionPoints",k.defaultValues("distributionPoints")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("distributionPoints"!==e)throw new Error("Invalid member name for CRLDistributionPoints class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.distributionPoints||"",value:E.schema()})]})}fromSchema(e){if(Object(s.c)(e,["distributionPoints"]),!1===(e=i.D(e,e,k.schema({names:{distributionPoints:"distributionPoints"}}))).verified)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");this.distributionPoints=Array.from(e.result.distributionPoints,e=>new E({schema:e}))}toSchema(){return new i.v({value:Array.from(this.distributionPoints,e=>e.toSchema())})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,e=>e.toJSON())}}}class I{constructor(e={}){this.policyQualifierId=Object(s.e)(e,"policyQualifierId",I.defaultValues("policyQualifierId")),this.qualifier=Object(s.e)(e,"qualifier",I.defaultValues("qualifier")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"policyQualifierId":return"";case"qualifier":return new i.a;default:throw new Error("Invalid member name for PolicyQualifierInfo class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.policyQualifierId||""}),new i.a({name:e.qualifier||""})]})}fromSchema(e){if(Object(s.c)(e,["policyQualifierId","qualifier"]),!1===(e=i.D(e,e,I.schema({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}))).verified)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=e.result.policyQualifierId.valueBlock.toString(),this.qualifier=e.result.qualifier}toSchema(){return new i.v({value:[new i.p({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}class _{constructor(e={}){this.policyIdentifier=Object(s.e)(e,"policyIdentifier",_.defaultValues("policyIdentifier")),"policyQualifiers"in e&&(this.policyQualifiers=Object(s.e)(e,"policyQualifiers",_.defaultValues("policyQualifiers"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"policyIdentifier":return"";case"policyQualifiers":return[];default:throw new Error("Invalid member name for PolicyInformation class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.policyIdentifier||""}),new i.v({optional:!0,value:[new i.u({name:e.policyQualifiers||"",value:I.schema()})]})]})}fromSchema(e){if(Object(s.c)(e,["policyIdentifier","policyQualifiers"]),!1===(e=i.D(e,e,_.schema({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}))).verified)throw new Error("Object's schema was not verified against input data for PolicyInformation");this.policyIdentifier=e.result.policyIdentifier.valueBlock.toString(),"policyQualifiers"in e.result&&(this.policyQualifiers=Array.from(e.result.policyQualifiers,e=>new I({schema:e})))}toSchema(){var e=[];return e.push(new i.p({value:this.policyIdentifier})),"policyQualifiers"in this&&e.push(new i.v({value:Array.from(this.policyQualifiers,e=>e.toSchema())})),new i.v({value:e})}toJSON(){var e={policyIdentifier:this.policyIdentifier};return"policyQualifiers"in this&&(e.policyQualifiers=Array.from(this.policyQualifiers,e=>e.toJSON())),e}}class B{constructor(e={}){this.certificatePolicies=Object(s.e)(e,"certificatePolicies",B.defaultValues("certificatePolicies")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("certificatePolicies"!==e)throw new Error("Invalid member name for CertificatePolicies class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.certificatePolicies||"",value:_.schema()})]})}fromSchema(e){if(Object(s.c)(e,["certificatePolicies"]),!1===(e=i.D(e,e,B.schema({names:{certificatePolicies:"certificatePolicies"}}))).verified)throw new Error("Object's schema was not verified against input data for CertificatePolicies");this.certificatePolicies=Array.from(e.result.certificatePolicies,e=>new _({schema:e}))}toSchema(){return new i.v({value:Array.from(this.certificatePolicies,e=>e.toSchema())})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,e=>e.toJSON())}}}class N{constructor(e={}){this.issuerDomainPolicy=Object(s.e)(e,"issuerDomainPolicy",N.defaultValues("issuerDomainPolicy")),this.subjectDomainPolicy=Object(s.e)(e,"subjectDomainPolicy",N.defaultValues("subjectDomainPolicy")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuerDomainPolicy":case"subjectDomainPolicy":return"";default:throw new Error("Invalid member name for PolicyMapping class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.issuerDomainPolicy||""}),new i.p({name:e.subjectDomainPolicy||""})]})}fromSchema(e){if(Object(s.c)(e,["issuerDomainPolicy","subjectDomainPolicy"]),!1===(e=i.D(e,e,N.schema({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}))).verified)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=e.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=e.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new i.v({value:[new i.p({value:this.issuerDomainPolicy}),new i.p({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}class C{constructor(e={}){this.mappings=Object(s.e)(e,"mappings",C.defaultValues("mappings")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("mappings"!==e)throw new Error("Invalid member name for PolicyMappings class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.mappings||"",value:N.schema()})]})}fromSchema(e){if(Object(s.c)(e,["mappings"]),!1===(e=i.D(e,e,C.schema({names:{mappings:"mappings"}}))).verified)throw new Error("Object's schema was not verified against input data for PolicyMappings");this.mappings=Array.from(e.result.mappings,e=>new N({schema:e}))}toSchema(){return new i.v({value:Array.from(this.mappings,e=>e.toSchema())})}toJSON(){return{mappings:Array.from(this.mappings,e=>e.toJSON())}}}class O{constructor(e={}){"keyIdentifier"in e&&(this.keyIdentifier=Object(s.e)(e,"keyIdentifier",O.defaultValues("keyIdentifier"))),"authorityCertIssuer"in e&&(this.authorityCertIssuer=Object(s.e)(e,"authorityCertIssuer",O.defaultValues("authorityCertIssuer"))),"authorityCertSerialNumber"in e&&(this.authorityCertSerialNumber=Object(s.e)(e,"authorityCertSerialNumber",O.defaultValues("authorityCertSerialNumber"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"keyIdentifier":return new i.q;case"authorityCertIssuer":return[];case"authorityCertSerialNumber":return new i.m;default:throw new Error("Invalid member name for AuthorityKeyIdentifier class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.r({name:e.keyIdentifier||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.u({name:e.authorityCertIssuer||"",value:l.schema()})]}),new i.r({name:e.authorityCertSerialNumber||"",optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){if(Object(s.c)(e,["keyIdentifier","authorityCertIssuer","authorityCertSerialNumber"]),!1===(e=i.D(e,e,O.schema({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}))).verified)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");"keyIdentifier"in e.result&&(this.keyIdentifier=new i.q({valueHex:e.result.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in e.result&&(this.authorityCertIssuer=Array.from(e.result.authorityCertIssuer,e=>new l({schema:e}))),"authorityCertSerialNumber"in e.result&&(this.authorityCertSerialNumber=new i.m({valueHex:e.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){var e=[];return"keyIdentifier"in this&&e.push(new i.r({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHex})),"authorityCertIssuer"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,e=>e.toSchema())})),"authorityCertSerialNumber"in this&&e.push(new i.r({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHex})),new i.v({value:e})}toJSON(){var e={};return"keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,e=>e.toJSON())),"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}class x{constructor(e={}){"requireExplicitPolicy"in e&&(this.requireExplicitPolicy=Object(s.e)(e,"requireExplicitPolicy",x.defaultValues("requireExplicitPolicy"))),"inhibitPolicyMapping"in e&&(this.inhibitPolicyMapping=Object(s.e)(e,"inhibitPolicyMapping",x.defaultValues("inhibitPolicyMapping"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"requireExplicitPolicy":case"inhibitPolicyMapping":return 0;default:throw new Error("Invalid member name for PolicyConstraints class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.r({name:e.requireExplicitPolicy||"",optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new i.r({name:e.inhibitPolicyMapping||"",optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){var t;if(Object(s.c)(e,["requireExplicitPolicy","inhibitPolicyMapping"]),!1===(e=i.D(e,e,x.schema({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}))).verified)throw new Error("Object's schema was not verified against input data for PolicyConstraints");"requireExplicitPolicy"in e.result&&((t=e.result.requireExplicitPolicy).idBlock.tagClass=1,t.idBlock.tagNumber=2,t=t.toBER(!1),t=i.E(t),this.requireExplicitPolicy=t.result.valueBlock.valueDec),"inhibitPolicyMapping"in e.result&&((t=e.result.inhibitPolicyMapping).idBlock.tagClass=1,t.idBlock.tagNumber=2,e=t.toBER(!1),t=i.E(e),this.inhibitPolicyMapping=t.result.valueBlock.valueDec)}toSchema(){var e,t=[];return"requireExplicitPolicy"in this&&((e=new i.m({value:this.requireExplicitPolicy})).idBlock.tagClass=3,e.idBlock.tagNumber=0,t.push(e)),"inhibitPolicyMapping"in this&&((e=new i.m({value:this.inhibitPolicyMapping})).idBlock.tagClass=3,e.idBlock.tagNumber=1,t.push(e)),new i.v({value:t})}toJSON(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}class j{constructor(e={}){this.keyPurposes=Object(s.e)(e,"keyPurposes",j.defaultValues("keyPurposes")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("keyPurposes"!==e)throw new Error("Invalid member name for ExtKeyUsage class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.keyPurposes||"",value:new i.p})]})}fromSchema(e){if(Object(s.c)(e,["keyPurposes"]),!1===(e=i.D(e,e,j.schema({names:{keyPurposes:"keyPurposes"}}))).verified)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");this.keyPurposes=Array.from(e.result.keyPurposes,e=>e.valueBlock.toString())}toSchema(){return new i.v({value:Array.from(this.keyPurposes,e=>new i.p({value:e}))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}class T{constructor(e={}){this.accessDescriptions=Object(s.e)(e,"accessDescriptions",T.defaultValues("accessDescriptions")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("accessDescriptions"!==e)throw new Error("Invalid member name for InfoAccess class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.accessDescriptions||"",value:u.schema()})]})}fromSchema(e){if(Object(s.c)(e,["accessDescriptions"]),!1===(e=i.D(e,e,T.schema({names:{accessDescriptions:"accessDescriptions"}}))).verified)throw new Error("Object's schema was not verified against input data for InfoAccess");this.accessDescriptions=Array.from(e.result.accessDescriptions,e=>new u({schema:e}))}toSchema(){return new i.v({value:Array.from(this.accessDescriptions,e=>e.toSchema())})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,e=>e.toJSON())}}}class P{constructor(e={}){if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&0<e.length){if(this.length=e.length,e.stub)for(let t=0;t<this._view.length;t++)this._view[t]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){var t=e.length;this.length=t;for(let r=0;r<t;r++)this.view[r]=e.charCodeAt(r)}toString(e=0,t=this.view.length-e){let r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let n=e;n<e+t;n++)r+=String.fromCharCode(this.view[n]);return r}fromHexString(e){var t=e.length,r=(this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer),new Map);r.set("0",0),r.set("1",1),r.set("2",2),r.set("3",3),r.set("4",4),r.set("5",5),r.set("6",6),r.set("7",7),r.set("8",8),r.set("9",9),r.set("A",10),r.set("a",10),r.set("B",11),r.set("b",11),r.set("C",12),r.set("c",12),r.set("D",13),r.set("d",13),r.set("E",14),r.set("e",14),r.set("F",15),r.set("f",15);let n=0,i=0;for(let s=0;s<t;s++)s%2?(i|=r.get(e.charAt(s)),this.view[n]=i,n++):i=r.get(e.charAt(s))<<4}toHexString(e=0,t=this.view.length-e){let r="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let i=e;i<e+t;i++){var n=this.view[i].toString(16).toUpperCase();r=r+(1==n.length?"0":"")+n}return r}copy(e=0,t=this.length-e){if(!e&&!this.length)return new P;if(e<0||e>this.length-1)throw new Error("Wrong start position: "+e);return new P({buffer:this._buffer.slice(e,e+t)})}slice(e=0,t=this.length){if(!e&&!this.length)return new P;if(e<0||e>this.length-1)throw new Error("Wrong start position: "+e);return new P({buffer:this._buffer.slice(e,t)})}realloc(e){var t=new ArrayBuffer(e),r=new Uint8Array(t);e>this._view.length?r.set(this._view):r.set(new Uint8Array(this._buffer,0,e)),this._buffer=t,this._view=new Uint8Array(this._buffer)}append(e){var t=this.length,r=e.length;e=e._view.subarray();this.realloc(t+r),this._view.set(e,t)}insert(e,t=0,r=this.length-t){return!(t>this.length-1||((r=(r=r>this.length-t?this.length-t:r)>e.length?e.length:r)==e.length?this._view.set(e._view,t):this._view.set(e._view.subarray(0,r),t),0))}isEqual(e){if(this.length!=e.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t,r,n){var{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n),o=e.length;if(!(s<o)){var l=[];for(let t=0;t<o;t++)l.push(e.view[t]);for(let e=0;e<=s-o;e++){let t=!0;var u=a?i-o-e:i+e;for(let e=0;e<o;e++)if(this.view[e+u]!=l[e]){t=!1;break}if(t)return a?i-o-e:i+o+e}}return-1}findFirstIn(e,t,r,n){var{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n),o={id:-1,position:a?0:i+s,length:0};for(let t=0;t<e.length;t++){var l=this.findPattern(e[t],i,s,a);if(-1!=l){let r=!1;var u=e[t].length;a?o.position-o.length<=l-u&&(r=!0):l-u<=o.position-o.length&&(r=!0),r&&(o.position=l,o.id=t,o.length=u)}}return o}findAllIn(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);var s=[];let a={id:-1,position:n};for(;;){var o=a.position;if(-1==(a=this.findFirstIn(e,a.position,i)).id)break;i-=a.position-o,s.push({id:a.id,position:a.position})}return s}findAllPatternIn(e,t,r){var{start:n,length:i}=this.prepareFindParameters(t,r),s=[],a=e.length;if(i<a)return-1;var o=Array.from(e.view);for(let e=0;e<=i-a;e++){let t=!0;var l=n+e;for(let e=0;e<a;e++)if(this.view[e+l]!=o[e]){t=!1;break}t&&(s.push(n+a+e),e+=a-1)}return s}findFirstNotIn(e,t,r,n){let{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);var o={left:{id:-1,position:i},right:{id:-1,position:0},value:new P};let l=s;for(;0<l;){if(o.right=this.findFirstIn(e,a?i-s+l:i+s-l,l,a),-1==o.right.id){s=l,a?i-=s:i=o.left.position,o.value=new P({buffer:this._buffer.slice(i,i+s)});break}if(o.right.position!=(a?o.left.position-e[o.right.id].length:o.left.position+e[o.right.id].length)){s=a?(i=o.right.position+e[o.right.id].length,o.left.position-o.right.position-e[o.right.id].length):(i=o.left.position,o.right.position-o.left.position-e[o.right.id].length),o.value=new P({buffer:this._buffer.slice(i,i+s)});break}o.left=o.right,l-=e[o.right.id].length}return a&&(t=o.right,o.right=o.left,o.left=t),o}findAllNotIn(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);var s=[];let a={left:{id:-1,position:n},right:{id:-1,position:n},value:new P};do{var o=a.right.position;a=this.findFirstNotIn(e,a.right.position,i),i-=a.right.position-o,s.push({left:{id:a.left.id,position:a.left.position},right:{id:a.right.id,position:a.right.position},value:a.value})}while(-1!=a.right.id);return s}findFirstSequence(e,t,r,n){let{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);return-1==(t=this.skipNotPatterns(e,i,s,a))?{position:-1,value:new P}:(r=this.skipPatterns(e,t,s-(a?i-t:t-i),a),s=a?t-(i=r):r-(i=t),{position:r,value:new P({buffer:this._buffer.slice(i,i+s)})})}findAllSequences(e,t,r){let{start:n,length:i}=this.prepareFindParameters(t,r);var s=[];let a={position:n,value:new P};do{var o=a.position;-1!=(a=this.findFirstSequence(e,a.position,i)).position&&(i-=a.position-o,s.push({position:a.position,value:a.value}))}while(-1!=a.position);return s}findPairedPatterns(e,t,r,n){var i=[];if(!e.isEqual(t)){var{start:r,length:n}=this.prepareFindParameters(r,n);let o=0;var s=this.findAllPatternIn(e,r,n);if(Array.isArray(s)&&0!=s.length){var a=this.findAllPatternIn(t,r,n);if(Array.isArray(a)&&0!=a.length){for(;o<s.length&&0!=a.length;)if(s[0]==a[0])i.push({left:s[0],right:a[0]}),s.splice(0,1),a.splice(0,1);else{if(s[o]>a[0])break;for(;s[o]<a[0]&&!(++o>=s.length););i.push({left:s[o-1],right:a[0]}),s.splice(o-1,1),a.splice(0,1),o=0}i.sort((e,t)=>e.left-t.left)}}}return i}findPairedArrays(e,t,r,n){var{start:r,length:n}=this.prepareFindParameters(r,n),i=[];let s=0;var a=this.findAllIn(e,r,n);if(0!=a.length){var o=this.findAllIn(t,r,n);if(0!=o.length){for(;s<a.length&&0!=o.length;)if(a[0].position==o[0].position)i.push({left:a[0],right:o[0]}),a.splice(0,1),o.splice(0,1);else{if(a[s].position>o[0].position)break;for(;a[s].position<o[0].position&&!(++s>=a.length););i.push({left:a[s-1],right:o[0]}),a.splice(s-1,1),o.splice(0,1),s=0}i.sort((e,t)=>e.left.position-t.left.position)}}return i}replacePattern(e,t,r,n,i=null){let s,a=[];var o={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:l,length:r}=this.prepareFindParameters(r,n);if(null==i){if(0==(a=this.findAllIn([e],l,r)).length)return o}else a=i;o.searchPatternPositions.push(...Array.from(a,e=>e.position));var u=e.length-t.length,c=(n=new ArrayBuffer(this.view.length-a.length*u),new Uint8Array(n));for(c.set(new Uint8Array(this.buffer,0,l)),s=0;s<a.length;s++){var h=0==s?l:a[s-1].position;c.set(new Uint8Array(this.buffer,h,a[s].position-e.length-h),h-s*u),c.set(t.view,a[s].position-e.length-s*u),o.replacePatternPositions.push(a[s].position-e.length-s*u)}return s--,c.set(new Uint8Array(this.buffer,a[s].position,this.length-a[s].position),a[s].position-e.length+t.length-s*u),this.buffer=n,this.view=new Uint8Array(this.buffer),o.status=1,o}skipPatterns(e,t,r,n){var{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);let o=i;for(let t=0;t<e.length;t++){var l=e[t].length,u=a?o-l:o;let r=!0;for(let n=0;n<l;n++)if(this.view[n+u]!=e[t].view[n]){r=!1;break}if(r)if(t=-1,a){if((o-=l)<=0)return o}else if((o+=l)>=i+s)return o}return o}skipNotPatterns(e,t,r,n){var{start:i,length:s,backward:a}=this.prepareFindParameters(t,r,n);let o=-1;for(let t=0;t<s;t++){for(let r=0;r<e.length;r++){var l=e[r].length,u=a?i-t-l:i+t;let n=!0;for(let t=0;t<l;t++)if(this.view[t+u]!=e[r].view[t]){n=!1;break}if(n){o=a?i-t:i+t;break}}if(-1!=o)break}return o}prepareFindParameters(e=null,t=null,r=!1){return(e=null===e?r?this.length:0:e)>this.length&&(e=this.length),r?e<(t=null===t?e:t)&&(t=e):(t=null===t?this.length-e:t)>this.length-e&&(t=this.length-e),{start:e,length:t,backward:r}}}class D{constructor(e={}){this._stream=new P,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in e?new P({view:e.view}):"buffer"in e?new P({buffer:e.buffer}):"string"in e?new P({string:e.string}):"hexstring"in e?new P({hexstring:e.hexstring}):"stream"in e?e.stream.slice():new P,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&0<e.length&&(this._length=e.length),"start"in e&&e.start&&0<e.start&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&0<e.appendBlock&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e,t=null){(null==t||t>this.length)&&(t=this.length);var r=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1!=r){if(this.backward){if(r<this.start-e.length-t)return-1}else if(r>this.start+e.length+t)return-1;this.start=r}return r}findFirstIn(e,t=null){(null==t||t>this.length)&&(t=this.length);var r=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1!=r.id){if(this.backward){if(r.position<this.start-e[r.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(r.position>this.start+e[r.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};this.start=r.position}return r}findAllIn(e){var t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e,t=null){(null==t||t>this._length)&&(t=this._length);var r=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1!=r.left.id||-1!=r.right.id){if(this.backward){if(-1!=r.right.id&&r.right.position<this._start-e[r.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new P}}else if(-1!=r.left.id&&r.left.position>this._start+e[r.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new P};this.backward?-1==r.left.id?this.start=0:this.start=r.left.position:-1==r.right.id?this.start=this._start+this._length:this.start=r.right.position}return r}findAllNotIn(e){var t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e,t=null,r=null){if((null==t||t>this._length)&&(t=this._length),(null==r||t<r)&&(r=t),0!=(e=this._stream.findFirstSequence(e,this._start,t,this.backward)).value.length){if(this.backward){if(e.position<this._start-e.value.length-r)return{position:-1,value:new P}}else if(e.position>this._start+e.value.length+r)return{position:-1,value:new P};this.start=e.position}return e}findAllSequences(e){var t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t,r=null){(null==r||r>this.length)&&(r=this.length);var n=this.backward?this.start-this.length:this.start;if((n=this.stream.findPairedPatterns(e,t,n,this.length)).length)if(this.backward){if(n[0].right<this.start-t.length-r)return[]}else if(n[0].left>this.start+e.length+r)return[];return n}findPairedArrays(e,t,r=null){(null==r||r>this.length)&&(r=this.length);var n=this.backward?this.start-this.length:this.start;if((n=this.stream.findPairedArrays(e,t,n,this.length)).length)if(this.backward){if(n[0].right.position<this.start-t[n[0].right.id].length-r)return[]}else if(n[0].left.position>this.start+e[n[0].left.id].length+r)return[];return n}replacePattern(e,t){var r=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,r,this.length)}skipPatterns(e){return e=this.stream.skipPatterns(e,this.start,this.length,this.backward),this.start=e}skipNotPatterns(e){return-1==(e=this.stream.skipNotPatterns(e,this.start,this.length,this.backward))?-1:this.start=e}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2),e=new Uint16Array([e]),e=new Uint8Array(e.buffer),this.stream.view[this._start]=e[1],this._stream.view[this._start+1]=e[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3),e=new Uint32Array([e]),e=new Uint8Array(e.buffer),this._stream.view[this._start]=e[2],this._stream.view[this._start+1]=e[1],this._stream.view[this._start+2]=e[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4),e=new Uint32Array([e]),e=new Uint8Array(e.buffer),this._stream.view[this._start]=e[3],this._stream.view[this._start+1]=e[2],this._stream.view[this._start+2]=e[1],this._stream.view[this._start+3]=e[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2),e=new Int16Array([e]),e=new Uint8Array(e.buffer),this._stream.view[this._start]=e[1],this._stream.view[this._start+1]=e[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4),e=new Int32Array([e]),e=new Uint8Array(e.buffer),this._stream.view[this._start]=e[3],this._stream.view[this._start+1]=e[2],this._stream.view[this._start+2]=e[1],this._stream.view[this._start+3]=e[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e,t=!0){if(this._length<=0)return new Uint8Array(0);let r;if(this._length<e&&(e=this._length),this.backward){var n=this._stream.view.subarray(this._length-e,this._length);r=new Uint8Array(e);for(let t=0;t<e;t++)r[e-1-t]=n[t]}else r=this._stream.view.subarray(this._start,this._start+e);return t&&(this.start+=this.backward?-1*e:e),r}getUint16(e=!0){var t,r;return(e=this.getBlock(2,e)).length<2?0:(t=new Uint16Array(1),(r=new Uint8Array(t.buffer))[0]=e[1],r[1]=e[0],t[0])}getInt16(e=!0){var t,r;return(e=this.getBlock(2,e)).length<2?0:(t=new Int16Array(1),(r=new Uint8Array(t.buffer))[0]=e[1],r[1]=e[0],t[0])}getUint24(e=!0){var t=this.getBlock(3,e);if(t.length<3)return 0;e=new Uint32Array(1);var r=new Uint8Array(e.buffer);for(let e=3;1<=e;e--)r[3-e]=t[e-1];return e[0]}getUint32(e=!0){var t=this.getBlock(4,e);if(t.length<4)return 0;e=new Uint32Array(1);var r=new Uint8Array(e.buffer);for(let e=3;0<=e;e--)r[3-e]=t[e];return e[0]}getInt32(e=!0){var t=this.getBlock(4,e);if(t.length<4)return 0;e=new Int32Array(1);var r=new Uint8Array(e.buffer);for(let e=3;0<=e;e--)r[3-e]=t[e];return e[0]}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+D.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}D.APPEND_BLOCK=1e3;class R{constructor(e={}){this.version=Object(s.e)(e,"version",R.defaultValues("version")),this.logID=Object(s.e)(e,"logID",R.defaultValues("logID")),this.timestamp=Object(s.e)(e,"timestamp",R.defaultValues("timestamp")),this.extensions=Object(s.e)(e,"extensions",R.defaultValues("extensions")),this.hashAlgorithm=Object(s.e)(e,"hashAlgorithm",R.defaultValues("hashAlgorithm")),this.signatureAlgorithm=Object(s.e)(e,"signatureAlgorithm",R.defaultValues("signatureAlgorithm")),this.signature=Object(s.e)(e,"signature",R.defaultValues("signature")),"schema"in e&&this.fromSchema(e.schema),"stream"in e&&this.fromStream(e.stream)}static defaultValues(e){switch(e){case"version":return 0;case"logID":case"extensions":return new ArrayBuffer(0);case"timestamp":return new Date(0);case"hashAlgorithm":case"signatureAlgorithm":return"";case"signature":return new i.a;default:throw new Error("Invalid member name for SignedCertificateTimestamp class: "+e)}}fromSchema(e){if(e instanceof i.t==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");e=new D({stream:new P({buffer:e.data})}),this.fromStream(e)}fromStream(e){var t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(Object(s.o)(new Uint8Array(e.getBlock(8)),8));var r=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(r)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm="none";break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm="sha1";break;case 3:this.hashAlgorithm="sha224";break;case 4:this.hashAlgorithm="sha256";break;case 5:this.hashAlgorithm="sha384";break;case 6:this.hashAlgorithm="sha512";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm="anonymous";break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm="ecdsa";break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}var n=e.getUint16();e=new Uint8Array(e.getBlock(n)).buffer.slice(0);if(-1===(e=i.E(e)).offset)throw new Error("Object's stream was not correct for SignedCertificateTimestamp");if(this.signature=e.result,t!==47+r+n)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){var e=this.toStream();return new i.t({data:e.stream.buffer})}toStream(){var e=new D,t=(e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecode.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID)),new ArrayBuffer(8)),r=(t=new Uint8Array(t),Object(s.p)(this.timestamp.valueOf(),8));let n,i;switch(t.set(new Uint8Array(r),8-r.byteLength),e.appendView(t),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case"none":n=0;break;case"md5":n=1;break;case"sha1":n=2;break;case"sha224":n=3;break;case"sha256":n=4;break;case"sha384":n=5;break;case"sha512":n=6;break;default:throw new Error("Incorrect data for hashAlgorithm: "+this.hashAlgorithm)}switch(e.appendChar(n),this.signatureAlgorithm.toLowerCase()){case"anonymous":i=0;break;case"rsa":i=1;break;case"dsa":i=2;break;case"ecdsa":i=3;break;default:throw new Error("Incorrect data for signatureAlgorithm: "+this.signatureAlgorithm)}return e.appendChar(i),r=this.signature.toBER(!1),e.appendUint16(r.byteLength),e.appendView(new Uint8Array(r)),e}toJSON(){return{version:this.version,logID:Object(s.b)(this.logID),timestamp:this.timestamp,extensions:Object(s.b)(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t,r=0){var a=Object(s.j)(Object(s.a)(this.logID));let o=null;var l=new D;for(const t of e)if(t.log_id===a){o=t.key;break}if(null===o)throw new Error("Public key not found for CT with logId: "+a);if(-1===(e=i.E(Object(s.i)(Object(s.d)(o)))).offset)throw new Error("Incorrect key value for CT Log with logId: "+a);e=new p.a({schema:e.result}),l.appendChar(0),l.appendChar(0);var u=new ArrayBuffer(8),c=(u=new Uint8Array(u),Object(s.p)(this.timestamp.valueOf(),8));return u.set(new Uint8Array(c),8-c.byteLength),l.appendView(u),l.appendUint16(r),0===r&&l.appendUint24(t.byteLength),l.appendView(new Uint8Array(t)),l.appendUint16(this.extensions.byteLength),0!==this.extensions.byteLength&&l.appendView(new Uint8Array(this.extensions)),Object(n.e)().subtle.verifyWithPublicKey(l._stream._buffer.slice(0,l._length),{valueBlock:{valueHex:this.signature.toBER(!1)}},e,{algorithmId:""},"SHA-256")}}class U{constructor(e={}){this.timestamps=Object(s.e)(e,"timestamps",U.defaultValues("timestamps")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("timestamps"!==e)throw new Error("Invalid member name for SignedCertificateTimestampList class: "+e);return[]}static compareWithDefault(e,t){if("timestamps"!==e)throw new Error("Invalid member name for SignedCertificateTimestampList class: "+e);return 0===t.length}static schema(e={}){return"optional"in(e=Object(s.e)(e,"names",{}))==0&&(e.optional=!1),new i.q({name:e.blockName||"SignedCertificateTimestampList",optional:e.optional})}fromSchema(e){if(e instanceof i.q==0)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");var t=new D({stream:new P({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new R({stream:t}))}toSchema(){var e=new D;let t=0;var r=[];for(const e of this.timestamps){var n=e.toStream();r.push(n),t+=n.stream.buffer.byteLength}e.appendUint16(t);for(const t of r)e.appendView(t.stream.view);return new i.q({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,e=>e.toJSON())}}}class L{constructor(e={}){this.templateID=Object(s.e)(e,"templateID",L.defaultValues("templateID")),"templateMajorVersion"in e&&(this.templateMajorVersion=Object(s.e)(e,"templateMajorVersion",L.defaultValues("templateMajorVersion"))),"templateMinorVersion"in e&&(this.templateMinorVersion=Object(s.e)(e,"templateMinorVersion",L.defaultValues("templateMinorVersion"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"templateID":return"";case"templateMajorVersion":case"templateMinorVersion":return 0;default:throw new Error("Invalid member name for CertificateTemplate class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.templateID||""}),new i.m({name:e.templateMajorVersion||"",optional:!0}),new i.m({name:e.templateMinorVersion||"",optional:!0})]})}fromSchema(e){if(Object(s.c)(e,["templateID","templateMajorVersion","templateMinorVersion"]),!1===(e=i.D(e,e,L.schema({names:{templateID:"templateID",templateMajorVersion:"templateMajorVersion",templateMinorVersion:"templateMinorVersion"}}))).verified)throw new Error("Object's schema was not verified against input data for CertificateTemplate");this.templateID=e.result.templateID.valueBlock.toString(),"templateMajorVersion"in e.result&&(this.templateMajorVersion=e.result.templateMajorVersion.valueBlock.valueDec),"templateMinorVersion"in e.result&&(this.templateMinorVersion=e.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){var e=[];return e.push(new i.p({value:this.templateID})),"templateMajorVersion"in this&&e.push(new i.m({value:this.templateMajorVersion})),"templateMinorVersion"in this&&e.push(new i.m({value:this.templateMinorVersion})),new i.v({value:e})}toJSON(){var e={extnID:this.templateID};return"templateMajorVersion"in this&&(e.templateMajorVersion=this.templateMajorVersion),"templateMinorVersion"in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}class V{constructor(e={}){this.certificateIndex=Object(s.e)(e,"certificateIndex",V.defaultValues("certificateIndex")),this.keyIndex=Object(s.e)(e,"keyIndex",V.defaultValues("keyIndex")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certificateIndex":case"keyIndex":return 0;default:throw new Error("Invalid member name for CAVersion class: "+e)}}static schema(e=0){return new i.m}fromSchema(e){if(e.constructor.blockName()!==i.m.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);var r=new Uint8Array(t);switch(!0){case t.byteLength<4:var n=new ArrayBuffer(4);new Uint8Array(n).set(r,4-t.byteLength),t=n.slice(0);break;case 4<t.byteLength:n=new ArrayBuffer(4),new Uint8Array(n).set(r.slice(0,4)),t=n.slice(0)}e=t.slice(0,2);var s=(a=new Uint8Array(e))[0],a=(a[0]=a[1],a[1]=s,new Uint16Array(e));this.keyIndex=a[0],e=t.slice(2),s=(a=new Uint8Array(e))[0],a[0]=a[1],a[1]=s,a=new Uint16Array(e);this.certificateIndex=a[0]}toSchema(){var e=new ArrayBuffer(2),t=(r=(new Uint16Array(e)[0]=this.certificateIndex,new Uint8Array(e)))[0],r=(r[0]=r[1],r[1]=t,new ArrayBuffer(2)),n=(new Uint16Array(r)[0]=this.keyIndex,new Uint8Array(r));t=n[0];return n[0]=n[1],n[1]=t,new i.m({valueHex:Object(s.k)(r,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}class M{constructor(e={}){this.id=Object(s.e)(e,"id",M.defaultValues("id")),"type"in e&&(this.type=Object(s.e)(e,"type",M.defaultValues("type"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"id":return"";case"type":return new i.n;default:throw new Error("Invalid member name for QCStatement class: "+e)}}static compareWithDefault(e,t){switch(e){case"id":return""===t;case"type":return t instanceof i.n;default:throw new Error("Invalid member name for QCStatement class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.id||""}),new i.a({name:e.type||"",optional:!0})]})}fromSchema(e){if(Object(s.c)(e,["id","type"]),!1===(e=i.D(e,e,M.schema({names:{id:"id",type:"type"}}))).verified)throw new Error("Object's schema was not verified against input data for QCStatement");this.id=e.result.id.valueBlock.toString(),"type"in e.result&&(this.type=e.result.type)}toSchema(){var e=[new i.p({value:this.id})];return"type"in this&&e.push(this.type),new i.v({value:e})}toJSON(){var e={id:this.id};return"type"in this&&(e.type=this.type.toJSON()),e}}class H{constructor(e={}){this.values=Object(s.e)(e,"values",H.defaultValues("values")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("values"!==e)throw new Error("Invalid member name for QCStatements class: "+e);return[]}static compareWithDefault(e,t){if("values"!==e)throw new Error("Invalid member name for QCStatements class: "+e);return 0===t.length}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.u({name:e.values||"",value:M.schema(e.value||{})})]})}fromSchema(e){if(Object(s.c)(e,["values"]),!1===(e=i.D(e,e,H.schema({names:{values:"values"}}))).verified)throw new Error("Object's schema was not verified against input data for QCStatements");this.values=Array.from(e.result.values,e=>new M({schema:e}))}toSchema(){return new i.v({value:Array.from(this.values,e=>e.toSchema())})}toJSON(){return{extensions:Array.from(this.values,e=>e.toJSON())}}}class F{constructor(e={}){this.extnID=Object(s.e)(e,"extnID",F.defaultValues("extnID")),this.critical=Object(s.e)(e,"critical",F.defaultValues("critical")),this.extnValue="extnValue"in e?new i.q({valueHex:e.extnValue}):F.defaultValues("extnValue"),"parsedValue"in e&&(this.parsedValue=Object(s.e)(e,"parsedValue",F.defaultValues("parsedValue"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"extnID":return"";case"critical":return!1;case"extnValue":return new i.q;case"parsedValue":return{};default:throw new Error("Invalid member name for Extension class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.extnID||""}),new i.d({name:e.critical||"",optional:!0}),new i.q({name:e.extnValue||""})]})}fromSchema(e){Object(s.c)(e,["extnID","critical","extnValue"]);let t=i.D(e,e,F.schema({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(!1===t.verified)throw new Error("Object's schema was not verified against input data for Extension");if(this.extnID=t.result.extnID.valueBlock.toString(),"critical"in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue,-1!==(t=i.E(this.extnValue.valueBlock.valueHex)).offset)switch(this.extnID){case"2.5.29.9":try{this.parsedValue=new g({schema:t.result})}catch(e){this.parsedValue=new g,this.parsedValue.parsingError="Incorrectly formated SubjectDirectoryAttributes"}break;case"2.5.29.14":case"2.5.29.15":this.parsedValue=t.result;break;case"2.5.29.16":try{this.parsedValue=new b({schema:t.result})}catch(e){this.parsedValue=new b,this.parsedValue.parsingError="Incorrectly formated PrivateKeyUsagePeriod"}break;case"2.5.29.17":case"2.5.29.18":try{this.parsedValue=new f({schema:t.result})}catch(e){this.parsedValue=new f,this.parsedValue.parsingError="Incorrectly formated AltName"}break;case"2.5.29.19":try{this.parsedValue=new y({schema:t.result})}catch(e){this.parsedValue=new y,this.parsedValue.parsingError="Incorrectly formated BasicConstraints"}break;case"2.5.29.20":case"2.5.29.27":case"2.5.29.21":case"2.5.29.24":this.parsedValue=t.result;break;case"2.5.29.28":try{this.parsedValue=new v({schema:t.result})}catch(e){this.parsedValue=new v,this.parsedValue.parsingError="Incorrectly formated IssuingDistributionPoint"}break;case"2.5.29.29":try{this.parsedValue=new w({schema:t.result})}catch(e){this.parsedValue=new w,this.parsedValue.parsingError="Incorrectly formated GeneralNames"}break;case"2.5.29.30":try{this.parsedValue=new A({schema:t.result})}catch(e){this.parsedValue=new A,this.parsedValue.parsingError="Incorrectly formated NameConstraints"}break;case"2.5.29.31":case"2.5.29.46":try{this.parsedValue=new k({schema:t.result})}catch(e){this.parsedValue=new k,this.parsedValue.parsingError="Incorrectly formated CRLDistributionPoints"}break;case"2.5.29.32":case"1.3.6.1.4.1.311.21.10":try{this.parsedValue=new B({schema:t.result})}catch(e){this.parsedValue=new B,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.33":try{this.parsedValue=new C({schema:t.result})}catch(e){this.parsedValue=new C,this.parsedValue.parsingError="Incorrectly formated CertificatePolicies"}break;case"2.5.29.35":try{this.parsedValue=new O({schema:t.result})}catch(e){this.parsedValue=new O,this.parsedValue.parsingError="Incorrectly formated AuthorityKeyIdentifier"}break;case"2.5.29.36":try{this.parsedValue=new x({schema:t.result})}catch(e){this.parsedValue=new x,this.parsedValue.parsingError="Incorrectly formated PolicyConstraints"}break;case"2.5.29.37":try{this.parsedValue=new j({schema:t.result})}catch(e){this.parsedValue=new j,this.parsedValue.parsingError="Incorrectly formated ExtKeyUsage"}break;case"2.5.29.54":this.parsedValue=t.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":try{this.parsedValue=new T({schema:t.result})}catch(e){this.parsedValue=new T,this.parsedValue.parsingError="Incorrectly formated InfoAccess"}break;case"1.3.6.1.4.1.11129.2.4.2":try{this.parsedValue=new U({schema:t.result})}catch(e){this.parsedValue=new U,this.parsedValue.parsingError="Incorrectly formated SignedCertificateTimestampList"}break;case"1.3.6.1.4.1.311.20.2":case"1.3.6.1.4.1.311.21.2":this.parsedValue=t.result;break;case"1.3.6.1.4.1.311.21.7":try{this.parsedValue=new L({schema:t.result})}catch(e){this.parsedValue=new L,this.parsedValue.parsingError="Incorrectly formated CertificateTemplate"}break;case"1.3.6.1.4.1.311.21.1":try{this.parsedValue=new V({schema:t.result})}catch(e){this.parsedValue=new V,this.parsedValue.parsingError="Incorrectly formated CAVersion"}break;case"1.3.6.1.5.5.7.1.3":try{this.parsedValue=new H({schema:t.result})}catch(e){this.parsedValue=new H,this.parsedValue.parsingError="Incorrectly formated QCStatements"}}}toSchema(){var e=[];return e.push(new i.p({value:this.extnID})),this.critical!==F.defaultValues("critical")&&e.push(new i.d({value:this.critical})),e.push(this.extnValue),new i.v({value:e})}toJSON(){var e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==F.defaultValues("critical")&&(e.critical=this.critical),"parsedValue"in this&&"toJSON"in this.parsedValue&&(e.parsedValue=this.parsedValue.toJSON()),e}}class K{constructor(e={}){this.extensions=Object(s.e)(e,"extensions",K.defaultValues("extensions")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("extensions"!==e)throw new Error("Invalid member name for Extensions class: "+e);return[]}static schema(e={},t=!1){return e=Object(s.e)(e,"names",{}),new i.v({optional:t,name:e.blockName||"",value:[new i.u({name:e.extensions||"",value:F.schema(e.extension||{})})]})}fromSchema(e){if(Object(s.c)(e,["extensions"]),!1===(e=i.D(e,e,K.schema({names:{extensions:"extensions"}}))).verified)throw new Error("Object's schema was not verified against input data for Extensions");this.extensions=Array.from(e.result.extensions,e=>new F({schema:e}))}toSchema(){return new i.v({value:Array.from(this.extensions,e=>e.toSchema())})}toJSON(){return{extensions:Array.from(this.extensions,e=>e.toJSON())}}}class J{constructor(e={}){this.tbs=Object(s.e)(e,"tbs",J.defaultValues("tbs")),this.version=Object(s.e)(e,"version",J.defaultValues("version")),this.serialNumber=Object(s.e)(e,"serialNumber",J.defaultValues("serialNumber")),this.signature=Object(s.e)(e,"signature",J.defaultValues("signature")),this.issuer=Object(s.e)(e,"issuer",J.defaultValues("issuer")),this.notBefore=Object(s.e)(e,"notBefore",J.defaultValues("notBefore")),this.notAfter=Object(s.e)(e,"notAfter",J.defaultValues("notAfter")),this.subject=Object(s.e)(e,"subject",J.defaultValues("subject")),this.subjectPublicKeyInfo=Object(s.e)(e,"subjectPublicKeyInfo",J.defaultValues("subjectPublicKeyInfo")),"issuerUniqueID"in e&&(this.issuerUniqueID=Object(s.e)(e,"issuerUniqueID",J.defaultValues("issuerUniqueID"))),"subjectUniqueID"in e&&(this.subjectUniqueID=Object(s.e)(e,"subjectUniqueID",J.defaultValues("subjectUniqueID"))),"extensions"in e&&(this.extensions=Object(s.e)(e,"extensions",J.defaultValues("extensions"))),this.signatureAlgorithm=Object(s.e)(e,"signatureAlgorithm",J.defaultValues("signatureAlgorithm")),this.signatureValue=Object(s.e)(e,"signatureValue",J.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 0;case"serialNumber":return new i.m;case"signature":return new h.a;case"issuer":return new o;case"notBefore":case"notAfter":return new m;case"subject":return new o;case"subjectPublicKeyInfo":return new p.a;case"issuerUniqueID":case"subjectUniqueID":return new ArrayBuffer(0);case"extensions":return[];case"signatureAlgorithm":return new h.a;case"signatureValue":return new i.b;default:throw new Error("Invalid member name for Certificate class: "+e)}}static schema(e={}){var t;e=Object(s.e)(e,"names",{});return new i.v({name:e.blockName||"",value:[([t={}]=[e.tbsCertificate],t=Object(s.e)(t,"names",{}),new i.v({name:t.blockName||"tbsCertificate",value:[new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.m({name:t.tbsCertificateVersion||"tbsCertificate.version"})]}),new i.m({name:t.tbsCertificateSerialNumber||"tbsCertificate.serialNumber"}),h.a.schema(t.signature||{names:{blockName:"tbsCertificate.signature"}}),o.schema(t.issuer||{names:{blockName:"tbsCertificate.issuer"}}),new i.v({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[m.schema(t.notBefore||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),m.schema(t.notAfter||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),o.schema(t.subject||{names:{blockName:"tbsCertificate.subject"}}),p.a.schema(t.subjectPublicKeyInfo||{names:{blockName:"tbsCertificate.subjectPublicKeyInfo"}}),new i.r({name:t.tbsCertificateIssuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new i.r({name:t.tbsCertificateSubjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[K.schema(t.extensions||{names:{blockName:"tbsCertificate.extensions"}})]})]})),h.a.schema(e.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new i.b({name:e.signatureValue||"signatureValue"})]})}fromSchema(e){if(Object(s.c)(e,["tbsCertificate","tbsCertificate.extensions","tbsCertificate.version","tbsCertificate.serialNumber","tbsCertificate.signature","tbsCertificate.issuer","tbsCertificate.notBefore","tbsCertificate.notAfter","tbsCertificate.subject","tbsCertificate.subjectPublicKeyInfo","tbsCertificate.issuerUniqueID","tbsCertificate.subjectUniqueID","signatureAlgorithm","signatureValue"]),!1===(e=i.D(e,e,J.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}))).verified)throw new Error("Object's schema was not verified against input data for Certificate");this.tbs=e.result.tbsCertificate.valueBeforeDecode,"tbsCertificate.version"in e.result&&(this.version=e.result["tbsCertificate.version"].valueBlock.valueDec),this.serialNumber=e.result["tbsCertificate.serialNumber"],this.signature=new h.a({schema:e.result["tbsCertificate.signature"]}),this.issuer=new o({schema:e.result["tbsCertificate.issuer"]}),this.notBefore=new m({schema:e.result["tbsCertificate.notBefore"]}),this.notAfter=new m({schema:e.result["tbsCertificate.notAfter"]}),this.subject=new o({schema:e.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new p.a({schema:e.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in e.result&&(this.issuerUniqueID=e.result["tbsCertificate.issuerUniqueID"].valueBlock.valueHex),"tbsCertificate.subjectUniqueID"in e.result&&(this.subjectUniqueID=e.result["tbsCertificate.subjectUniqueID"].valueBlock.valueHex),"tbsCertificate.extensions"in e.result&&(this.extensions=Array.from(e.result["tbsCertificate.extensions"],e=>new F({schema:e}))),this.signatureAlgorithm=new h.a({schema:e.result.signatureAlgorithm}),this.signatureValue=e.result.signatureValue}encodeTBS(){var e=[];return"version"in this&&this.version!==J.defaultValues("version")&&e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.m({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new i.v({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&e.push(new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),"subjectUniqueID"in this&&e.push(new i.r({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),"extensions"in this&&e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new i.v({value:Array.from(this.extensions,e=>e.toSchema())})]})),new i.v({value:e})}toSchema(e=!1){let t={};if(!1===e){if(0===this.tbs.length)return J.schema().value[0];t=i.E(this.tbs).result}else t=this.encodeTBS();return new i.v({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){var e={tbs:Object(s.b)(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return"version"in this&&this.version!==J.defaultValues("version")&&(e.version=this.version),"issuerUniqueID"in this&&(e.issuerUniqueID=Object(s.b)(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(e.subjectUniqueID=Object(s.b)(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this&&(e.extensions=Array.from(this.extensions,e=>e.toJSON())),e}getPublicKey(e=null){return Object(n.e)().subtle.getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}getKeyHash(e="SHA-1"){var t=Object(n.d)();return void 0===t?Promise.reject("Unable to create WebCrypto object"):t.digest({name:e},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex))}sign(e,t="SHA-1"){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let r,s=Promise.resolve();const a=Object(n.e)();return(s=(s=(s=(s=s.then(()=>a.subtle.getSignatureParameters(e,t))).then(e=>{r=e.parameters,this.signature=e.signatureAlgorithm,this.signatureAlgorithm=e.signatureAlgorithm})).then(()=>{this.tbs=this.encodeTBS().toBER(!1)})).then(()=>a.subtle.signWithPrivateKey(this.tbs,e,r))).then(e=>{this.signatureValue=new i.b({valueHex:e})})}verify(e=null){let t={};return null!==e?t=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(t=this.subjectPublicKeyInfo),t instanceof p.a==0?Promise.reject("Please provide issuer certificate as a parameter"):Object(n.e)().subtle.verifyWithPublicKey(this.tbs,this.signatureValue,t,this.signatureAlgorithm)}}class q{constructor(e={}){this.notBeforeTime=Object(s.e)(e,"notBeforeTime",q.defaultValues("notBeforeTime")),this.notAfterTime=Object(s.e)(e,"notAfterTime",q.defaultValues("notAfterTime")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"notBeforeTime":case"notAfterTime":return new Date(0,0,0);default:throw new Error("Invalid member name for AttCertValidityPeriod class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.j({name:e.notBeforeTime||""}),new i.j({name:e.notAfterTime||""})]})}fromSchema(e){if(Object(s.c)(e,["notBeforeTime","notAfterTime"]),!1===(e=i.D(e,e,q.schema({names:{notBeforeTime:"notBeforeTime",notAfterTime:"notAfterTime"}}))).verified)throw new Error("Object's schema was not verified against input data for AttCertValidityPeriod");this.notBeforeTime=e.result.notBeforeTime.toDate(),this.notAfterTime=e.result.notAfterTime.toDate()}toSchema(){return new i.v({value:[new i.j({valueDate:this.notBeforeTime}),new i.j({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}class W{constructor(e={}){this.issuer=Object(s.e)(e,"issuer",W.defaultValues("issuer")),this.serialNumber=Object(s.e)(e,"serialNumber",W.defaultValues("serialNumber")),"issuerUID"in e&&(this.issuerUID=Object(s.e)(e,"issuerUID",W.defaultValues("issuerUID"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuer":return new w;case"serialNumber":return new i.m;case"issuerUID":return new i.b;default:throw new Error("Invalid member name for IssuerSerial class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[w.schema(e.issuer||{}),new i.m({name:e.serialNumber||""}),new i.b({optional:!0,name:e.issuerUID||""})]})}fromSchema(e){if(Object(s.c)(e,["issuer","serialNumber","issuerUID"]),!1===(e=i.D(e,e,W.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber",issuerUID:"issuerUID"}}))).verified)throw new Error("Object's schema was not verified against input data for IssuerSerial");this.issuer=new w({schema:e.result.issuer}),this.serialNumber=e.result.serialNumber,"issuerUID"in e.result&&(this.issuerUID=e.result.issuerUID)}toSchema(){var e=new i.v({value:[this.issuer.toSchema(),this.serialNumber]});return"issuerUID"in this&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){var e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return"issuerUID"in this&&(e.issuerUID=this.issuerUID.toJSON()),e}}class G{constructor(e={}){this.version=Object(s.e)(e,"version",G.defaultValues("version")),"baseCertificateID"in e&&(this.baseCertificateID=Object(s.e)(e,"baseCertificateID",G.defaultValues("baseCertificateID"))),"subjectName"in e&&(this.subjectName=Object(s.e)(e,"subjectName",G.defaultValues("subjectName"))),this.issuer=Object(s.e)(e,"issuer",G.defaultValues("issuer")),this.signature=Object(s.e)(e,"signature",G.defaultValues("signature")),this.serialNumber=Object(s.e)(e,"serialNumber",G.defaultValues("serialNumber")),this.attrCertValidityPeriod=Object(s.e)(e,"attrCertValidityPeriod",G.defaultValues("attrCertValidityPeriod")),this.attributes=Object(s.e)(e,"attributes",G.defaultValues("attributes")),"issuerUniqueID"in e&&(this.issuerUniqueID=Object(s.e)(e,"issuerUniqueID",G.defaultValues("issuerUniqueID"))),"extensions"in e&&(this.extensions=Object(s.e)(e,"extensions",G.defaultValues("extensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"baseCertificateID":return new W;case"subjectName":return new w;case"issuer":return{};case"signature":return new h.a;case"serialNumber":return new i.m;case"attrCertValidityPeriod":return new q;case"attributes":return[];case"issuerUniqueID":return new i.b;case"extensions":return new K;default:throw new Error("Invalid member name for AttributeCertificateInfoV1 class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.m({name:e.version||""}),new i.f({value:[new i.g({name:e.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:W.schema().valueBlock.value}),new i.g({name:e.subjectName||"",idBlock:{tagClass:3,tagNumber:1},value:w.schema().valueBlock.value})]}),w.schema({names:{blockName:e.issuer||""}}),h.a.schema(e.signature||{}),new i.m({name:e.serialNumber||""}),q.schema(e.attrCertValidityPeriod||{}),new i.v({name:e.attributes||"",value:[new i.u({value:d.a.schema()})]}),new i.b({optional:!0,name:e.issuerUniqueID||""}),K.schema(e.extensions||{},!0)]})}fromSchema(e){if(Object(s.c)(e,["version","baseCertificateID","subjectName","issuer","signature","serialNumber","attrCertValidityPeriod","attributes","issuerUniqueID","extensions"]),!1===(e=i.D(e,e,G.schema({names:{version:"version",baseCertificateID:"baseCertificateID",subjectName:"subjectName",issuer:"issuer",signature:{names:{blockName:"signature"}},serialNumber:"serialNumber",attrCertValidityPeriod:{names:{blockName:"attrCertValidityPeriod"}},attributes:"attributes",issuerUniqueID:"issuerUniqueID",extensions:{names:{blockName:"extensions"}}}}))).verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateInfoV1");this.version=e.result.version.valueBlock.valueDec,"baseCertificateID"in e.result&&(this.baseCertificateID=new W({schema:new i.v({value:e.result.baseCertificateID.valueBlock.value})})),"subjectName"in e.result&&(this.subjectName=new w({schema:new i.v({value:e.result.subjectName.valueBlock.value})})),this.issuer=e.result.issuer,this.signature=new h.a({schema:e.result.signature}),this.serialNumber=e.result.serialNumber,this.attrCertValidityPeriod=new q({schema:e.result.attrCertValidityPeriod}),this.attributes=Array.from(e.result.attributes.valueBlock.value,e=>new d.a({schema:e})),"issuerUniqueID"in e.result&&(this.issuerUniqueID=e.result.issuerUniqueID),"extensions"in e.result&&(this.extensions=new K({schema:e.result.extensions}))}toSchema(){var e=new i.v({value:[new i.m({value:this.version})]});return"baseCertificateID"in this&&e.valueBlock.value.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"subjectName"in this&&e.valueBlock.value.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new i.v({value:Array.from(this.attributes,e=>e.toSchema())})),"issuerUniqueID"in this&&e.valueBlock.value.push(this.issuerUniqueID),"extensions"in this&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){var e={version:this.version};return"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"subjectName"in this&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,e=>e.toJSON()),"issuerUniqueID"in this&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),"extensions"in this&&(e.extensions=this.extensions.toJSON()),e}}class ${constructor(e={}){this.acinfo=Object(s.e)(e,"acinfo",$.defaultValues("acinfo")),this.signatureAlgorithm=Object(s.e)(e,"signatureAlgorithm",$.defaultValues("signatureAlgorithm")),this.signatureValue=Object(s.e)(e,"signatureValue",$.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"acinfo":return new G;case"signatureAlgorithm":return new h.a;case"signatureValue":return new i.b;default:throw new Error("Invalid member name for AttributeCertificateV1 class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[G.schema(e.acinfo||{}),h.a.schema(e.signatureAlgorithm||{}),new i.b({name:e.signatureValue||""})]})}fromSchema(e){if(Object(s.c)(e,["acinfo","signatureValue","signatureAlgorithm"]),!1===(e=i.D(e,e,$.schema({names:{acinfo:{names:{blockName:"acinfo"}},signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signatureValue:"signatureValue"}}))).verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateV1");this.acinfo=new G({schema:e.result.acinfo}),this.signatureAlgorithm=new h.a({schema:e.result.signatureAlgorithm}),this.signatureValue=e.result.signatureValue}toSchema(){return new i.v({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}class Y{constructor(e={}){this.digestedObjectType=Object(s.e)(e,"digestedObjectType",Y.defaultValues("digestedObjectType")),"otherObjectTypeID"in e&&(this.otherObjectTypeID=Object(s.e)(e,"otherObjectTypeID",Y.defaultValues("otherObjectTypeID"))),this.digestAlgorithm=Object(s.e)(e,"digestAlgorithm",Y.defaultValues("digestAlgorithm")),this.objectDigest=Object(s.e)(e,"objectDigest",Y.defaultValues("objectDigest")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"digestedObjectType":return new i.h;case"otherObjectTypeID":return new i.p;case"digestAlgorithm":return new h.a;case"objectDigest":return new i.b;default:throw new Error("Invalid member name for ObjectDigestInfo class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.h({name:e.digestedObjectType||""}),new i.p({optional:!0,name:e.otherObjectTypeID||""}),h.a.schema(e.digestAlgorithm||{}),new i.b({name:e.objectDigest||""})]})}fromSchema(e){if(Object(s.c)(e,["digestedObjectType","otherObjectTypeID","digestAlgorithm","objectDigest"]),!1===(e=i.D(e,e,Y.schema({names:{digestedObjectType:"digestedObjectType",otherObjectTypeID:"otherObjectTypeID",digestAlgorithm:{names:{blockName:"digestAlgorithm"}},objectDigest:"objectDigest"}}))).verified)throw new Error("Object's schema was not verified against input data for ObjectDigestInfo");this.digestedObjectType=e.result.digestedObjectType,"otherObjectTypeID"in e.result&&(this.otherObjectTypeID=e.result.otherObjectTypeID),this.digestAlgorithm=new h.a({schema:e.result.digestAlgorithm}),this.objectDigest=e.result.objectDigest}toSchema(){var e=new i.v({value:[this.digestedObjectType]});return"otherObjectTypeID"in this&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){var e={digestedObjectType:this.digestedObjectType.toJSON()};return"otherObjectTypeID"in this&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e.digestAlgorithm=this.digestAlgorithm.toJSON(),e.objectDigest=this.objectDigest.toJSON(),e}}class z{constructor(e={}){"issuerName"in e&&(this.issuerName=Object(s.e)(e,"issuerName",z.defaultValues("issuerName"))),"baseCertificateID"in e&&(this.baseCertificateID=Object(s.e)(e,"baseCertificateID",z.defaultValues("baseCertificateID"))),"objectDigestInfo"in e&&(this.objectDigestInfo=Object(s.e)(e,"objectDigestInfo",z.defaultValues("objectDigestInfo"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuerName":return new w;case"baseCertificateID":return new W;case"objectDigestInfo":return new Y;default:throw new Error("Invalid member name for V2Form class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[w.schema({names:{blockName:e.issuerName}},!0),new i.g({optional:!0,name:e.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:W.schema().valueBlock.value}),new i.g({optional:!0,name:e.objectDigestInfo||"",idBlock:{tagClass:3,tagNumber:1},value:Y.schema().valueBlock.value})]})}fromSchema(e){if(Object(s.c)(e,["issuerName","baseCertificateID","objectDigestInfo"]),!1===(e=i.D(e,e,z.schema({names:{issuerName:"issuerName",baseCertificateID:"baseCertificateID",objectDigestInfo:"objectDigestInfo"}}))).verified)throw new Error("Object's schema was not verified against input data for V2Form");"issuerName"in e.result&&(this.issuerName=new w({schema:e.result.issuerName})),"baseCertificateID"in e.result&&(this.baseCertificateID=new W({schema:new i.v({value:e.result.baseCertificateID.valueBlock.value})})),"objectDigestInfo"in e.result&&(this.objectDigestInfo=new Y({schema:new i.v({value:e.result.objectDigestInfo.valueBlock.value})}))}toSchema(){var e=new i.v;return"issuerName"in this&&e.valueBlock.value.push(this.issuerName.toSchema()),"baseCertificateID"in this&&e.valueBlock.value.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"objectDigestInfo"in this&&e.valueBlock.value.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){var e={};return"issuerName"in this&&(e.issuerName=this.issuerName.toJSON()),"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"objectDigestInfo"in this&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}class X{constructor(e={}){"baseCertificateID"in e&&(this.baseCertificateID=Object(s.e)(e,"baseCertificateID",X.defaultValues("baseCertificateID"))),"entityName"in e&&(this.entityName=Object(s.e)(e,"entityName",X.defaultValues("entityName"))),"objectDigestInfo"in e&&(this.objectDigestInfo=Object(s.e)(e,"objectDigestInfo",X.defaultValues("objectDigestInfo"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"baseCertificateID":return new W;case"entityName":return new w;case"objectDigestInfo":return new Y;default:throw new Error("Invalid member name for Holder class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.g({optional:!0,name:e.baseCertificateID||"",idBlock:{tagClass:3,tagNumber:0},value:W.schema().valueBlock.value}),new i.g({optional:!0,name:e.entityName||"",idBlock:{tagClass:3,tagNumber:1},value:w.schema().valueBlock.value}),new i.g({optional:!0,name:e.objectDigestInfo||"",idBlock:{tagClass:3,tagNumber:2},value:Y.schema().valueBlock.value})]})}fromSchema(e){if(Object(s.c)(e,["baseCertificateID","entityName","objectDigestInfo"]),!1===(e=i.D(e,e,X.schema({names:{baseCertificateID:"baseCertificateID",entityName:"entityName",objectDigestInfo:"objectDigestInfo"}}))).verified)throw new Error("Object's schema was not verified against input data for Holder");"baseCertificateID"in e.result&&(this.baseCertificateID=new W({schema:new i.v({value:e.result.baseCertificateID.valueBlock.value})})),"entityName"in e.result&&(this.entityName=new w({schema:new i.v({value:e.result.entityName.valueBlock.value})})),"objectDigestInfo"in e.result&&(this.objectDigestInfo=new Y({schema:new i.v({value:e.result.objectDigestInfo.valueBlock.value})}))}toSchema(){var e=new i.v;return"baseCertificateID"in this&&e.valueBlock.value.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),"entityName"in this&&e.valueBlock.value.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),"objectDigestInfo"in this&&e.valueBlock.value.push(new i.g({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){var e={};return"baseCertificateID"in this&&(e.baseCertificateID=this.baseCertificateID.toJSON()),"entityName"in this&&(e.entityName=this.entityName.toJSON()),"objectDigestInfo"in this&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}class Q{constructor(e={}){this.version=Object(s.e)(e,"version",Q.defaultValues("version")),this.holder=Object(s.e)(e,"holder",Q.defaultValues("holder")),this.issuer=Object(s.e)(e,"issuer",Q.defaultValues("issuer")),this.signature=Object(s.e)(e,"signature",Q.defaultValues("signature")),this.serialNumber=Object(s.e)(e,"serialNumber",Q.defaultValues("serialNumber")),this.attrCertValidityPeriod=Object(s.e)(e,"attrCertValidityPeriod",Q.defaultValues("attrCertValidityPeriod")),this.attributes=Object(s.e)(e,"attributes",Q.defaultValues("attributes")),"issuerUniqueID"in e&&(this.issuerUniqueID=Object(s.e)(e,"issuerUniqueID",Q.defaultValues("issuerUniqueID"))),"extensions"in e&&(this.extensions=Object(s.e)(e,"extensions",Q.defaultValues("extensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 1;case"holder":return new X;case"issuer":return{};case"signature":return new h.a;case"serialNumber":return new i.m;case"attrCertValidityPeriod":return new q;case"attributes":return[];case"issuerUniqueID":return new i.b;case"extensions":return new K;default:throw new Error("Invalid member name for AttributeCertificateInfoV2 class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.m({name:e.version||""}),X.schema(e.holder||{}),new i.f({value:[w.schema({names:{blockName:e.issuer||""}}),new i.g({name:e.issuer||"",idBlock:{tagClass:3,tagNumber:0},value:z.schema().valueBlock.value})]}),h.a.schema(e.signature||{}),new i.m({name:e.serialNumber||""}),q.schema(e.attrCertValidityPeriod||{}),new i.v({name:e.attributes||"",value:[new i.u({value:d.a.schema()})]}),new i.b({optional:!0,name:e.issuerUniqueID||""}),K.schema(e.extensions||{},!0)]})}fromSchema(e){if(Object(s.c)(e,["version","holder","issuer","signature","serialNumber","attrCertValidityPeriod","attributes","issuerUniqueID","extensions"]),!1===(e=i.D(e,e,Q.schema({names:{version:"version",holder:{names:{blockName:"holder"}},issuer:"issuer",signature:{names:{blockName:"signature"}},serialNumber:"serialNumber",attrCertValidityPeriod:{names:{blockName:"attrCertValidityPeriod"}},attributes:"attributes",issuerUniqueID:"issuerUniqueID",extensions:{names:{blockName:"extensions"}}}}))).verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateInfoV2");if(this.version=e.result.version.valueBlock.valueDec,this.holder=new X({schema:e.result.holder}),3!==e.result.issuer.idBlock.tagClass)throw new Error("Incorect value for 'issuer' in AttributeCertificateInfoV2");this.issuer=new z({schema:new i.v({value:e.result.issuer.valueBlock.value})}),this.signature=new h.a({schema:e.result.signature}),this.serialNumber=e.result.serialNumber,this.attrCertValidityPeriod=new q({schema:e.result.attrCertValidityPeriod}),this.attributes=Array.from(e.result.attributes.valueBlock.value,e=>new d.a({schema:e})),"issuerUniqueID"in e.result&&(this.issuerUniqueID=e.result.issuerUniqueID),"extensions"in e.result&&(this.extensions=new K({schema:e.result.extensions}))}toSchema(){var e=new i.v({value:[new i.m({value:this.version}),this.holder.toSchema(),new i.g({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new i.v({value:Array.from(this.attributes,e=>e.toSchema())})]});return"issuerUniqueID"in this&&e.valueBlock.value.push(this.issuerUniqueID),"extensions"in this&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){var e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,e=>e.toJSON())};return"issuerUniqueID"in this&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),"extensions"in this&&(e.extensions=this.extensions.toJSON()),e}}class Z{constructor(e={}){this.acinfo=Object(s.e)(e,"acinfo",Z.defaultValues("acinfo")),this.signatureAlgorithm=Object(s.e)(e,"signatureAlgorithm",Z.defaultValues("signatureAlgorithm")),this.signatureValue=Object(s.e)(e,"signatureValue",Z.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"acinfo":return new Q;case"signatureAlgorithm":return new h.a;case"signatureValue":return new i.b;default:throw new Error("Invalid member name for AttributeCertificateV2 class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[Q.schema(e.acinfo||{}),h.a.schema(e.signatureAlgorithm||{}),new i.b({name:e.signatureValue||""})]})}fromSchema(e){if(Object(s.c)(e,["acinfo","signatureAlgorithm","signatureValue"]),!1===(e=i.D(e,e,Z.schema({names:{acinfo:{names:{blockName:"acinfo"}},signatureAlgorithm:{names:{blockName:"signatureAlgorithm"}},signatureValue:"signatureValue"}}))).verified)throw new Error("Object's schema was not verified against input data for AttributeCertificateV2");this.acinfo=new Q({schema:e.result.acinfo}),this.signatureAlgorithm=new h.a({schema:e.result.signatureAlgorithm}),this.signatureValue=e.result.signatureValue}toSchema(){return new i.v({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}class ee{constructor(e={}){this.userCertificate=Object(s.e)(e,"userCertificate",ee.defaultValues("userCertificate")),this.revocationDate=Object(s.e)(e,"revocationDate",ee.defaultValues("revocationDate")),"crlEntryExtensions"in e&&(this.crlEntryExtensions=Object(s.e)(e,"crlEntryExtensions",ee.defaultValues("crlEntryExtensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"userCertificate":return new i.m;case"revocationDate":return new m;case"crlEntryExtensions":return new K;default:throw new Error("Invalid member name for RevokedCertificate class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.m({name:e.userCertificate||"userCertificate"}),m.schema({names:{utcTimeName:e.revocationDate||"revocationDate",generalTimeName:e.revocationDate||"revocationDate"}}),K.schema({names:{blockName:e.crlEntryExtensions||"crlEntryExtensions"}},!0)]})}fromSchema(e){if(Object(s.c)(e,["userCertificate","revocationDate","crlEntryExtensions"]),!1===(e=i.D(e,e,ee.schema())).verified)throw new Error("Object's schema was not verified against input data for RevokedCertificate");this.userCertificate=e.result.userCertificate,this.revocationDate=new m({schema:e.result.revocationDate}),"crlEntryExtensions"in e.result&&(this.crlEntryExtensions=new K({schema:e.result.crlEntryExtensions}))}toSchema(){var e=[this.userCertificate,this.revocationDate.toSchema()];return"crlEntryExtensions"in this&&e.push(this.crlEntryExtensions.toSchema()),new i.v({value:e})}toJSON(){var e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};return"crlEntryExtensions"in this&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}class te{constructor(e={}){this.tbs=Object(s.e)(e,"tbs",te.defaultValues("tbs")),this.version=Object(s.e)(e,"version",te.defaultValues("version")),this.signature=Object(s.e)(e,"signature",te.defaultValues("signature")),this.issuer=Object(s.e)(e,"issuer",te.defaultValues("issuer")),this.thisUpdate=Object(s.e)(e,"thisUpdate",te.defaultValues("thisUpdate")),"nextUpdate"in e&&(this.nextUpdate=Object(s.e)(e,"nextUpdate",te.defaultValues("nextUpdate"))),"revokedCertificates"in e&&(this.revokedCertificates=Object(s.e)(e,"revokedCertificates",te.defaultValues("revokedCertificates"))),"crlExtensions"in e&&(this.crlExtensions=Object(s.e)(e,"crlExtensions",te.defaultValues("crlExtensions"))),this.signatureAlgorithm=Object(s.e)(e,"signatureAlgorithm",te.defaultValues("signatureAlgorithm")),this.signatureValue=Object(s.e)(e,"signatureValue",te.defaultValues("signatureValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return new ArrayBuffer(0);case"version":return 1;case"signature":return new h.a;case"issuer":return new o;case"thisUpdate":case"nextUpdate":return new m;case"revokedCertificates":return[];case"crlExtensions":return new K;case"signatureAlgorithm":return new h.a;case"signatureValue":return new i.b;default:throw new Error("Invalid member name for CertificateRevocationList class: "+e)}}static schema(e={}){var t=Object(s.e)(e,"names",{});return new i.v({name:t.blockName||"CertificateList",value:[([e={}]=[e],e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"tbsCertList",value:[new i.m({optional:!0,name:e.tbsCertListVersion||"tbsCertList.version",value:2}),h.a.schema(e.signature||{names:{blockName:"tbsCertList.signature"}}),o.schema(e.issuer||{names:{blockName:"tbsCertList.issuer"}}),m.schema(e.tbsCertListThisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),m.schema(e.tbsCertListNextUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new i.v({optional:!0,value:[new i.u({name:e.tbsCertListRevokedCertificates||"tbsCertList.revokedCertificates",value:new i.v({value:[new i.m,m.schema(),K.schema({},!0)]})})]}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[K.schema(e.crlExtensions||{names:{blockName:"tbsCertList.extensions"}})]})]})),h.a.schema(t.signatureAlgorithm||{names:{blockName:"signatureAlgorithm"}}),new i.b({name:t.signatureValue||"signatureValue"})]})}fromSchema(e){if(Object(s.c)(e,["tbsCertList","tbsCertList.version","tbsCertList.signature","tbsCertList.issuer","tbsCertList.thisUpdate","tbsCertList.nextUpdate","tbsCertList.revokedCertificates","tbsCertList.extensions","signatureAlgorithm","signatureValue"]),!1===(e=i.D(e,e,te.schema())).verified)throw new Error("Object's schema was not verified against input data for CertificateRevocationList");this.tbs=e.result.tbsCertList.valueBeforeDecode,"tbsCertList.version"in e.result&&(this.version=e.result["tbsCertList.version"].valueBlock.valueDec),this.signature=new h.a({schema:e.result["tbsCertList.signature"]}),this.issuer=new o({schema:e.result["tbsCertList.issuer"]}),this.thisUpdate=new m({schema:e.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in e.result&&(this.nextUpdate=new m({schema:e.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in e.result&&(this.revokedCertificates=Array.from(e.result["tbsCertList.revokedCertificates"],e=>new ee({schema:e}))),"tbsCertList.extensions"in e.result&&(this.crlExtensions=new K({schema:e.result["tbsCertList.extensions"]})),this.signatureAlgorithm=new h.a({schema:e.result.signatureAlgorithm}),this.signatureValue=e.result.signatureValue}encodeTBS(){var e=[];return this.version!==te.defaultValues("version")&&e.push(new i.m({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&e.push(this.nextUpdate.toSchema()),"revokedCertificates"in this&&e.push(new i.v({value:Array.from(this.revokedCertificates,e=>e.toSchema())})),"crlExtensions"in this&&e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new i.v({value:e})}toSchema(e=!1){let t;if(!1===e){if(0===this.tbs.length)return te.schema();t=i.E(this.tbs).result}else t=this.encodeTBS();return new i.v({value:[t,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){var e={tbs:Object(s.b)(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==te.defaultValues("version")&&(e.version=this.version),"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this&&(e.revokedCertificates=Array.from(this.revokedCertificates,e=>e.toJSON())),"crlExtensions"in this&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!1!==this.issuer.isEqual(e.issuer)&&"revokedCertificates"in this!=0)for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}sign(e,t="SHA-1"){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let r,s=Promise.resolve();const a=Object(n.e)();return(s=(s=(s=(s=s.then(()=>a.subtle.getSignatureParameters(e,t))).then(e=>{r=e.parameters,this.signature=e.signatureAlgorithm,this.signatureAlgorithm=e.signatureAlgorithm})).then(()=>{this.tbs=this.encodeTBS().toBER(!1)})).then(()=>a.subtle.signWithPrivateKey(this.tbs,e,r))).then(e=>{this.signatureValue=new i.b({valueHex:e})})}verify(e={}){let t=Promise.resolve(),r=-1;const i=Object(n.e)();if("issuerCertificate"in e&&(r=e.issuerCertificate.subjectPublicKeyInfo,!1===this.issuer.isEqual(e.issuerCertificate.subject)))return Promise.resolve(!1);if("subjectPublicKey"in(r="publicKeyInfo"in e?e.publicKeyInfo:r)==0)return Promise.reject("Issuer's certificate must be provided as an input parameter");if("crlExtensions"in this)for(const e of this.crlExtensions.extensions)if(e.critical&&"parsedValue"in e==0)return Promise.resolve(!1);return t.then(()=>i.subtle.verifyWithPublicKey(this.tbs,this.signatureValue,r,this.signatureAlgorithm))}}class re{constructor(e={}){this.otherCertFormat=Object(s.e)(e,"otherCertFormat",re.defaultValues("otherCertFormat")),this.otherCert=Object(s.e)(e,"otherCert",re.defaultValues("otherCert")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"otherCertFormat":return"";case"otherCert":return new i.a;default:throw new Error("Invalid member name for OtherCertificateFormat class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.otherCertFormat||"otherCertFormat"}),new i.a({name:e.otherCert||"otherCert"})]})}fromSchema(e){if(Object(s.c)(e,["otherCertFormat","otherCert"]),!1===(e=i.D(e,e,re.schema())).verified)throw new Error("Object's schema was not verified against input data for OtherCertificateFormat");this.otherCertFormat=e.result.otherCertFormat.valueBlock.toString(),this.otherCert=e.result.otherCert}toSchema(){return new i.v({value:[new i.p({value:this.otherCertFormat}),this.otherCert]})}toJSON(){var e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof i.a||(e.otherCert=this.otherCert.toJSON()),e}}class ne{constructor(e={}){this.certificates=Object(s.e)(e,"certificates",ne.defaultValues("certificates")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){if("certificates"!==e)throw new Error("Invalid member name for Attribute class: "+e);return[]}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.w({name:e.blockName||"",value:[new i.u({name:e.certificates||"certificates",value:new i.f({value:[J.schema(),new i.g({idBlock:{tagClass:3,tagNumber:0},value:[new i.a]}),new i.g({idBlock:{tagClass:3,tagNumber:1},value:[new i.v]}),new i.g({idBlock:{tagClass:3,tagNumber:2},value:Z.schema().valueBlock.value}),new i.g({idBlock:{tagClass:3,tagNumber:3},value:re.schema().valueBlock.value})]})})]})}fromSchema(e){if(Object(s.c)(e,["certificates"]),!1===(e=i.D(e,e,ne.schema())).verified)throw new Error("Object's schema was not verified against input data for CertificateSet");this.certificates=Array.from(e.result.certificates||[],e=>{var t=e.idBlock.tagNumber;if(1===e.idBlock.tagClass)return new J({schema:e});var r=new i.v({value:e.valueBlock.value});switch(t){case 1:return new(1===r.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?Z:$)({schema:r});case 2:return new Z({schema:r});case 3:return new re({schema:r})}return e})}toSchema(){return new i.w({value:Array.from(this.certificates,e=>{switch(!0){case e instanceof J:return e.toSchema();case e instanceof $:return new i.g({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof Z:return new i.g({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof re:return new i.g({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e})})}toJSON(){return{certificates:Array.from(this.certificates,e=>e.toJSON())}}}class ie{constructor(e={}){this.otherRevInfoFormat=Object(s.e)(e,"otherRevInfoFormat",ie.defaultValues("otherRevInfoFormat")),this.otherRevInfo=Object(s.e)(e,"otherRevInfo",ie.defaultValues("otherRevInfo")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"otherRevInfoFormat":return"";case"otherRevInfo":return new i.a;default:throw new Error("Invalid member name for OtherRevocationInfoFormat class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.otherRevInfoFormat||"otherRevInfoFormat"}),new i.a({name:e.otherRevInfo||"otherRevInfo"})]})}fromSchema(e){if(Object(s.c)(e,["otherRevInfoFormat","otherRevInfo"]),!1===(e=i.D(e,e,ie.schema())).verified)throw new Error("Object's schema was not verified against input data for OtherRevocationInfoFormat");this.otherRevInfoFormat=e.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=e.result.otherRevInfo}toSchema(){return new i.v({value:[new i.p({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){var e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof i.a||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}class se{constructor(e={}){this.crls=Object(s.e)(e,"crls",se.defaultValues("crls")),this.otherRevocationInfos=Object(s.e)(e,"otherRevocationInfos",se.defaultValues("otherRevocationInfos")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"crls":case"otherRevocationInfos":return[];default:throw new Error("Invalid member name for RevocationInfoChoices class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.w({name:e.blockName||"",value:[new i.u({name:e.crls||"",value:new i.f({value:[te.schema(),new i.g({idBlock:{tagClass:3,tagNumber:1},value:[new i.p,new i.a]})]})})]})}fromSchema(e){if(Object(s.c)(e,["crls"]),!1===(e=i.D(e,e,se.schema({names:{crls:"crls"}}))).verified)throw new Error("Object's schema was not verified against input data for RevocationInfoChoices");for(const t of e.result.crls)1===t.idBlock.tagClass?this.crls.push(new te({schema:t})):this.otherRevocationInfos.push(new ie({schema:t}))}toSchema(){var e=[];return e.push(...Array.from(this.crls,e=>e.toSchema())),e.push(...Array.from(this.otherRevocationInfos,e=>((e=e.toSchema()).idBlock.tagClass=3,e.idBlock.tagNumber=1,e))),new i.w({value:e})}toJSON(){return{crls:Array.from(this.crls,e=>e.toJSON()),otherRevocationInfos:Array.from(this.otherRevocationInfos,e=>e.toJSON())}}}class ae{constructor(e={}){this.issuer=Object(s.e)(e,"issuer",ae.defaultValues("issuer")),this.serialNumber=Object(s.e)(e,"serialNumber",ae.defaultValues("serialNumber")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"issuer":return new o;case"serialNumber":return new i.m;default:throw new Error("Invalid member name for IssuerAndSerialNumber class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[o.schema(e.issuer||{}),new i.m({name:e.serialNumber||""})]})}fromSchema(e){if(Object(s.c)(e,["issuer","serialNumber"]),!1===(e=i.D(e,e,ae.schema({names:{issuer:{names:{blockName:"issuer"}},serialNumber:"serialNumber"}}))).verified)throw new Error("Object's schema was not verified against input data for IssuerAndSerialNumber");this.issuer=new o({schema:e.result.issuer}),this.serialNumber=e.result.serialNumber}toSchema(){return new i.v({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}r(19);class oe{constructor(e={}){this.hashAlgorithm=Object(s.e)(e,"hashAlgorithm",oe.defaultValues("hashAlgorithm")),this.issuerNameHash=Object(s.e)(e,"issuerNameHash",oe.defaultValues("issuerNameHash")),this.issuerKeyHash=Object(s.e)(e,"issuerKeyHash",oe.defaultValues("issuerKeyHash")),this.serialNumber=Object(s.e)(e,"serialNumber",oe.defaultValues("serialNumber")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"hashAlgorithm":return new h.a;case"issuerNameHash":case"issuerKeyHash":return new i.q;case"serialNumber":return new i.m;default:throw new Error("Invalid member name for CertID class: "+e)}}static compareWithDefault(e,t){switch(e){case"hashAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"issuerNameHash":case"issuerKeyHash":case"serialNumber":return t.isEqual(oe.defaultValues(e));default:throw new Error("Invalid member name for CertID class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[h.a.schema(e.hashAlgorithmObject||{names:{blockName:e.hashAlgorithm||""}}),new i.q({name:e.issuerNameHash||""}),new i.q({name:e.issuerKeyHash||""}),new i.m({name:e.serialNumber||""})]})}fromSchema(e){if(Object(s.c)(e,["hashAlgorithm","issuerNameHash","issuerKeyHash","serialNumber"]),!1===(e=i.D(e,e,oe.schema({names:{hashAlgorithm:"hashAlgorithm",issuerNameHash:"issuerNameHash",issuerKeyHash:"issuerKeyHash",serialNumber:"serialNumber"}}))).verified)throw new Error("Object's schema was not verified against input data for CertID");this.hashAlgorithm=new h.a({schema:e.result.hashAlgorithm}),this.issuerNameHash=e.result.issuerNameHash,this.issuerKeyHash=e.result.issuerKeyHash,this.serialNumber=e.result.serialNumber}toSchema(){return new i.v({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return!this.hashAlgorithm.algorithmId!==e.hashAlgorithm.algorithmId&&!1!==Object(s.f)(this.issuerNameHash.valueBlock.valueHex,e.issuerNameHash.valueBlock.valueHex)&&!1!==Object(s.f)(this.issuerKeyHash.valueBlock.valueHex,e.issuerKeyHash.valueBlock.valueHex)&&!!this.serialNumber.isEqual(e.serialNumber)}createForCertificate(e,t){let r,s=Promise.resolve();const a=Object(n.d)();var o;return void 0===a?Promise.reject("Unable to create WebCrypto object"):"hashAlgorithm"in t==0?Promise.reject('Parameter "hashAlgorithm" is mandatory for "OCSP_REQUEST.createForCertificate"'):""===(o=Object(n.f)({name:t.hashAlgorithm}))?Promise.reject('Incorrect "hashAlgorithm": '+this.hashAlgorithm):(this.hashAlgorithm=new h.a({algorithmId:o,algorithmParams:new i.n}),"issuerCertificate"in t?(r=t.issuerCertificate,this.serialNumber=e.serialNumber,s=(s=s.then(()=>a.digest({name:t.hashAlgorithm},r.subject.toSchema().toBER(!1)),e=>Promise.reject(e))).then(e=>(this.issuerNameHash=new i.q({valueHex:e}),e=r.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex,a.digest({name:t.hashAlgorithm},e)),e=>Promise.reject(e)).then(e=>{this.issuerKeyHash=new i.q({valueHex:e})},e=>Promise.reject(e))):Promise.reject('Parameter "issuerCertificate" is mandatory for "OCSP_REQUEST.createForCertificate"'))}}class le{constructor(e={}){this.certID=Object(s.e)(e,"certID",le.defaultValues("certID")),this.certStatus=Object(s.e)(e,"certStatus",le.defaultValues("certStatus")),this.thisUpdate=Object(s.e)(e,"thisUpdate",le.defaultValues("thisUpdate")),"nextUpdate"in e&&(this.nextUpdate=Object(s.e)(e,"nextUpdate",le.defaultValues("nextUpdate"))),"singleExtensions"in e&&(this.singleExtensions=Object(s.e)(e,"singleExtensions",le.defaultValues("singleExtensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"certID":return new oe;case"certStatus":return{};case"thisUpdate":case"nextUpdate":return new Date(0,0,0);case"singleExtensions":return[];default:throw new Error("Invalid member name for SingleResponse class: "+e)}}static compareWithDefault(e,t){switch(e){case"certID":return oe.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&oe.compareWithDefault("issuerNameHash",t.issuerNameHash)&&oe.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&oe.compareWithDefault("serialNumber",t.serialNumber);case"certStatus":return 0===Object.keys(t).length;case"thisUpdate":case"nextUpdate":return t===le.defaultValues(e);default:throw new Error("Invalid member name for SingleResponse class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[oe.schema(e.certID||{}),new i.f({value:[new i.r({name:e.certStatus||"",idBlock:{tagClass:3,tagNumber:0},lenBlockLength:1}),new i.g({name:e.certStatus||"",idBlock:{tagClass:3,tagNumber:1},value:[new i.j,new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.h]})]}),new i.r({name:e.certStatus||"",idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new i.j({name:e.thisUpdate||""}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.j({name:e.nextUpdate||""})]}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[K.schema(e.singleExtensions||{})]})]})}fromSchema(e){if(Object(s.c)(e,["certID","certStatus","thisUpdate","nextUpdate","singleExtensions"]),!1===(e=i.D(e,e,le.schema({names:{certID:{names:{blockName:"certID"}},certStatus:"certStatus",thisUpdate:"thisUpdate",nextUpdate:"nextUpdate",singleExtensions:{names:{blockName:"singleExtensions"}}}}))).verified)throw new Error("Object's schema was not verified against input data for SingleResponse");this.certID=new oe({schema:e.result.certID}),this.certStatus=e.result.certStatus,this.thisUpdate=e.result.thisUpdate.toDate(),"nextUpdate"in e.result&&(this.nextUpdate=e.result.nextUpdate.toDate()),"singleExtensions"in e.result&&(this.singleExtensions=Array.from(e.result.singleExtensions.valueBlock.value,e=>new F({schema:e})))}toSchema(){var e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new i.j({valueDate:this.thisUpdate})),"nextUpdate"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:[new i.j({valueDate:this.nextUpdate})]})),"singleExtensions"in this&&e.push(new i.v({value:Array.from(this.singleExtensions,e=>e.toSchema())})),new i.v({value:e})}toJSON(){var e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return"nextUpdate"in this&&(e.nextUpdate=this.nextUpdate),"singleExtensions"in this&&(e.singleExtensions=Array.from(this.singleExtensions,e=>e.toJSON())),e}}class ue{constructor(e={}){this.tbs=Object(s.e)(e,"tbs",ue.defaultValues("tbs")),this.responderID=Object(s.e)(e,"responderID",ue.defaultValues("responderID")),this.producedAt=Object(s.e)(e,"producedAt",ue.defaultValues("producedAt")),this.responses=Object(s.e)(e,"responses",ue.defaultValues("responses")),"responseExtensions"in e&&(this.responseExtensions=Object(s.e)(e,"responseExtensions",ue.defaultValues("responseExtensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbs":return new ArrayBuffer(0);case"responderID":return{};case"producedAt":return new Date(0,0,0);case"responses":case"responseExtensions":return[];default:throw new Error("Invalid member name for ResponseData class: "+e)}}static compareWithDefault(e,t){switch(e){case"tbs":return 0===t.byteLength;case"responderID":return 0===Object.keys(t).length;case"producedAt":return t===ue.defaultValues(e);case"responses":case"responseExtensions":return 0===t.length;default:throw new Error("Invalid member name for ResponseData class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"ResponseData",value:[new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.m({name:e.version||"ResponseData.version"})]}),new i.f({value:[new i.g({name:e.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:1},value:[o.schema(e.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new i.g({name:e.responderID||"ResponseData.responderID",idBlock:{tagClass:3,tagNumber:2},value:[new i.q({name:e.ResponseDataByKey||"ResponseData.byKey"})]})]}),new i.j({name:e.producedAt||"ResponseData.producedAt"}),new i.v({value:[new i.u({name:"ResponseData.responses",value:le.schema(e.response||{})})]}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[K.schema(e.extensions||{names:{blockName:"ResponseData.responseExtensions"}})]})]})}fromSchema(e){if(Object(s.c)(e,["ResponseData","ResponseData.version","ResponseData.responderID","ResponseData.producedAt","ResponseData.responses","ResponseData.responseExtensions"]),!1===(e=i.D(e,e,ue.schema())).verified)throw new Error("Object's schema was not verified against input data for ResponseData");this.tbs=e.result.ResponseData.valueBeforeDecode,"ResponseData.version"in e.result&&(this.version=e.result["ResponseData.version"].valueBlock.valueDec),1===e.result["ResponseData.responderID"].idBlock.tagNumber?this.responderID=new o({schema:e.result["ResponseData.responderID"].valueBlock.value[0]}):this.responderID=e.result["ResponseData.responderID"].valueBlock.value[0],this.producedAt=e.result["ResponseData.producedAt"].toDate(),this.responses=Array.from(e.result["ResponseData.responses"],e=>new le({schema:e})),"ResponseData.responseExtensions"in e.result&&(this.responseExtensions=Array.from(e.result["ResponseData.responseExtensions"].valueBlock.value,e=>new F({schema:e})))}toSchema(e=!1){let t;if(!1===e){if(0===this.tbs.length)return ue.schema();t=i.E(this.tbs).result}else e=[],"version"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:[new i.m({value:this.version})]})),this.responderID instanceof o?e.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):e.push(new i.g({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),e.push(new i.j({valueDate:this.producedAt})),e.push(new i.v({value:Array.from(this.responses,e=>e.toSchema())})),"responseExtensions"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:[new i.v({value:Array.from(this.responseExtensions,e=>e.toSchema())})]})),t=new i.v({value:e});return t}toJSON(){var e={};return"version"in this&&(e.version=this.version),"responderID"in this&&(e.responderID=this.responderID),"producedAt"in this&&(e.producedAt=this.producedAt),"responses"in this&&(e.responses=Array.from(this.responses,e=>e.toJSON())),"responseExtensions"in this&&(e.responseExtensions=Array.from(this.responseExtensions,e=>e.toJSON())),e}}class ce{constructor(e={}){this.trustedCerts=Object(s.e)(e,"trustedCerts",this.defaultValues("trustedCerts")),this.certs=Object(s.e)(e,"certs",this.defaultValues("certs")),this.crls=Object(s.e)(e,"crls",this.defaultValues("crls")),this.ocsps=Object(s.e)(e,"ocsps",this.defaultValues("ocsps")),this.checkDate=Object(s.e)(e,"checkDate",this.defaultValues("checkDate")),this.findOrigin=Object(s.e)(e,"findOrigin",this.defaultValues("findOrigin")),this.findIssuer=Object(s.e)(e,"findIssuer",this.defaultValues("findIssuer"))}static defaultFindOrigin(e,t){0===e.tbs.byteLength&&(e.tbs=e.encodeTBS());for(const r of t.certs)if(0===r.tbs.byteLength&&(r.tbs=r.encodeTBS()),Object(s.f)(e.tbs,r.tbs))return"Intermediate Certificates";for(const r of t.trustedCerts)if(0===r.tbs.byteLength&&(r.tbs=r.encodeTBS()),Object(s.f)(e.tbs,r.tbs))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,t){let r=[],n=null,i=null,a=null;if(e.subject.isEqual(e.issuer))try{if(!0===await e.verify())return[e]}catch(t){}if("extensions"in e)for(const t of e.extensions)if("2.5.29.35"===t.extnID){"keyIdentifier"in t.parsedValue?n=t.parsedValue.keyIdentifier:("authorityCertIssuer"in t.parsedValue&&(i=t.parsedValue.authorityCertIssuer),"authorityCertSerialNumber"in t.parsedValue&&(a=t.parsedValue.authorityCertSerialNumber));break}function o(t){if(null!==n&&"extensions"in t){let e=!1;for(const i of t.extensions)if("2.5.29.14"===i.extnID){e=!0,Object(s.f)(i.parsedValue.valueBlock.valueHex,n.valueBlock.valueHex)&&r.push(t);break}if(e)return}let o=!1;null!==a&&(o=t.serialNumber.isEqual(a)),null!==i?t.subject.isEqual(i)&&o&&r.push(t):e.issuer.isEqual(t.subject)&&r.push(t)}for(const e of t.trustedCerts)o(e);for(const e of t.certs)o(e);for(let n=0;n<r.length;n++)try{!1===await e.verify(r[n])&&r.splice(n,1)}catch(t){r.splice(n,1)}return r}defaultValues(e){switch(e){case"trustedCerts":case"certs":case"crls":case"ocsps":return[];case"checkDate":return new Date;case"findOrigin":return ce.defaultFindOrigin;case"findIssuer":return this.defaultFindIssuer;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: "+e)}}async sort(e=!1){const t=[],r=this;async function i(e,t=!1){let r=!1,n=!1,i=!1,s=!1;if("extensions"in e){for(let t=0;t<e.extensions.length;t++){if(!0===e.extensions[t].critical&&"parsedValue"in e.extensions[t]==0)return{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: "+e.extensions[t].extnID};var a;"2.5.29.15"===e.extensions[t].extnID&&(i=!0,4==(4&(a=new Uint8Array(e.extensions[t].parsedValue.valueBlock.valueHex))[0])&&(n=!0),2==(2&a[0]))&&(s=!0),"2.5.29.19"===e.extensions[t].extnID&&"cA"in e.extensions[t].parsedValue&&!0===e.extensions[t].parsedValue.cA&&(r=!0)}if(!0===n&&!1===r)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'};if(!0===i&&!0===r&&!1===n)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===r&&!0===i&&t&&!1===s)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===r?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:""}}t.push(...r.trustedCerts),t.push(...r.certs);for(let e=0;e<t.length;e++)for(let r=0;r<t.length;r++)if(e!==r&&Object(s.f)(t[e].tbs,t[r].tbs)){t.splice(r,1),e=0;break}let a;var o=[t[t.length-1]];if(0===(a=await async function e(t){var n=[],i=await r.findIssuer(t,r);if(0===i.length)throw new Error("No valid certificate paths found");for(let r=0;r<i.length;r++)if(Object(s.f)(i[r].tbs,t.tbs))n.push([i[r]]);else{var a=await e(i[r]);for(let e=0;e<a.length;e++){var o=a[e].slice();o.splice(0,0,i[r]),function(e){let t=!0;for(let r=0;r<e.length;r++){for(let n=0;n<e.length;n++)if(n!==r&&e[r]===e[n]){t=!1;break}if(!t)break}return t}(o)?n.push(o):n.push(a[e])}}return n}(t[t.length-1])).length)return{result:!1,resultCode:60,resultMessage:"Unable to find certificate path"};for(let e=0;e<a.length;e++){let t=!1;for(let n=0;n<a[e].length;n++){var l=a[e][n];for(let e=0;e<r.trustedCerts.length;e++)if(Object(s.f)(l.tbs,r.trustedCerts[e].tbs)){t=!0;break}if(t)break}t||(a.splice(e,1),e=0)}if(0===a.length)throw{result:!1,resultCode:97,resultMessage:"No valid certificate paths found"};let u=a[0].length,c=0;for(let e=0;e<a.length;e++)a[e].length<u&&(u=a[e].length,c=e);for(let e=0;e<a[c].length;e++)o.push(a[c][e]);if(!1===(a=await async function(s,a){for(let e=0;e<s.length;e++)if(s[e].notBefore.value>a||s[e].notAfter.value<a)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(s.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let e=s.length-2;0<=e;e--)if(!1===s[e].issuer.isEqual(s[e].subject)&&!1===s[e].issuer.isEqual(s[e+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==r.crls.length||0!==r.ocsps.length)for(let a=0;a<s.length-1;a++){let l=2,u={status:0,statusMessage:""};if(0!==r.ocsps.length)switch(l=await async function(e,t){var i=Object(n.c)(e.signatureAlgorithm.algorithmId);if("name"in i==0)return 1;if("hash"in i==0)return 1;for(let n=0;n<r.ocsps.length;n++){var s=await r.ocsps[n].getCertificateStatus(e,t);if(s.isForCertificate)return 0===s.status?0:1}return 2}(s[a],s[a+1])){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==r.crls.length){if(0===(u=await async function(e){var n=[],i=[],s=[];if(n.push(...t.filter(t=>e.issuer.isEqual(t.subject))),0===n.length)return{status:1,statusMessage:"No certificate's issuers"};if(i.push(...r.crls.filter(t=>t.issuer.isEqual(e.issuer))),0===i.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let e=0;e<i.length;e++)if(!(i[e].nextUpdate.value<r.checkDate))for(let t=0;t<n.length;t++)try{if(await i[e].verify({issuerCertificate:n[t]})){s.push({crl:i[e],certificate:n[t]});break}}catch(e){}return s.length?{status:0,statusMessage:"",result:s}:{status:3,statusMessage:"No valid CRLs found"}}(s[a])).status)for(let e=0;e<u.result.length;e++){if(u.result[e].crl.isCertificateRevoked(s[a]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(await i(u.result[e].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===e)throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: "+u.statusMessage}}else if(2===l)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===l&&2===u.status&&e){var o=s[a+1];let e=!1;if("extensions"in o)for(const t of o.extensions)switch(t.extnID){case"2.5.29.31":case"2.5.29.46":case"1.3.6.1.5.5.7.1.1":e=!0}if(e)throw{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates: "+u.statusMessage}}}for(let e=1;e<s.length;e++)if(!1===(await i(s[e])).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"};return{result:!0}}(o,r.checkDate)).result)throw a;return o}async verify(e={}){function t(e,t){e=Object(n.i)(e),t=Object(n.i)(t);var r=e.split("."),i=t.split("."),s=r.length,a=i.length;if(0===s||0===a||s<a)return!1;for(let e=0;e<s;e++)if(0===r[e].length)return!1;for(let e=0;e<a;e++)if(0===i[e].length){if(0!==e)return!1;if(1===a)return!1}for(let e=0;e<a;e++)if(0!==i[a-1-e].length&&0!==r[s-1-e].localeCompare(i[a-1-e]))return!1;return!0}function r(e,r){e=Object(n.i)(e),r=Object(n.i)(r);var i=e.split("@"),s=r.split("@");return!(0===i.length||0===s.length||i.length<s.length||(1===s.length?!t(i[1],s[0])||(i=i[1].split("."),0!==(s=s[0].split("."))[0].length&&i.length!==s.length):0!==e.localeCompare(r)))}function i(e,r){let i=Object(n.i)(e);e=Object(n.i)(r);var s=i.split("/");if(1<e.split("/").length)return!1;if(1<s.length)for(let e=0;e<s.length;e++)if(0<s[e].length&&":"!==s[e].charAt(s[e].length-1)){i=s[e].split(":")[0];break}return!!t(i,e)&&(r=i.split("."),0===(e=e.split("."))[0].length||r.length===e.length)}function s(e,t){var r=new Uint8Array(e.valueBlock.valueHex),n=new Uint8Array(t.valueBlock.valueHex);if(4===r.length&&8===n.length){for(let e=0;e<4;e++)if((r[e]^n[e])&n[e+4])return!1}else{if(16!==r.length||32!==n.length)return!1;for(let e=0;e<16;e++)if((r[e]^n[e])&n[e+16])return!1}return!0}function a(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;let r=!0,n=0;for(let i=0;i<t.typesAndValues.length;i++){let s=!1;for(let a=n;a<e.typesAndValues.length;a++)if(s=e.typesAndValues[a].isEqual(t.typesAndValues[i]),e.typesAndValues[a].type===t.typesAndValues[i].type&&(r=r&&s),!0===s){if(0!==n&&n!==a)return!1;n=a+1;break}if(!1===s)return!1}return 0!==n&&r}try{if(0===this.certs.length)throw"Empty certificate array";let n=!1,v=("passedWhenNotRevValues"in e&&(n=e.passedWhenNotRevValues),[]),w=(v.push("2.5.29.32.0"),!1),S=!1,A=!1,E=[],k=[],I=[],_=("initialPolicySet"in e&&(v=e.initialPolicySet),"initialExplicitPolicy"in e&&(w=e.initialExplicitPolicy),"initialPolicyMappingInhibit"in e&&(S=e.initialPolicyMappingInhibit),"initialInhibitPolicy"in e&&(A=e.initialInhibitPolicy),"initialPermittedSubtreesSet"in e&&(E=e.initialPermittedSubtreesSet),"initialExcludedSubtreesSet"in e&&(k=e.initialExcludedSubtreesSet),"initialRequiredNameForms"in e&&(I=e.initialRequiredNameForms),w),B=S,N=A;var o=new Array(3);o[0]=!1,o[1]=!1,o[2]=!1;let C=0,O=0,x=0,j=E,T=k;var l=I;let P=1;this.certs=await this.sort(n);var u=[],c=(u.push("2.5.29.32.0"),[]),h=new Array(this.certs.length-1);for(let e=0;e<this.certs.length-1;e++)h[e]=!0;c.push(h);var f,d=new Array(this.certs.length-1),m=new Array(this.certs.length-1);let D=_?this.certs.length-1:-1;for(let e=this.certs.length-2;0<=e;e--,P++)if("extensions"in this.certs[e]){for(let t=0;t<this.certs[e].extensions.length;t++){if("2.5.29.32"===this.certs[e].extensions[t].extnID){m[e]=this.certs[e].extensions[t].parsedValue;for(let t=0;t<u.length;t++)if("2.5.29.32.0"===u[t]){delete c[t][e];break}for(let r=0;r<this.certs[e].extensions[t].parsedValue.certificatePolicies.length;r++){let n=-1;for(let i=0;i<u.length;i++)if(this.certs[e].extensions[t].parsedValue.certificatePolicies[r].policyIdentifier===u[i]){n=i;break}-1===n?(u.push(this.certs[e].extensions[t].parsedValue.certificatePolicies[r].policyIdentifier),(f=new Array(this.certs.length-1))[e]=!0,c.push(f)):c[n][e]=!0}}if("2.5.29.33"===this.certs[e].extensions[t].extnID){if(B)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};d[e]=this.certs[e].extensions[t].parsedValue}"2.5.29.36"===this.certs[e].extensions[t].extnID&&!1===_&&(0===this.certs[e].extensions[t].parsedValue.requireExplicitPolicy?(_=!0,D=e):C=!1===o[0]?(o[0]=!0,this.certs[e].extensions[t].parsedValue.requireExplicitPolicy):C>this.certs[e].extensions[t].parsedValue.requireExplicitPolicy?this.certs[e].extensions[t].parsedValue.requireExplicitPolicy:C,0===this.certs[e].extensions[t].parsedValue.inhibitPolicyMapping?B=!0:O=!1===o[1]?(o[1]=!0,this.certs[e].extensions[t].parsedValue.inhibitPolicyMapping+1):O>this.certs[e].extensions[t].parsedValue.inhibitPolicyMapping+1?this.certs[e].extensions[t].parsedValue.inhibitPolicyMapping+1:O),"2.5.29.54"===this.certs[e].extensions[t].extnID&&!1===N&&(0===this.certs[e].extensions[t].parsedValue.valueBlock.valueDec?N=!0:x=!1===o[2]?(o[2]=!0,this.certs[e].extensions[t].parsedValue.valueBlock.valueDec):x>this.certs[e].extensions[t].parsedValue.valueBlock.valueDec?this.certs[e].extensions[t].parsedValue.valueBlock.valueDec:x)}if(!0===N){let t=-1;for(let e=0;e<u.length;e++)if("2.5.29.32.0"===u[e]){t=e;break}-1!==t&&delete c[0][e]}!1===_&&!0===o[0]&&0==--C&&(_=!0,D=e,o[0]=!1),!1===B&&!0===o[1]&&0==--O&&(B=!0,o[1]=!1),!1===N&&!0===o[2]&&0==--x&&(N=!0,o[2]=!1)}for(let e=0;e<this.certs.length-1;e++)if(e<this.certs.length-2&&void 0!==d[e+1])for(let t=0;t<d[e+1].mappings.length;t++){if("2.5.29.32.0"===d[e+1].mappings[t].issuerDomainPolicy||"2.5.29.32.0"===d[e+1].mappings[t].subjectDomainPolicy)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let r=-1,n=-1;for(let i=0;i<u.length;i++)u[i]===d[e+1].mappings[t].issuerDomainPolicy&&(r=i),u[i]===d[e+1].mappings[t].subjectDomainPolicy&&(n=i);void 0!==c[r][e]&&delete c[r][e];for(let i=0;i<m[e].certificatePolicies.length;i++)if(d[e+1].mappings[t].subjectDomainPolicy===m[e].certificatePolicies[i].policyIdentifier&&-1!==r&&-1!==n)for(let t=0;t<=e;t++)void 0!==c[n][t]&&(c[r][t]=!0,delete c[n][t])}for(let e=0;e<u.length;e++)if("2.5.29.32.0"===u[e])for(let t=0;t<D;t++)delete c[e][t];var p=[];for(let e=0;e<c.length;e++){let t=!0;for(let r=0;r<this.certs.length-1;r++){let n=!1;if(r<D&&"2.5.29.32.0"===u[e]&&1<u.length){t=!1;break}if(void 0===c[e][r]){if(r>=D)for(let e=0;e<u.length;e++)if("2.5.29.32.0"===u[e]){!0===c[e][r]&&(n=!0);break}if(!n){t=!1;break}}}!0===t&&p.push(u[e])}let R=[];if(1===v.length&&"2.5.29.32.0"===v[0]&&!1===_)R=v;else if(1===p.length&&"2.5.29.32.0"===p[0])R=v;else for(let e=0;e<p.length;e++)for(let t=0;t<v.length;t++)if(v[t]===p[e]||"2.5.29.32.0"===v[t]){R.push(p[e]);break}var g={result:0<R.length,resultCode:0,resultMessage:0<R.length?"":'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:p,userConstrPolicies:R,explicitPolicyIndicator:_,policyMappings:d,certificatePath:this.certs};if(0!==R.length&&!1!==g.result){P=1;for(let e=this.certs.length-2;0<=e;e--,P++){let n=[],o=[],u=[];if("extensions"in this.certs[e])for(let t=0;t<this.certs[e].extensions.length;t++)"2.5.29.30"===this.certs[e].extensions[t].extnID&&("permittedSubtrees"in this.certs[e].extensions[t].parsedValue&&(o=o.concat(this.certs[e].extensions[t].parsedValue.permittedSubtrees)),"excludedSubtrees"in this.certs[e].extensions[t].parsedValue)&&(u=u.concat(this.certs[e].extensions[t].parsedValue.excludedSubtrees)),"2.5.29.17"===this.certs[e].extensions[t].extnID&&(n=n.concat(this.certs[e].extensions[t].parsedValue.altNames));let c=l.length<=0;for(let t=0;t<l.length;t++)if(4===l[t].base.type&&l[t].base.value.typesAndValues.length===this.certs[e].subject.typesAndValues.length){c=!0;for(let r=0;r<this.certs[e].subject.typesAndValues.length;r++)if(this.certs[e].subject.typesAndValues[r].type!==l[t].base.value.typesAndValues[r].type){c=!1;break}}if(!1===c)throw g.result=!1,g.resultCode=21,g.resultMessage="No neccessary name form found",g;var b=[];b[0]=[],b[1]=[],b[2]=[],b[3]=[],b[4]=[];for(let e=0;e<j.length;e++)switch(j[e].base.type){case 1:b[0].push(j[e]);break;case 2:b[1].push(j[e]);break;case 4:b[2].push(j[e]);break;case 6:b[3].push(j[e]);break;case 7:b[4].push(j[e])}for(let o=0;o<5;o++){let l=!1,u=!1;var y=b[o];for(let c=0;c<y.length;c++){switch(o){case 0:if(0<n.length)for(let e=0;e<n.length;e++)1===n[e].type&&(u=!0,l=l||r(n[e].value,y[c].base.value));else for(let t=0;t<this.certs[e].subject.typesAndValues.length;t++)"1.2.840.113549.1.9.1"!==this.certs[e].subject.typesAndValues[t].type&&"0.9.2342.19200300.100.1.3"!==this.certs[e].subject.typesAndValues[t].type||(u=!0,l=l||r(this.certs[e].subject.typesAndValues[t].value.valueBlock.value,y[c].base.value));break;case 1:if(0<n.length)for(let e=0;e<n.length;e++)2===n[e].type&&(u=!0,l=l||t(n[e].value,y[c].base.value));break;case 2:u=!0,l=a(this.certs[e].subject,y[c].base.value);break;case 3:if(0<n.length)for(let e=0;e<n.length;e++)6===n[e].type&&(u=!0,l=l||i(n[e].value,y[c].base.value));break;case 4:if(0<n.length)for(let e=0;e<n.length;e++)7===n[e].type&&(u=!0,l=l||s(n[e].value,y[c].base.value))}if(l)break}if(!1===l&&0<y.length&&u)throw g.result=!1,g.resultCode=41,g.resultMessage='Failed to meet "permitted sub-trees" name constraint',g}let h=!1;for(let o=0;o<T.length;o++){switch(T[o].base.type){case 1:if(0<=n.length)for(let e=0;e<n.length;e++)1===n[e].type&&(h=h||r(n[e].value,T[o].base.value));else for(let t=0;t<this.certs[e].subject.typesAndValues.length;t++)"1.2.840.113549.1.9.1"!==this.certs[e].subject.typesAndValues[t].type&&"0.9.2342.19200300.100.1.3"!==this.certs[e].subject.typesAndValues[t].type||(h=h||r(this.certs[e].subject.typesAndValues[t].value.valueBlock.value,T[o].base.value));break;case 2:if(0<n.length)for(let e=0;e<n.length;e++)2===n[e].type&&(h=h||t(n[e].value,T[o].base.value));break;case 4:h=h||a(this.certs[e].subject,T[o].base.value);break;case 6:if(0<n.length)for(let e=0;e<n.length;e++)6===n[e].type&&(h=h||i(n[e].value,T[o].base.value));break;case 7:if(0<n.length)for(let e=0;e<n.length;e++)7===n[e].type&&(h=h||s(n[e].value,T[o].base.value))}if(h)break}if(!0===h)throw g.result=!1,g.resultCode=42,g.resultMessage='Failed to meet "excluded sub-trees" name constraint',g;j=j.concat(o),T=T.concat(u)}}return g}catch(e){if(e instanceof Object){if("resultMessage"in e)return e;if("message"in e)return{result:!1,resultCode:-1,resultMessage:e.message}}return{result:!1,resultCode:-1,resultMessage:e}}}}class he{constructor(e={}){this.tbsResponseData=Object(s.e)(e,"tbsResponseData",he.defaultValues("tbsResponseData")),this.signatureAlgorithm=Object(s.e)(e,"signatureAlgorithm",he.defaultValues("signatureAlgorithm")),this.signature=Object(s.e)(e,"signature",he.defaultValues("signature")),"certs"in e&&(this.certs=Object(s.e)(e,"certs",he.defaultValues("certs"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"tbsResponseData":return new ue;case"signatureAlgorithm":return new h.a;case"signature":return new i.b;case"certs":return[];default:throw new Error("Invalid member name for BasicOCSPResponse class: "+e)}}static compareWithDefault(e,t){switch(e){case"type":{let e=ue.compareWithDefault("tbs",t.tbs)&&ue.compareWithDefault("responderID",t.responderID)&&ue.compareWithDefault("producedAt",t.producedAt)&&ue.compareWithDefault("responses",t.responses);return e="responseExtensions"in t?e&&ue.compareWithDefault("responseExtensions",t.responseExtensions):e}case"signatureAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"signature":return t.isEqual(he.defaultValues(e));case"certs":return 0===t.length;default:throw new Error("Invalid member name for BasicOCSPResponse class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"BasicOCSPResponse",value:[ue.schema(e.tbsResponseData||{names:{blockName:"BasicOCSPResponse.tbsResponseData"}}),h.a.schema(e.signatureAlgorithm||{names:{blockName:"BasicOCSPResponse.signatureAlgorithm"}}),new i.b({name:e.signature||"BasicOCSPResponse.signature"}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.v({value:[new i.u({name:"BasicOCSPResponse.certs",value:J.schema(e.certs||{})})]})]})]})}fromSchema(e){if(Object(s.c)(e,["BasicOCSPResponse.tbsResponseData","BasicOCSPResponse.signatureAlgorithm","BasicOCSPResponse.signature","BasicOCSPResponse.certs"]),!1===(e=i.D(e,e,he.schema())).verified)throw new Error("Object's schema was not verified against input data for BasicOCSPResponse");this.tbsResponseData=new ue({schema:e.result["BasicOCSPResponse.tbsResponseData"]}),this.signatureAlgorithm=new h.a({schema:e.result["BasicOCSPResponse.signatureAlgorithm"]}),this.signature=e.result["BasicOCSPResponse.signature"],"BasicOCSPResponse.certs"in e.result&&(this.certs=Array.from(e.result["BasicOCSPResponse.certs"],e=>new J({schema:e})))}toSchema(){var e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"certs"in this&&e.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:[new i.v({value:Array.from(this.certs,e=>e.toSchema())})]})),new i.v({value:e})}toJSON(){var e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return"certs"in this&&(e.certs=Array.from(this.certs,e=>e.toJSON())),e}getCertificateStatus(e,t){let r=Promise.resolve();const i={isForCertificate:!1,status:2};var s={};const a=[],o=[];for(const r of this.tbsResponseData.responses){var l,u=Object(n.c)(r.certID.hashAlgorithm.algorithmId);if("name"in u==0)return Promise.reject("Wrong CertID hashing algorithm: "+r.certID.hashAlgorithm.algorithmId);u.name in s==0&&(s[u.name]=1,l=new oe,a.push(l),o.push(l.createForCertificate(e,{hashAlgorithm:u.name,issuerCertificate:t})))}return(r=r.then(()=>Promise.all(o))).then(()=>{for(const e of this.tbsResponseData.responses)for(const t of a)if(e.certID.isEqual(t)){i.isForCertificate=!0;try{switch(e.certStatus.idBlock.isConstructed){case!0:1===e.certStatus.idBlock.tagNumber&&(i.status=1);break;case!1:switch(e.certStatus.idBlock.tagNumber){case 0:i.status=0;break;case 2:i.status=2}}}catch(e){}return i}return i})}sign(e,t="SHA-1"){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let r,s=Promise.resolve();const a=Object(n.e)();return(s=(s=(s=(s=s.then(()=>a.subtle.getSignatureParameters(e,t))).then(e=>{r=e.parameters,this.signatureAlgorithm=e.signatureAlgorithm})).then(()=>{this.tbsResponseData.tbs=this.tbsResponseData.toSchema(!0).toBER(!1)})).then(()=>a.subtle.signWithPrivateKey(this.tbsResponseData.tbs,e,r))).then(e=>{this.signature=new i.b({valueHex:e})})}verify(e={}){let t=null,r=-1,a=Promise.resolve(),l=[];const u=this,c=Object(n.e)();if("certs"in this==0)return Promise.reject("No certificates attached to the BasicOCSPResponce");"trustedCerts"in e&&(l=e.trustedCerts);const h=Object(n.d)();if(void 0===h)return Promise.reject("Unable to create WebCrypto object");switch(!0){case this.tbsResponseData.responderID instanceof o:a=a.then(()=>{for(var[e,t]of u.certs.entries())if(t.subject.isEqual(u.tbsResponseData.responderID)){r=e;break}});break;case this.tbsResponseData.responderID instanceof i.q:a=a.then(()=>Promise.all(Array.from(u.certs,e=>h.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex)))).then(e=>{for(var[t]of u.certs.entries())if(Object(s.f)(e[t],u.tbsResponseData.responderID.valueBlock.valueHex)){r=t;break}}));break;default:return Promise.reject("Wrong value for responderID")}return(a=a.then(()=>-1===r?Promise.reject("Correct certificate was not found in OCSP response"):(t=this.certs[r],Promise.all(Array.from(u.certs,e=>{{if(!0===e.issuer.isEqual(t.issuer)&&!0===e.serialNumber.isEqual(t.serialNumber))return null;let r=!1;for(const t of e.extensions)"2.5.29.19"===t.extnID&&"cA"in t.parsedValue&&!0===t.parsedValue.cA&&(r=!0);return r?e:null}})).then(e=>{var r=[];r.push(t);for(const t of e)null!==t&&r.push(t);return new ce({certs:r,trustedCerts:l}).verify().then(e=>!0===e.result?Promise.resolve():Promise.reject("Validation of signer's certificate failed"),e=>Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e)))},e=>Promise.reject("Error during checking certificates for CA flag: "+e))))).then(()=>c.subtle.verifyWithPublicKey(this.tbsResponseData.tbs,this.signature,this.certs[r].subjectPublicKeyInfo,this.signatureAlgorithm))}}r(43),r(37),r(12);class fe{constructor(e={}){if(this.eContentType=Object(s.e)(e,"eContentType",fe.defaultValues("eContentType")),"eContent"in e&&(this.eContent=Object(s.e)(e,"eContent",fe.defaultValues("eContent")),1===this.eContent.idBlock.tagClass)&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed){var t=new i.q({idBlock:{isConstructed:!0},isConstructed:!0});let e=0,s=this.eContent.valueBlock.valueHex.byteLength;for(;0<s;){var r=new Uint8Array(this.eContent.valueBlock.valueHex,e,e+65536>this.eContent.valueBlock.valueHex.byteLength?this.eContent.valueBlock.valueHex.byteLength-e:65536),n=new ArrayBuffer(r.length),a=new Uint8Array(n);for(let e=0;e<a.length;e++)a[e]=r[e];t.valueBlock.value.push(new i.q({valueHex:n})),s-=r.length,e+=r.length}this.eContent=t}"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"eContentType":return"";case"eContent":return new i.q;default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+e)}}static compareWithDefault(e,t){switch(e){case"eContentType":return""===t;case"eContent":return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(fe.defaultValues("eContent"));default:throw new Error("Invalid member name for EncapsulatedContentInfo class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[new i.p({name:e.eContentType||""}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new i.a({name:e.eContent||""})]})]})}fromSchema(e){if(Object(s.c)(e,["eContentType","eContent"]),!1===(e=i.D(e,e,fe.schema({names:{eContentType:"eContentType",eContent:"eContent"}}))).verified)throw new Error("Object's schema was not verified against input data for EncapsulatedContentInfo");this.eContentType=e.result.eContentType.valueBlock.toString(),"eContent"in e.result&&(this.eContent=e.result.eContent)}toSchema(){var e=[];return e.push(new i.p({value:this.eContentType})),"eContent"in this&&!1===fe.compareWithDefault("eContent",this.eContent)&&e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new i.v({value:e})}toJSON(){var e={eContentType:this.eContentType};return"eContent"in this&&!1===fe.compareWithDefault("eContent",this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}t.a;class de{constructor(e={}){this.hashAlgorithm=Object(s.e)(e,"hashAlgorithm",de.defaultValues("hashAlgorithm")),this.hashedMessage=Object(s.e)(e,"hashedMessage",de.defaultValues("hashedMessage")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"hashAlgorithm":return new h.a;case"hashedMessage":return new i.q;default:throw new Error("Invalid member name for MessageImprint class: "+e)}}static compareWithDefault(e,t){switch(e){case"hashAlgorithm":return""===t.algorithmId&&"algorithmParams"in t==0;case"hashedMessage":return 0===t.isEqual(de.defaultValues(e));default:throw new Error("Invalid member name for MessageImprint class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"",value:[h.a.schema(e.hashAlgorithm||{}),new i.q({name:e.hashedMessage||""})]})}fromSchema(e){if(Object(s.c)(e,["hashAlgorithm","hashedMessage"]),!1===(e=i.D(e,e,de.schema({names:{hashAlgorithm:{names:{blockName:"hashAlgorithm"}},hashedMessage:"hashedMessage"}}))).verified)throw new Error("Object's schema was not verified against input data for MessageImprint");this.hashAlgorithm=new h.a({schema:e.result.hashAlgorithm}),this.hashedMessage=e.result.hashedMessage}toSchema(){return new i.v({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}r(27),r(39);class me{constructor(e={}){this.type=Object(s.e)(e,"type",me.defaultValues("type")),this.attributes=Object(s.e)(e,"attributes",me.defaultValues("attributes")),this.encodedValue=Object(s.e)(e,"encodedValue",me.defaultValues("encodedValue")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"type":return-1;case"attributes":return[];case"encodedValue":return new ArrayBuffer(0);default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+e)}}static compareWithDefault(e,t){switch(e){case"type":return t===me.defaultValues("type");case"attributes":return 0===t.length;case"encodedValue":return 0===t.byteLength;default:throw new Error("Invalid member name for SignedAndUnsignedAttributes class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.g({name:e.blockName||"",optional:!0,idBlock:{tagClass:3,tagNumber:e.tagNumber},value:[new i.u({name:e.attributes||"",value:d.a.schema()})]})}fromSchema(e){if(Object(s.c)(e,["attributes"]),!1===(e=i.D(e,e,me.schema({names:{tagNumber:this.type,attributes:"attributes"}}))).verified)throw new Error("Object's schema was not verified against input data for SignedAndUnsignedAttributes");if(this.type=e.result.idBlock.tagNumber,this.encodedValue=e.result.valueBeforeDecode,new Uint8Array(this.encodedValue)[0]=49,"attributes"in e.result==0){if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}else this.attributes=Array.from(e.result.attributes,e=>new d.a({schema:e}))}toSchema(){if(me.compareWithDefault("type",this.type)||me.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,e=>e.toSchema())})}toJSON(){if(me.compareWithDefault("type",this.type)||me.compareWithDefault("attributes",this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,e=>e.toJSON())}}}class pe{constructor(e={}){this.version=Object(s.e)(e,"version",pe.defaultValues("version")),this.sid=Object(s.e)(e,"sid",pe.defaultValues("sid")),this.digestAlgorithm=Object(s.e)(e,"digestAlgorithm",pe.defaultValues("digestAlgorithm")),"signedAttrs"in e&&(this.signedAttrs=Object(s.e)(e,"signedAttrs",pe.defaultValues("signedAttrs"))),this.signatureAlgorithm=Object(s.e)(e,"signatureAlgorithm",pe.defaultValues("signatureAlgorithm")),this.signature=Object(s.e)(e,"signature",pe.defaultValues("signature")),"unsignedAttrs"in e&&(this.unsignedAttrs=Object(s.e)(e,"unsignedAttrs",pe.defaultValues("unsignedAttrs"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"sid":return new i.a;case"digestAlgorithm":return new h.a;case"signedAttrs":return new me({type:0});case"signatureAlgorithm":return new h.a;case"signature":return new i.q;case"unsignedAttrs":return new me({type:1});default:throw new Error("Invalid member name for SignerInfo class: "+e)}}static compareWithDefault(e,t){switch(e){case"version":return pe.defaultValues("version")===t;case"sid":return t instanceof i.a;case"digestAlgorithm":return t instanceof h.a!=0&&t.isEqual(pe.defaultValues("digestAlgorithm"));case"signedAttrs":return me.compareWithDefault("type",t.type)&&me.compareWithDefault("attributes",t.attributes)&&me.compareWithDefault("encodedValue",t.encodedValue);case"signatureAlgorithm":return t instanceof h.a!=0&&t.isEqual(pe.defaultValues("signatureAlgorithm"));case"signature":case"unsignedAttrs":return me.compareWithDefault("type",t.type)&&me.compareWithDefault("attributes",t.attributes)&&me.compareWithDefault("encodedValue",t.encodedValue);default:throw new Error("Invalid member name for SignerInfo class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:"SignerInfo",value:[new i.m({name:e.version||"SignerInfo.version"}),new i.f({value:[ae.schema(e.sid||{names:{blockName:"SignerInfo.sid"}}),new i.f({value:[new i.g({optional:!0,name:e.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new i.q]}),new i.r({optional:!0,name:e.sid||"SignerInfo.sid",idBlock:{tagClass:3,tagNumber:0},value:[new i.q]})]})]}),h.a.schema(e.digestAlgorithm||{names:{blockName:"SignerInfo.digestAlgorithm"}}),me.schema(e.signedAttrs||{names:{blockName:"SignerInfo.signedAttrs",tagNumber:0}}),h.a.schema(e.signatureAlgorithm||{names:{blockName:"SignerInfo.signatureAlgorithm"}}),new i.q({name:e.signature||"SignerInfo.signature"}),me.schema(e.unsignedAttrs||{names:{blockName:"SignerInfo.unsignedAttrs",tagNumber:1}})]})}fromSchema(e){if(Object(s.c)(e,["SignerInfo.version","SignerInfo.sid","SignerInfo.digestAlgorithm","SignerInfo.signedAttrs","SignerInfo.signatureAlgorithm","SignerInfo.signature","SignerInfo.unsignedAttrs"]),!1===(e=i.D(e,e,pe.schema())).verified)throw new Error("Object's schema was not verified against input data for SignerInfo");this.version=e.result["SignerInfo.version"].valueBlock.valueDec;var t=e.result["SignerInfo.sid"];1===t.idBlock.tagClass?this.sid=new ae({schema:t}):this.sid=t,this.digestAlgorithm=new h.a({schema:e.result["SignerInfo.digestAlgorithm"]}),"SignerInfo.signedAttrs"in e.result&&(this.signedAttrs=new me({type:0,schema:e.result["SignerInfo.signedAttrs"]})),this.signatureAlgorithm=new h.a({schema:e.result["SignerInfo.signatureAlgorithm"]}),this.signature=e.result["SignerInfo.signature"],"SignerInfo.unsignedAttrs"in e.result&&(this.unsignedAttrs=new me({type:1,schema:e.result["SignerInfo.unsignedAttrs"]}))}toSchema(){if(pe.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var e=[];return e.push(new i.m({value:this.version})),this.sid instanceof ae?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),"signedAttrs"in this&&!1===pe.compareWithDefault("signedAttrs",this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),"unsignedAttrs"in this&&!1===pe.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new i.v({value:e})}toJSON(){if(pe.compareWithDefault("sid",this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');var e={version:this.version};return this.sid instanceof i.a||(e.sid=this.sid.toJSON()),e.digestAlgorithm=this.digestAlgorithm.toJSON(),!1===pe.compareWithDefault("signedAttrs",this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),e.signatureAlgorithm=this.signatureAlgorithm.toJSON(),e.signature=this.signature.toJSON(),!1===pe.compareWithDefault("unsignedAttrs",this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}class ge{constructor(e={}){this.version=Object(s.e)(e,"version",ge.defaultValues("version")),this.policy=Object(s.e)(e,"policy",ge.defaultValues("policy")),this.messageImprint=Object(s.e)(e,"messageImprint",ge.defaultValues("messageImprint")),this.serialNumber=Object(s.e)(e,"serialNumber",ge.defaultValues("serialNumber")),this.genTime=Object(s.e)(e,"genTime",ge.defaultValues("genTime")),"accuracy"in e&&(this.accuracy=Object(s.e)(e,"accuracy",ge.defaultValues("accuracy"))),"ordering"in e&&(this.ordering=Object(s.e)(e,"ordering",ge.defaultValues("ordering"))),"nonce"in e&&(this.nonce=Object(s.e)(e,"nonce",ge.defaultValues("nonce"))),"tsa"in e&&(this.tsa=Object(s.e)(e,"tsa",ge.defaultValues("tsa"))),"extensions"in e&&(this.extensions=Object(s.e)(e,"extensions",ge.defaultValues("extensions"))),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"policy":return"";case"messageImprint":return new de;case"serialNumber":return new i.m;case"genTime":return new Date(0,0,0);case"accuracy":return new c;case"ordering":return!1;case"nonce":return new i.m;case"tsa":return new l;case"extensions":return[];default:throw new Error("Invalid member name for TSTInfo class: "+e)}}static compareWithDefault(e,t){switch(e){case"version":case"policy":case"genTime":case"ordering":return t===ge.defaultValues(e);case"messageImprint":return de.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&de.compareWithDefault("hashedMessage",t.hashedMessage);case"serialNumber":case"nonce":return t.isEqual(ge.defaultValues(e));case"accuracy":return c.compareWithDefault("seconds",t.seconds)&&c.compareWithDefault("millis",t.millis)&&c.compareWithDefault("micros",t.micros);case"tsa":return l.compareWithDefault("type",t.type)&&l.compareWithDefault("value",t.value);case"extensions":return 0===t.length;default:throw new Error("Invalid member name for TSTInfo class: "+e)}}static schema(e={}){return e=Object(s.e)(e,"names",{}),new i.v({name:e.blockName||"TSTInfo",value:[new i.m({name:e.version||"TSTInfo.version"}),new i.p({name:e.policy||"TSTInfo.policy"}),de.schema(e.messageImprint||{names:{blockName:"TSTInfo.messageImprint"}}),new i.m({name:e.serialNumber||"TSTInfo.serialNumber"}),new i.j({name:e.genTime||"TSTInfo.genTime"}),c.schema(e.accuracy||{names:{blockName:"TSTInfo.accuracy"}}),new i.d({name:e.ordering||"TSTInfo.ordering",optional:!0}),new i.m({name:e.nonce||"TSTInfo.nonce",optional:!0}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[l.schema(e.tsa||{names:{blockName:"TSTInfo.tsa"}})]}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new i.u({name:e.extensions||"TSTInfo.extensions",value:F.schema(e.extension||{})})]})]})}fromSchema(e){if(Object(s.c)(e,["TSTInfo.version","TSTInfo.policy","TSTInfo.messageImprint","TSTInfo.serialNumber","TSTInfo.genTime","TSTInfo.accuracy","TSTInfo.ordering","TSTInfo.nonce","TSTInfo.tsa","TSTInfo.extensions"]),!1===(e=i.D(e,e,ge.schema())).verified)throw new Error("Object's schema was not verified against input data for TSTInfo");this.version=e.result["TSTInfo.version"].valueBlock.valueDec,this.policy=e.result["TSTInfo.policy"].valueBlock.toString(),this.messageImprint=new de({schema:e.result["TSTInfo.messageImprint"]}),this.serialNumber=e.result["TSTInfo.serialNumber"],this.genTime=e.result["TSTInfo.genTime"].toDate(),"TSTInfo.accuracy"in e.result&&(this.accuracy=new c({schema:e.result["TSTInfo.accuracy"]})),"TSTInfo.ordering"in e.result&&(this.ordering=e.result["TSTInfo.ordering"].valueBlock.value),"TSTInfo.nonce"in e.result&&(this.nonce=e.result["TSTInfo.nonce"]),"TSTInfo.tsa"in e.result&&(this.tsa=new l({schema:e.result["TSTInfo.tsa"]})),"TSTInfo.extensions"in e.result&&(this.extensions=Array.from(e.result["TSTInfo.extensions"],e=>new F({schema:e})))}toSchema(){var e=[];return e.push(new i.m({value:this.version})),e.push(new i.p({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new i.j({valueDate:this.genTime})),"accuracy"in this&&e.push(this.accuracy.toSchema()),"ordering"in this&&e.push(new i.d({value:this.ordering})),"nonce"in this&&e.push(this.nonce),"tsa"in this&&e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),"extensions"in this&&e.push(new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,e=>e.toSchema())})),new i.v({value:e})}toJSON(){var e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return"accuracy"in this&&(e.accuracy=this.accuracy.toJSON()),"ordering"in this&&(e.ordering=this.ordering),"nonce"in this&&(e.nonce=this.nonce.toJSON()),"tsa"in this&&(e.tsa=this.tsa.toJSON()),"extensions"in this&&(e.extensions=Array.from(this.extensions,e=>e.toJSON())),e}verify(e={}){let t,r=Promise.resolve(),i=null,a=null;const o=Object(n.d)();if(void 0===o)return Promise.reject("Unable to create WebCrypto object");if(!("data"in e))return Promise.reject('"data" is a mandatory attribute for TST_INFO verification');if(t=e.data,"notBefore"in e&&(i=e.notBefore),"notAfter"in e&&(a=e.notAfter),null!==i&&this.genTime<i)return Promise.reject("Generation time for TSTInfo object is less than notBefore value");if(null!==a&&this.genTime>a)return Promise.reject("Generation time for TSTInfo object is more than notAfter value");const l=Object(n.c)(this.messageImprint.hashAlgorithm.algorithmId);return"name"in l==0?Promise.reject("Unsupported signature algorithm: "+this.messageImprint.hashAlgorithm.algorithmId):r=r.then(()=>o.digest(l.name,new Uint8Array(t))).then(e=>Object(s.f)(e,this.messageImprint.hashedMessage.valueBlock.valueHex))}}class be{constructor(e={}){this.version=Object(s.e)(e,"version",be.defaultValues("version")),this.digestAlgorithms=Object(s.e)(e,"digestAlgorithms",be.defaultValues("digestAlgorithms")),this.encapContentInfo=Object(s.e)(e,"encapContentInfo",be.defaultValues("encapContentInfo")),"certificates"in e&&(this.certificates=Object(s.e)(e,"certificates",be.defaultValues("certificates"))),"crls"in e&&(this.crls=Object(s.e)(e,"crls",be.defaultValues("crls"))),"ocsps"in e&&(this.ocsps=Object(s.e)(e,"ocsps",be.defaultValues("ocsps"))),this.signerInfos=Object(s.e)(e,"signerInfos",be.defaultValues("signerInfos")),"schema"in e&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case"version":return 0;case"digestAlgorithms":return[];case"encapContentInfo":return new fe;case"certificates":case"crls":case"ocsps":case"signerInfos":return[];default:throw new Error("Invalid member name for SignedData class: "+e)}}static compareWithDefault(e,t){switch(e){case"version":return t===be.defaultValues("version");case"encapContentInfo":return new fe;case"digestAlgorithms":case"certificates":case"crls":case"ocsps":case"signerInfos":return 0===t.length;default:throw new Error("Invalid member name for SignedData class: "+e)}}static schema(e={}){return"optional"in(e=Object(s.e)(e,"names",{}))==0&&(e.optional=!1),new i.v({name:e.blockName||"SignedData",optional:e.optional,value:[new i.m({name:e.version||"SignedData.version"}),new i.w({value:[new i.u({name:e.digestAlgorithms||"SignedData.digestAlgorithms",value:h.a.schema()})]}),fe.schema(e.encapContentInfo||{names:{blockName:"SignedData.encapContentInfo"}}),new i.g({name:e.certificates||"SignedData.certificates",optional:!0,idBlock:{tagClass:3,tagNumber:0},value:ne.schema().valueBlock.value}),new i.g({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:se.schema(e.crls||{names:{crls:"SignedData.crls"}}).valueBlock.value}),new i.w({value:[new i.u({name:e.signerInfos||"SignedData.signerInfos",value:pe.schema()})]})]})}fromSchema(e){var t;if(Object(s.c)(e,["SignedData.version","SignedData.digestAlgorithms","SignedData.encapContentInfo","SignedData.certificates","SignedData.crls","SignedData.signerInfos"]),!1===(e=i.D(e,e,be.schema())).verified)throw new Error("Object's schema was not verified against input data for SignedData");this.version=e.result["SignedData.version"].valueBlock.valueDec,"SignedData.digestAlgorithms"in e.result&&(this.digestAlgorithms=Array.from(e.result["SignedData.digestAlgorithms"],e=>new h.a({schema:e}))),this.encapContentInfo=new fe({schema:e.result["SignedData.encapContentInfo"]}),"SignedData.certificates"in e.result&&(t=new ne({schema:new i.w({value:e.result["SignedData.certificates"].valueBlock.value})}),this.certificates=t.certificates.slice(0)),"SignedData.crls"in e.result&&(this.crls=Array.from(e.result["SignedData.crls"],e=>new(1===e.idBlock.tagClass?te:(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,ie))({schema:e}))),"SignedData.signerInfos"in e.result&&(this.signerInfos=Array.from(e.result["SignedData.signerInfos"],e=>new pe({schema:e})))}toSchema(e=!1){var t,r=[];return this.certificates&&this.certificates.length&&this.certificates.some(e=>e instanceof re)||this.crls&&this.crls.length&&this.crls.some(e=>e instanceof ie)?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some(e=>e instanceof Z)?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some(e=>e instanceof $)||this.signerInfos.some(e=>3===e.version)||this.encapContentInfo.eContentType!==be.ID_DATA?this.version=3:this.version=1,r.push(new i.m({value:this.version})),r.push(new i.w({value:Array.from(this.digestAlgorithms,t=>t.toSchema(e))})),r.push(this.encapContentInfo.toSchema()),"certificates"in this&&(t=new ne({certificates:this.certificates}).toSchema(),r.push(new i.g({idBlock:{tagClass:3,tagNumber:0},value:t.valueBlock.value}))),"crls"in this&&r.push(new i.g({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,t=>{var r;return t instanceof ie?((r=t.toSchema(e)).idBlock.tagClass=3,r.idBlock.tagNumber=1,r):t.toSchema(e)})})),r.push(new i.w({value:Array.from(this.signerInfos,t=>t.toSchema(e))})),new i.v({value:r})}toJSON(){var e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,e=>e.toJSON()),encapContentInfo:this.encapContentInfo.toJSON()};return"certificates"in this&&(e.certificates=Array.from(this.certificates,e=>e.toJSON())),"crls"in this&&(e.crls=Array.from(this.crls,e=>e.toJSON())),e.signerInfos=Array.from(this.signerInfos,e=>e.toJSON()),e}verify({signer:e=-1,data:t=new ArrayBuffer(0),trustedCerts:r=[],checkDate:a=new Date,checkChain:o=!1,extendedMode:l=!1,passedWhenNotRevValues:u=!1,findOrigin:c=null,findIssuer:h=null}={}){let f=Promise.resolve(),d=new ArrayBuffer(0),m="",p={},g=null,b=[];const y=Object(n.e)(),v=Object(n.d)();return void 0===v?Promise.reject("Unable to create WebCrypto object"):-1===e?l?Promise.reject({date:a,code:1,message:"Unable to get signer index from input parameters",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to get signer index from input parameters"):"certificates"in this==0?l?Promise.reject({date:a,code:2,message:"No certificates attached to this signed data",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("No certificates attached to this signed data"):(f=(f=this.signerInfos[e].sid instanceof ae?f.then(()=>{for(const t of this.certificates)if(t instanceof J!=0&&t.issuer.isEqual(this.signerInfos[e].sid.issuer)&&t.serialNumber.isEqual(this.signerInfos[e].sid.serialNumber))return p=t,Promise.resolve();return l?Promise.reject({date:a,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null}):Promise.reject("Unable to find signer certificate")}):(async()=>{try{var t=this.signerInfos[e].sid,r=(t.idBlock.isConstructed?t.valueBlock.value[0]:t).valueBlock.valueHex;for(const e of this.certificates)if(e instanceof J){var n=await v.digest({name:"sha-1"},new Uint8Array(e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHex));if(Object(s.f)(n,r)){p=e;break}}if(!p)throw new Error("Signing certificate not found")}catch(t){if(l)return Promise.reject({date:a,code:3,message:"Unable to find signer certificate",signatureVerified:null,signerCertificate:null,signerCertificateVerified:null});throw"Unable to find signer certificate"}})()).then(()=>{if("1.2.840.113549.1.9.16.1.4"!==this.encapContentInfo.eContentType)return!0;{if("eContent"in this.encapContentInfo==0)return!1;var e=i.E(this.encapContentInfo.eContent.valueBlock.valueHex);let r;try{r=new ge({schema:e.result})}catch(e){return!1}return a=r.genTime,g=r.serialNumber.valueBlock.valueHex,0===t.byteLength?l?Promise.reject({date:a,code:4,message:"Missed detached data input array",signatureVerified:null,signerCertificate:p,signerCertificateVerified:null}):Promise.reject("Missed detached data input array"):r.verify({data:t})}}),f=(f=(f=(f=(f=(f=o?f.then(e=>{if(!1===e)return!1;e=Array.from(this.certificates.filter(e=>e instanceof J),e=>{{if(!0===e.issuer.isEqual(p.issuer)&&!0===e.serialNumber.isEqual(p.serialNumber))return null;let t=!1;if("extensions"in e)for(const r of e.extensions)"2.5.29.19"===r.extnID&&"cA"in r.parsedValue&&!0===r.parsedValue.cA&&(t=!0);return t?e:null}}),e={checkDate:a,certs:Array.from(e.filter(e=>null!==e)),trustedCerts:r};var t=(null!==h&&(e.findIssuer=h),null!==c&&(e.findOrigin=c),new ce(e));if(t.certs.push(p),"crls"in this)for(const e of this.crls)"thisUpdate"in e?t.crls.push(e):"1.3.6.1.5.5.7.48.1.1"===e.otherRevInfoFormat&&t.ocsps.push(new he({schema:e.otherRevInfo}));return"ocsps"in this&&t.ocsps.push(...this.ocsps),t.verify({passedWhenNotRevValues:u}).then(e=>("certificatePath"in e&&(b=e.certificatePath),!0===e.result?Promise.resolve(!0):l?Promise.reject({date:a,code:5,message:"Validation of signer's certificate failed: "+e.resultMessage,signatureVerified:null,signerCertificate:p,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed")),e=>l?Promise.reject({date:a,code:5,message:"Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e),signatureVerified:null,signerCertificate:p,signerCertificateVerified:!1}):Promise.reject("Validation of signer's certificate failed with error: "+(e instanceof Object?e.resultMessage:e)))}):f).then(t=>!1!==t&&("name"in(t=Object(n.c)(this.signerInfos[e].digestAlgorithm.algorithmId))==0?l?Promise.reject({date:a,code:7,message:"Unsupported signature algorithm: "+this.signerInfos[e].digestAlgorithm.algorithmId,signatureVerified:null,signerCertificate:p,signerCertificateVerified:!0}):Promise.reject("Unsupported signature algorithm: "+this.signerInfos[e].digestAlgorithm.algorithmId):(m=t.name,!0)))).then(r=>{if(!1===r)return!1;if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(!1===this.encapContentInfo.eContent.idBlock.isConstructed)t=this.encapContentInfo.eContent.valueBlock.valueHex;else for(const e of this.encapContentInfo.eContent.valueBlock.value)t=Object(s.k)(t,e.valueBlock.valueHex);else t=this.encapContentInfo.eContent.valueBlock.valueBeforeDecode;else if(0===t.byteLength)return l?Promise.reject({date:a,code:8,message:"Missed detached data input array",signatureVerified:null,signerCertificate:p,signerCertificateVerified:!0}):Promise.reject("Missed detached data input array");if("signedAttrs"in this.signerInfos[e]){let t=!1,r=!1;for(const n of this.signerInfos[e].signedAttrs.attributes)if("1.2.840.113549.1.9.3"===n.type&&(t=!0),"1.2.840.113549.1.9.4"===n.type&&(r=!0,d=n.values[0].valueBlock.valueHex),t&&r)break;if(!1===t)return l?Promise.reject({date:a,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:p,signerCertificateVerified:!0}):Promise.reject('Attribute "content-type" is a mandatory attribute for "signed attributes"');if(!1===r)return l?Promise.reject({date:a,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:p,signerCertificateVerified:!0}):Promise.reject('Attribute "message-digest" is a mandatory attribute for "signed attributes"')}return!0})).then(r=>!1!==r&&(!("signedAttrs"in this.signerInfos[e])||v.digest(m,new Uint8Array(t)))).then(r=>!(!1===r||"signedAttrs"in this.signerInfos[e]&&(!Object(s.f)(r,d)||(t=this.signerInfos[e].signedAttrs.encodedValue,0))))).then(r=>!1!==r&&y.subtle.verifyWithPublicKey(t,this.signerInfos[e].signature,p.subjectPublicKeyInfo,p.signatureAlgorithm,m))).then(e=>l?{date:a,code:14,message:"",signatureVerified:e,signerCertificate:p,timestampSerial:g,signerCertificateVerified:!0,certificatePath:b}:e,e=>!l||"code"in e?Promise.reject(e):Promise.reject({date:a,code:15,message:"Error during verification: "+e.message,signatureVerified:null,signerCertificate:p,timestampSerial:g,signerCertificateVerified:!0})))}sign(e,t,r="SHA-1",a=new ArrayBuffer(0)){if(void 0===e)return Promise.reject("Need to provide a private key for signing");let o,l=Promise.resolve();const u=Object(n.e)(),c=Object(n.f)({name:r});return""===c?Promise.reject("Unsupported hash algorithm: "+r):(0===this.digestAlgorithms.filter(e=>e.algorithmId===c).length&&this.digestAlgorithms.push(new h.a({algorithmId:c,algorithmParams:new i.n})),this.signerInfos[t].digestAlgorithm=new h.a({algorithmId:c,algorithmParams:new i.n}),l=(l=(l=(l=(l=l.then(()=>u.subtle.getSignatureParameters(e,r))).then(e=>{o=e.parameters,this.signerInfos[t].signatureAlgorithm=e.signatureAlgorithm})).then(()=>{if("signedAttrs"in this.signerInfos[t])0!==this.signerInfos[t].signedAttrs.encodedValue.byteLength?a=this.signerInfos[t].signedAttrs.encodedValue:(a=this.signerInfos[t].signedAttrs.toSchema(!0).toBER(!1),new Uint8Array(a)[0]=49);else if("eContent"in this.encapContentInfo)if(1===this.encapContentInfo.eContent.idBlock.tagClass&&4===this.encapContentInfo.eContent.idBlock.tagNumber)if(!1===this.encapContentInfo.eContent.idBlock.isConstructed)a=this.encapContentInfo.eContent.valueBlock.valueHex;else for(const e of this.encapContentInfo.eContent.valueBlock.value)a=Object(s.k)(a,e.valueBlock.valueHex);else a=this.encapContentInfo.eContent.valueBlock.valueBeforeDecode;else if(0===a.byteLength)return Promise.reject("Missed detached data input array");return Promise.resolve()})).then(()=>u.subtle.signWithPrivateKey(a,e,o))).then(e=>(this.signerInfos[t].signature=new i.q({valueHex:e}),e)))}}be.ID_DATA="1.2.840.113549.1.7.1",r(38),r(36),r(28),r(26)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,function(e,t,r){"use strict";t.byteLength=function(e){return 3*((e=u(e))[0]+(e=e[1]))/4-e},t.toByteArray=function(e){var t,r,n=(a=u(e))[0],a=a[1],o=new s(function(e,t){return 3*(e+t)/4-t}(n,a)),l=0,c=0<a?n-4:n;for(r=0;r<c;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],o[l++]=t>>16&255,o[l++]=t>>8&255,o[l++]=255&t;return 2===a&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,o[l++]=255&t),1===a&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,o[l++]=t>>8&255,o[l++]=255&t),o},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,s=[],a=0,o=r-i;a<o;a+=16383)s.push(function(e,t,r){for(var i,s=[],a=t;a<r;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(function(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}(i));return s.join("")}(e,a,o<a+16383?o:a+16383));return 1==i?(t=e[r-1],s.push(n[t>>2]+n[t<<4&63]+"==")):2==i&&(t=(e[r-2]<<8)+e[r-1],s.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,l=a.length;o<l;++o)n[o]=a[o],i[a.charCodeAt(o)]=o;function u(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");return t=(e=-1===(e=e.indexOf("="))?t:e)===t?0:4-e%4,[e,t]}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var s,a,o=8*i-n-1,l=(1<<o)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1;i=e[t+h];for(h+=f,s=i&(1<<-c)-1,i>>=-c,c+=o;0<c;s=256*s+e[t+h],h+=f,c-=8);for(a=s&(1<<-c)-1,s>>=-c,c+=n;0<c;a=256*a+e[t+h],h+=f,c-=8);if(0===s)s=1-u;else{if(s===l)return a?NaN:1/0*(i?-1:1);a+=Math.pow(2,n),s-=u}return(i?-1:1)*a*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var a,o,l=8*s-i-1,u=(1<<l)-1,c=u>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,d=n?1:-1;s=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-a))<1&&(a--,n*=2),2<=(t+=1<=a+c?h/n:h*Math.pow(2,1-c))*n&&(a++,n/=2),u<=a+c?(o=0,a=u):1<=a+c?(o=(t*n-1)*Math.pow(2,i),a+=c):(o=t*Math.pow(2,c-1)*Math.pow(2,i),a=0));8<=i;e[r+f]=255&o,f+=d,o/=256,i-=8);for(a=a<<i|o,l+=i;0<l;e[r+f]=255&a,f+=d,a/=256,l-=8);e[r+f-d]|=128*s}},function(e,t,r){"use strict";(function(t){var n=r(23);const i=r(32);r(24),r(33);const s=r(42);var a=r(22);const o=r(25).BigNumber,l=r(34),u=a.MT,c=a.NUMBYTES,h=a.SYMS;function f(e){return 1<e?"s":""}class d extends n.Transform{constructor(e){var t=(e=Object.assign({max_depth:10},e,{readableObjectMode:!1,writableObjectMode:!1})).max_depth;delete e.max_depth,super(e),this.depth=1,this.max_depth=t,this.all=new l,this.parser=new s(e),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("start-string",this._on_start_string.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("error",this._on_error.bind(this)),this.parser.on("data",this._on_data.bind(this)),this.parser.bs.on("read",this._on_read.bind(this))}_transform(e,t,r){this.parser.write(e,t,r)}_flush(e){return this.parser._flush(e)}static comment(e,t,r){if(null==e)throw new Error("input required");let n="string"==typeof e?"hex":void 0,i=10;switch(typeof t){case"function":r=t;break;case"string":n=t;break;case"number":i=t;break;case"object":var s=t.encoding,a=t.max_depth;n=null!=s?s:n,i=null!=a?a:i;break;case"undefined":break;default:throw new Error("Unknown option type")}const o=new l,u=new d({max_depth:i});let c=null;return"function"==typeof r?(u.on("end",()=>{r(null,o.toString("utf8"))}),u.on("error",r)):c=new Promise((e,t)=>(u.on("end",()=>{e(o.toString("utf8"))}),u.on("error",t))),u.pipe(o),u.end(e,n),c}_on_error(e){return this.push("ERROR: ")&&this.push(e.toString())&&this.push("\n")}_on_read(e){this.all.write(e),e=e.toString("hex"),this.push(new Array(this.depth+1).join("  ")),this.push(e);let t=2*(this.max_depth-this.depth);return(t-=e.length)<1&&(t=1),this.push(new Array(t+1).join(" ")),this.push("-- ")}_on_more(e,t,r,n){this.depth++;let i="";switch(e){case u.POS_INT:i="Positive number,";break;case u.NEG_INT:i="Negative number,";break;case u.ARRAY:i="Array, length";break;case u.MAP:i="Map, count";break;case u.BYTE_STRING:i="Bytes, length";break;case u.UTF8_STRING:i="String, length";break;case u.SIMPLE_FLOAT:i=1===t?"Simple value,":"Float,"}return this.push(i+" next "+t+" byte"+f(t)+"\n")}_on_start_string(e,t,r,n){this.depth++;let i="";switch(e){case u.BYTE_STRING:i="Bytes, length: "+t;break;case u.UTF8_STRING:i="String, length: "+t.toString()}return this.push(i+"\n")}_on_start(e,t,r,n){if(this.depth++,t!==h.BREAK)switch(r){case u.ARRAY:this.push(`[${n}], `);break;case u.MAP:n%2?this.push(`{Val:${Math.floor(n/2)}}, `):this.push(`{Key:${Math.floor(n/2)}}, `)}switch(e){case u.TAG:this.push("Tag #"+t);break;case u.ARRAY:t===h.STREAM?this.push("Array (streaming)"):this.push(`Array, ${t} item`+f(t));break;case u.MAP:t===h.STREAM?this.push("Map (streaming)"):this.push(`Map, ${t} pair`+f(t));break;case u.BYTE_STRING:this.push("Bytes (streaming)");break;case u.UTF8_STRING:this.push("String (streaming)")}return this.push("\n")}_on_stop(e){return this.depth--}_on_value(e,r,n,s){if(e!==h.BREAK)switch(r){case u.ARRAY:this.push(`[${n}], `);break;case u.MAP:n%2?this.push(`{Val:${Math.floor(n/2)}}, `):this.push(`{Key:${Math.floor(n/2)}}, `)}switch(e===h.BREAK?this.push("BREAK\n"):e===h.NULL?this.push("null\n"):e===h.UNDEFINED?this.push("undefined\n"):"string"==typeof e?(this.depth--,0<e.length&&(this.push(JSON.stringify(e)),this.push("\n"))):t.isBuffer(e)?(this.depth--,0<e.length&&(this.push(e.toString("hex")),this.push("\n"))):(e instanceof o?this.push(e.toString()):this.push(i.inspect(e)),this.push("\n")),s){case c.ONE:case c.TWO:case c.FOUR:case c.EIGHT:this.depth--}}_on_data(){return this.push("0x"),this.push(this.all.read().toString("hex")),this.push("\n")}}e.exports=d}).call(this,r(9).Buffer)},function(e,t){},function(e,t,r){"use strict";var n=r(48).Buffer,i=r(72);function s(){if(!(this instanceof s))throw new TypeError("Cannot call a class as a function");this.head=null,this.tail=null,this.length=0}e.exports=(s.prototype.push=function(e){e={data:e,next:null},0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},s.prototype.unshift=function(e){e={data:e,next:this.head},0===this.length&&(this.tail=e),this.head=e,++this.length},s.prototype.shift=function(){var e;if(0!==this.length)return e=this.head.data,1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e},s.prototype.clear=function(){this.head=this.tail=null,this.length=0},s.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},s.prototype.concat=function(e){if(0===this.length)return n.alloc(0);for(var t,r=n.allocUnsafe(e>>>0),i=this.head,s=0;i;)t=s,i.data.copy(r,t),s+=i.data.length,i=i.next;return r},s),i&&i.inspect&&i.inspect.custom&&(e.exports.prototype[i.inspect.custom]=function(){var e=i.inspect({length:this.length});return this.constructor.name+" "+e})},function(e,t){},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function s(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new s(i.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new s(i.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},s.prototype.unref=s.prototype.ref=function(){},s.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(74),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(18))},function(e,t,r){(function(e,t){!function(e,r){"use strict";var n,i,s,a,o,l,u,c;function h(e){delete i[e]}function f(e){if(s)setTimeout(f,0,e);else{var t=i[e];if(t){s=!0;try{var r=t,n=r.callback,a=r.args;switch(a.length){case 0:n();break;case 1:n(a[0]);break;case 2:n(a[0],a[1]);break;case 3:n(a[0],a[1],a[2]);break;default:n.apply(void 0,a)}}finally{h(e),s=!1}}}}e.setImmediate||(n=1,s=!(i={}),a=e.document,c=(c=Object.getPrototypeOf&&Object.getPrototypeOf(e))&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick((function(){f(e)}))}:function(){var t,r;if(e.postMessage&&!e.importScripts)return t=!0,r=e.onmessage,e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}()?function(){function t(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(r)&&f(+t.data.slice(r.length))}var r="setImmediate$"+Math.random()+"$";e.addEventListener?e.addEventListener("message",t,!1):e.attachEvent("onmessage",t),o=function(t){e.postMessage(r+t,"*")}}():o=e.MessageChannel?((u=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){u.port2.postMessage(e)}):a&&"onreadystatechange"in a.createElement("script")?(l=a.documentElement,function(e){var t=a.createElement("script");t.onreadystatechange=function(){f(e),t.onreadystatechange=null,l.removeChild(t),t=null},l.appendChild(t)}):function(e){setTimeout(f,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];return i[n]={callback:e,args:t},o(n),n++},c.clearImmediate=h)}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(18),r(20))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return}catch(e){return}return null!=(e=t.localStorage[e])&&"true"===String(e).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}}).call(this,r(18))},function(e,t,r){var n=r(9),i=n.Buffer;function s(e,t){for(var r in e)t[r]=e[r]}function a(e,t,r){return i(e,t,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=n:(s(n,t),t.Buffer=a),s(i,a),a.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,r)},a.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");return e=i(e),void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},function(e,t,r){"use strict";e.exports=i;var n=r(57);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}(e=Object.create(r(31))).inherits=r(14),e.inherits(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(49)},function(e,t,r){e.exports=r(21)},function(e,t,r){e.exports=r(47).Transform},function(e,t,r){e.exports=r(47).PassThrough},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){function r(){}e.super_=t,r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){},function(e,t,r){"use strict";var n=r(23);const i=r(34);class s extends n.Transform{constructor(e){super(e),this._writableState.objectMode=!1,this._readableState.objectMode=!0,this.bs=new i,this.__restart()}_transform(e,t,r){for(this.bs.write(e);this.bs.length>=this.__needed;){let t;var n=null===this.__needed?void 0:this.bs.read(this.__needed);try{t=this.__parser.next(n)}catch(e){return r(e)}this.__needed&&(this.__fresh=!1),t.done?(this.push(t.value),this.__restart()):this.__needed=t.value||0}return r()}*_parse(){throw new Error("Must be implemented in subclass")}__restart(){this.__needed=null,this.__parser=this._parse(),this.__fresh=!0}_flush(e){e(this.__fresh?null:new Error("unexpected end of input"))}}e.exports=s},function(e,t,r){(function(e,n){var i,s,a,o,l,u,c,h,f,d,m,p,g;/*! https://mths.be/punycode v1.4.1 by @mathias */function b(e){throw new RangeError(d[e])}function y(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function v(e,t){var r="",n=(1<(n=e.split("@")).length&&(r=n[0]+"@",e=n[1]),(e=e.replace(f,".")).split("."));return r+y(n,t).join(".")}function w(e){for(var t,r,n=[],i=0,s=e.length;i<s;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<s?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function S(e){return y(e,(function(e){var t="";return 65535<e&&(t+=g((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+g(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function E(e,t,r){var n=0;for(e=r?p(e/u):e>>1,e+=p(e/t);m*o>>1<e;n+=a)e=p(e/m);return p(n+(m+1)*e/(e+l))}function k(e){var t,r,n,i,l,u,c,h=[],f=e.length,d=0,m=128,g=72,y=e.lastIndexOf("-");for(y<0&&(y=0),r=0;r<y;++r)128<=e.charCodeAt(r)&&b("not-basic"),h.push(e.charCodeAt(r));for(n=0<y?y+1:0;n<f;){for(i=d,l=1,u=a;f<=n&&b("invalid-input"),c=e.charCodeAt(n++),(a<=(c=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:a)||c>p((s-d)/l))&&b("overflow"),d+=c*l,!(c<(c=u<=g?1:g+o<=u?o:u-g));u+=a)l>p(s/(c=a-c))&&b("overflow"),l*=c;g=E(d-i,t=h.length+1,0==i),p(d/t)>s-m&&b("overflow"),m+=p(d/t),d%=t,h.splice(d++,0,m)}return S(h)}function I(e){for(var t,r,n,i,l,u,c,h,f,d,m=[],y=(e=w(e)).length,v=128,S=72,k=t=0;k<y;++k)(c=e[k])<128&&m.push(g(c));for(r=n=m.length,n&&m.push("-");r<y;){for(i=s,k=0;k<y;++k)v<=(c=e[k])&&c<i&&(i=c);for(i-v>p((s-t)/(h=r+1))&&b("overflow"),t+=(i-v)*h,v=i,k=0;k<y;++k)if((c=e[k])<v&&++t>s&&b("overflow"),c==v){for(l=t,u=a;!(l<(f=u<=S?1:S+o<=u?o:u-S));u+=a)m.push(g(A(f+(d=l-f)%(f=a-f),0))),l=p(d/f);m.push(g(A(l,0))),S=E(t,h,r==n),t=0,++r}++t,++v}return m.join("")}t&&t.nodeType,e&&e.nodeType,(n="object"==typeof n&&n).global!==n&&n.window!==n&&n.self,s=2147483647,o=26,l=38,u=700,c=/^xn--/,h=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},m=(a=36)-1,p=Math.floor,g=String.fromCharCode,i={version:"1.4.1",ucs2:{decode:w,encode:S},decode:k,encode:I,toASCII:function(e){return v(e,(function(e){return h.test(e)?"xn--"+I(e):e}))},toUnicode:function(e){return v(e,(function(e){return c.test(e)?k(e.slice(4).toLowerCase()):e}))}},void 0!==(n=function(){return i}.call(t,r,t,e))&&(e.exports=n)}).call(this,r(65)(e),r(18))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(89),t.encode=t.stringify=r(90)},function(e,t,r){"use strict";e.exports=function(e,t,r,i){t=t||"&",r=r||"=";var s={};if("string"==typeof e&&0!==e.length){var a=/\+/g,o=(t=(e=e.split(t),1e3),i&&"number"==typeof i.maxKeys&&(t=i.maxKeys),e.length);0<t&&t<o&&(o=t);for(var l=0;l<o;++l){var u,c=0<=(c=(h=e[l].replace(a,"%20")).indexOf(r))?(u=h.substr(0,c),h.substr(c+1)):(u=h,""),h=decodeURIComponent(u);c=decodeURIComponent(c);Object.prototype.hasOwnProperty.call(s,h)?n(s[h])?s[h].push(c):s[h]=[s[h],c]:s[h]=c}}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}e.exports=function(e,t,r,o){return t=t||"&",r=r||"=","object"==typeof(e=null===e?void 0:e)?s(a(e),(function(a){var o=encodeURIComponent(n(a))+r;return i(e[a])?s(e[a],(function(e){return o+encodeURIComponent(n(e))})).join(t):o+encodeURIComponent(n(e[a]))})).join(t):o?encodeURIComponent(n(o))+r+encodeURIComponent(n(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var a=Object.keys||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push(t);return r}},function(e,t,r){"use strict";(function(t){var n=r(23);const i=r(32),s=r(42);r(33);const a=r(24);var o=r(22);const l=r(25).BigNumber,u=r(34),c=o.MT,h=o.SYMS;class f extends n.Transform{constructor(e){var t=(e=Object.assign({separator:"\n",stream_errors:!1},e,{readableObjectMode:!1,writableObjectMode:!1})).separator,r=(delete e.separator,e.stream_errors);delete e.stream_errors,super(e),this.float_bytes=-1,this.separator=t,this.stream_errors=r,this.parser=new s(e),this.parser.on("more-bytes",this._on_more.bind(this)),this.parser.on("value",this._on_value.bind(this)),this.parser.on("start",this._on_start.bind(this)),this.parser.on("stop",this._on_stop.bind(this)),this.parser.on("data",this._on_data.bind(this)),this.parser.on("error",this._on_error.bind(this))}_transform(e,t,r){return this.parser.write(e,t,r)}_flush(e){return this.parser._flush(t=>this.stream_errors?(t&&this._on_error(t),e()):e(t))}static diagnose(e,t,r){if(null==e)throw new Error("input required");let n={},i="hex";switch(typeof t){case"function":r=t,i=a.guessEncoding(e);break;case"object":n=a.extend({},t),i=null!=n.encoding?n.encoding:a.guessEncoding(e),delete n.encoding;break;default:i=null!=t?t:"hex"}const s=new u,o=new f(n);let l=null;return"function"==typeof r?(o.on("end",()=>r(null,s.toString("utf8"))),o.on("error",r)):l=new Promise((e,t)=>(o.on("end",()=>e(s.toString("utf8"))),o.on("error",t))),o.pipe(s),o.end(e,i),l}_on_error(e){return this.stream_errors?this.push(e.toString()):this.emit("error",e)}_on_more(e,t,r,n){if(e===c.SIMPLE_FLOAT)return this.float_bytes={2:1,4:2,8:3}[t]}_fore(e,t){switch(e){case c.BYTE_STRING:case c.UTF8_STRING:case c.ARRAY:if(0<t)return this.push(", ");break;case c.MAP:if(0<t)return t%2?this.push(": "):this.push(", ")}}_on_value(e,r,n){if(e!==h.BREAK)return this._fore(r,n),this.push((()=>{switch(!1){case e!==h.NULL:return"null";case e!==h.UNDEFINED:return"undefined";case"string"!=typeof e:return JSON.stringify(e);case!(0<this.float_bytes):var r=this.float_bytes;return this.float_bytes=-1,i.inspect(e)+"_"+r;case!t.isBuffer(e):return"h'"+e.toString("hex")+"'";case!(e instanceof l):return e.toString();default:return i.inspect(e)}})())}_on_start(e,t,r,n){switch(this._fore(r,n),e){case c.TAG:this.push(t+"(");break;case c.ARRAY:this.push("[");break;case c.MAP:this.push("{");break;case c.BYTE_STRING:case c.UTF8_STRING:this.push("(")}if(t===h.STREAM)return this.push("_ ")}_on_stop(e){switch(e){case c.TAG:return this.push(")");case c.ARRAY:return this.push("]");case c.MAP:return this.push("}");case c.BYTE_STRING:case c.UTF8_STRING:return this.push(")")}}_on_data(){return this.push(this.separator)}}e.exports=f}).call(this,r(9).Buffer)},function(e,t,r){"use strict";(function(t){const n=r(59),i=r(42),s=r(22).MT;class a extends Map{constructor(e){super(e)}static _encode(e){return n.encodeCanonical(e).toString("base64")}static _decode(e){return i.decodeFirstSync(e,"base64")}get(e){return super.get(a._encode(e))}set(e,t){return super.set(a._encode(e),t)}delete(e){return super.delete(a._encode(e))}has(e){return super.has(a._encode(e))}*keys(){for(const e of super.keys())yield a._decode(e)}*entries(){for(const e of super.entries())yield[a._decode(e[0]),e[1]]}[Symbol.iterator](){return this.entries()}forEach(e,t){if("function"!=typeof e)throw new TypeError("Must be function");for(const t of super.entries())e.call(this,t[1],a._decode(t[0]),this)}encodeCBOR(e){if(!e._pushInt(this.size,s.MAP))return!1;if(e.canonical){var r=Array.from(super.entries()).map(e=>[t.from(e[0],"base64"),e[1]]);r.sort((e,t)=>e[0].compare(t[0]));for(const t of r)if(!e.push(t[0])||!e.pushAny(t[1]))return!1}else for(const r of super.entries())if(!e.push(t.from(r[0],"base64"))||!e.pushAny(r[1]))return!1;return!0}}e.exports=a}).call(this,r(9).Buffer)},,,,,,,,function(e,t,r){(function(r){var n,i={scope:{}},s=(i.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,r){if(r.get||r.set)throw new TypeError("ES3 does not support getters and setters.");e!=Array.prototype&&e!=Object.prototype&&(e[t]=r.value)},i.getGlobal=function(e){return"undefined"!=typeof window&&window===e||void 0===r||null==r?e:r},i.global=i.getGlobal(this),i.SYMBOL_PREFIX="jscomp_symbol_",i.initSymbol=function(){i.initSymbol=function(){},i.global.Symbol||(i.global.Symbol=i.Symbol)},i.symbolCounter_=0,i.Symbol=function(e){return i.SYMBOL_PREFIX+(e||"")+i.symbolCounter_++},i.initSymbolIterator=function(){i.initSymbol();var e=(e=i.global.Symbol.iterator)||(i.global.Symbol.iterator=i.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&i.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return i.arrayIterator(this)}}),i.initSymbolIterator=function(){}},i.arrayIterator=function(e){var t=0;return i.iteratorPrototype((function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}))},i.iteratorPrototype=function(e){return i.initSymbolIterator(),(e={next:e})[i.global.Symbol.iterator]=function(){return this},e},i.array=i.array||{},i.iteratorFromArray=function(e,t){i.initSymbolIterator(),e instanceof String&&(e+="");var r=0,n={next:function(){var i;return r<e.length?(i=r++,{value:t(i,e[i]),done:!1}):(n.next=function(){return{done:!0,value:void 0}},n.next())}};return n[Symbol.iterator]=function(){return n},n},i.polyfill=function(e,t,r,n){if(t){for(r=i.global,e=e.split("."),n=0;n<e.length-1;n++){var s=e[n];s in r||(r[s]={}),r=r[s]}(t=t(n=r[e=e[e.length-1]]))!=n&&null!=t&&i.defineProperty(r,e,{configurable:!0,writable:!0,value:t})}},i.polyfill("Array.prototype.keys",(function(e){return e||function(){return i.iteratorFromArray(this,(function(e){return e}))}}),"es6-impl","es3"),this);void 0!==(n="function"==typeof(n=function(){function e(e){if(!j.col(e))try{return document.querySelectorAll(e)}catch(e){}}function t(e,t){for(var r=e.length,n=2<=arguments.length?arguments[1]:void 0,i=[],s=0;s<r;s++)if(s in e){var a=e[s];t.call(n,a,s,e)&&i.push(a)}return i}function r(e){return e.reduce((function(e,t){return e.concat(j.arr(t)?r(t):t)}),[])}function n(t){return j.arr(t)?t:(j.str(t)&&(t=e(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function i(e,t){return e.some((function(e){return e===t}))}function a(e){var t,r={};for(t in e)r[t]=e[t];return r}function o(e,t){var r,n=a(e);for(r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function l(e,t){var r,n=a(e);for(r in t)n[r]=j.und(e[r])?t[r]:e[r];return n}function u(e){if(e=/([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e))return e[2]}function c(e,t){return j.fnc(e)?e(t.target,t.id,t.total):e}function h(e,t){if(t in e.style)return getComputedStyle(e).getPropertyValue(t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())||"0"}function f(e,t){return j.dom(e)&&i(x,t)?"transform":j.dom(e)&&(e.getAttribute(t)||j.svg(e)&&e[t])?"attribute":j.dom(e)&&"transform"!==t&&h(e,t)?"css":null!=e[t]?"object":void 0}function d(e,r){switch(f(e,r)){case"transform":return function(e,r){var n=function(e){return-1<e.indexOf("translate")||"perspective"===e?"px":-1<e.indexOf("rotate")||-1<e.indexOf("skew")?"deg":void 0}(r);if(n=-1<r.indexOf("scale")?1:0+n,!(e=e.style.transform))return n;for(var i=[],s=[],a=[],o=/(\w+)\((.+?)\)/g;i=o.exec(e);)s.push(i[1]),a.push(i[2]);return(e=t(a,(function(e,t){return s[t]===r}))).length?e[0]:n}(e,r);case"css":return h(e,r);case"attribute":return e.getAttribute(r)}return e[r]||0}function m(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var n=u(e)||0;switch(t=parseFloat(t),e=parseFloat(e.replace(r[0],"")),r[0][0]){case"+":return t+e+n;case"-":return t-e+n;case"*":return t*e+n}}function p(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function g(e){e=e.points;for(var t,r=0,n=0;n<e.numberOfItems;n++){var i=e.getItem(n);0<n&&(r+=p(t,i)),t=i}return r}function b(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return 2*Math.PI*e.getAttribute("r");case"rect":return 2*e.getAttribute("width")+2*e.getAttribute("height");case"line":return p({x:e.getAttribute("x1"),y:e.getAttribute("y1")},{x:e.getAttribute("x2"),y:e.getAttribute("y2")});case"polyline":return g(e);case"polygon":var t=e.points;return g(e)+p(t.getItem(t.numberOfItems-1),t.getItem(0))}}function y(e,t){function r(r){return r=void 0===r?0:r,e.el.getPointAtLength(1<=t+r?t+r:0)}var n=r(),i=r(-1),s=r(1);switch(e.property){case"x":return n.x;case"y":return n.y;case"angle":return 180*Math.atan2(s.y-i.y,s.x-i.x)/Math.PI}}function v(e,t){var r,n=/-?\d*\.?\d+/g;if(r=j.pth(e)?e.totalLength:e,j.col(r))if(j.rgb(r)){var i=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(r);r=i?"rgba("+i[1]+",1)":r}else r=j.hex(r)?function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,r,n){return t+t+r+r+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return"rgba("+(e=parseInt(t[1],16))+","+parseInt(t[2],16)+","+(t=parseInt(t[3],16))+",1)"}(r):j.hsl(r)?function(e){function t(e,t,r){return 0>r&&(r+=1),1<r&&--r,r<1/6?e+6*(t-e)*r:.5>r?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e);e=parseInt(r[1])/360;var n=parseInt(r[2])/100,i=parseInt(r[3])/100;if(r=r[4]||1,0==n)i=n=e=i;else{var s=.5>i?i*(1+n):i+n-i*n,a=2*i-s;i=t(a,s,e+1/3),n=t(a,s,e);e=t(a,s,e-1/3)}return"rgba("+255*i+","+255*n+","+255*e+","+r+")"}(r):void 0;else i=(i=u(r))?r.substr(0,r.length-i.length):r,r=t&&!/\s/g.test(r)?i+t:i;return{original:r+="",numbers:r.match(n)?r.match(n).map(Number):[0],strings:j.str(e)||t?r.split(n):[]}}function w(e){return t(e=e?r(j.arr(e)?e.map(n):n(e)):[],(function(e,t,r){return r.indexOf(e)===t}))}function S(e,t){var r=a(t);if(j.arr(e)){var i=e.length;2!==i||j.obj(e[0])?j.fnc(t.duration)||(r.duration=t.duration/i):e={value:e}}return n(e).map((function(e,r){return r=r?0:t.delay,e=j.obj(e)&&!j.pth(e)?e:{value:e},j.und(e.delay)&&(e.delay=r),e})).map((function(e){return l(e,r)}))}function A(e){return j.arr(e)?T.apply(this,e):P[e]}function E(e,t){var r;return e.tweens.map((function(n){var i=(n=function(e,t){var r,n={};for(r in e){var i=c(e[r],t);j.arr(i)&&(1===(i=i.map((function(e){return c(e,t)}))).length&&(i=i[0])),n[r]=i}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(n,t)).value,s=d(t.target,e.name),a=r?r.to.original:s,o=(a=j.arr(i)?i[0]:a,m(j.arr(i)?i[1]:i,a));s=u(o)||u(a)||u(s);return n.from=v(a,s),n.to=v(o,s),n.start=r?r.end:e.offset,n.end=n.start+n.delay+n.duration,n.easing=A(n.easing),n.elasticity=(1e3-Math.min(Math.max(n.elasticity,1),999))/1e3,n.isPath=j.pth(i),n.isColor=j.col(n.from.original),n.isColor&&(n.round=1),r=n}))}function k(e,n){return t(r(e.map((function(e){return n.map((function(t){var r=f(e.target,t.name);if(r){var n=E(t,e);t={type:r,property:t.name,animatable:e,tweens:n,duration:n[n.length-1].end,delay:n[0].delay}}else t=void 0;return t}))}))),(function(e){return!j.und(e)}))}function I(e,t,r,n){var i="delay"===e;return t.length?(i?Math.min:Math.max).apply(Math,t.map((function(t){return t[e]}))):i?n.delay:r.offset+n.delay+n.duration}function _(e){var t,r=o(C,e),n=o(O,e),i=function(e){var t=w(e);return t.map((function(e,r){return{target:e,id:r,total:t.length}}))}(e.targets),s=[],a=l(r,n);for(t in e)a.hasOwnProperty(t)||"targets"===t||s.push({name:t,offset:a.offset,tweens:S(e[t],n)});return l(r,{children:[],animatables:i,animations:e=k(i,s),duration:I("duration",e,r,n),delay:I("delay",e,r,n)})}function B(e){function r(){return window.Promise&&new Promise((function(e){return f=e}))}function n(e){return m.reversed?m.duration-e:e}function i(e){for(var r=0,n={},i=m.animations,s=i.length;r<s;){var a=i[r],o=a.animatable,l=(u=a.tweens)[d=u.length-1];d&&(l=t(u,(function(t){return e<t.end}))[0]||l);for(var u=Math.min(Math.max(e-l.start-l.delay,0),l.duration)/l.duration,c=isNaN(u)?1:l.easing(u,l.elasticity),f=(u=l.to.strings,l.round),d=[],p=void 0,g=(p=l.to.numbers.length,0);g<p;g++){var b=void 0,v=(b=l.to.numbers[g],l.from.numbers[g]);b=l.isPath?y(l.value,c*b):v+c*(b-v);f&&(l.isColor&&2<g||(b=Math.round(b*f)/f)),d.push(b)}if(l=u.length)for(p=u[0],c=0;c<l;c++)f=u[c+1],g=d[c],isNaN(g)||(p=f?p+(g+f):p+(g+" "));else p=d[0];D[a.type](o.target,a.property,p,n,o.id),a.currentValue=p,r++}if(r=Object.keys(n).length)for(i=0;i<r;i++)N||(N=h(document.body,"transform")?"transform":"-webkit-transform"),m.animatables[i].target.style[N]=n[i].join(" ");m.currentTime=e,m.progress=e/m.duration*100}function s(e){m[e]&&m[e](m)}function a(){m.remaining&&!0!==m.remaining&&m.remaining--}function o(e){var t=m.duration,o=m.offset,h=o+m.delay,p=m.currentTime,g=m.reversed,b=n(e);if(m.children.length){var y=m.children,v=y.length;if(b>=m.currentTime)for(var w=0;w<v;w++)y[w].seek(b);else for(;v--;)y[v].seek(b)}(b>=h||!t)&&(m.began||(m.began=!0,s("begin")),s("run")),b>o&&b<t?i(b):(b<=o&&0!==p&&(i(0),g&&a()),(b>=t&&p!==t||!t)&&(i(t),g||a())),s("update"),e>=t&&(m.remaining?(u=l,"alternate"===m.direction&&(m.reversed=!m.reversed)):(m.pause(),m.completed||(m.completed=!0,s("complete"),"Promise"in window&&(f(),d=r()))),c=0)}e=void 0===e?{}:e;var l,u,c=0,f=null,d=r(),m=_(e);return m.reset=function(){var e=m.direction,t=m.loop;for(m.currentTime=0,m.progress=0,m.paused=!0,m.began=!1,m.completed=!1,m.reversed="reverse"===e,m.remaining="alternate"===e&&1===t?2:t,i(0),e=m.children.length;e--;)m.children[e].reset()},m.tick=function(e){l=e,u||(u=l),o((c+l-u)*B.speed)},m.seek=function(e){o(n(e))},m.pause=function(){var e=R.indexOf(m);-1<e&&R.splice(e,1),m.paused=!0},m.play=function(){m.paused&&(m.paused=!1,u=0,c=n(m.currentTime),R.push(m),U||L())},m.reverse=function(){m.reversed=!m.reversed,u=0,c=n(m.currentTime)},m.restart=function(){m.pause(),m.reset(),m.play()},m.finished=d,m.reset(),m.autoplay&&m.play(),m}var N,C={update:void 0,begin:void 0,run:void 0,complete:void 0,loop:1,direction:"normal",autoplay:!0,offset:0},O={duration:1e3,delay:0,easing:"easeOutElastic",elasticity:500,round:0},x="translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),j={arr:function(e){return Array.isArray(e)},obj:function(e){return-1<Object.prototype.toString.call(e).indexOf("Object")},pth:function(e){return j.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},dom:function(e){return e.nodeType||j.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return j.hex(e)||j.rgb(e)||j.hsl(e)}},T=function(){function e(e,t,r){return(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e}return function(t,r,n,i){if(0<=t&&1>=t&&0<=n&&1>=n){var s=new Float32Array(11);if(t!==r||n!==i)for(var a=0;11>a;++a)s[a]=e(.1*a,t,n);return function(a){if(t===r&&n===i)return a;if(0===a)return 0;if(1===a)return 1;for(var o=0,l=1;10!==l&&s[l]<=a;++l)o+=.1;--l;l=o+(a-s[l])/(s[l+1]-s[l])*.1;var u=3*(1-3*n+3*t)*l*l+2*(3*n-6*t)*l+3*t;if(.001<=u){for(o=0;4>o&&0!==(u=3*(1-3*n+3*t)*l*l+2*(3*n-6*t)*l+3*t);++o){var c=e(l,t,n)-a;l=l-c/u}a=l}else if(0===u)a=l;else{l=o,o=o+.1;var h=0;do{0<(u=e(c=l+(o-l)/2,t,n)-a)?o=c:l=c}while(1e-7<Math.abs(u)&&10>++h);a=c}return e(a,r,i)}}}}(),P=function(){function e(e,t){return 0===e||1===e?e:-Math.pow(2,10*(e-1))*Math.sin(2*(e-1-t/(2*Math.PI)*Math.asin(1))*Math.PI/t)}var t,r="Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),n={In:[[.55,.085,.68,.53],[.55,.055,.675,.19],[.895,.03,.685,.22],[.755,.05,.855,.06],[.47,0,.745,.715],[.95,.05,.795,.035],[.6,.04,.98,.335],[.6,-.28,.735,.045],e],Out:[[.25,.46,.45,.94],[.215,.61,.355,1],[.165,.84,.44,1],[.23,1,.32,1],[.39,.575,.565,1],[.19,1,.22,1],[.075,.82,.165,1],[.175,.885,.32,1.275],function(t,r){return 1-e(1-t,r)}],InOut:[[.455,.03,.515,.955],[.645,.045,.355,1],[.77,0,.175,1],[.86,0,.07,1],[.445,.05,.55,.95],[1,0,0,1],[.785,.135,.15,.86],[.68,-.55,.265,1.55],function(t,r){return.5>t?e(2*t,r)/2:1-e(-2*t+2,r)/2}]},i={linear:T(.25,.25,.75,.75)},a={};for(t in n)a.type=t,n[a.type].forEach(function(e){return function(t,n){i["ease"+e.type+r[n]]=j.fnc(t)?t:T.apply(s,t)}}(a)),a={type:a.type};return i}(),D={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,n,i){n[i]||(n[i]=[]),n[i].push(t+"("+r+")")}},R=[],U=0,L=function(){function e(){U=requestAnimationFrame(t)}function t(t){var r=R.length;if(r){for(var n=0;n<r;)R[n]&&R[n].tick(t),n++;e()}else cancelAnimationFrame(U),U=0}return e}();return B.version="2.2.0",B.speed=1,B.running=R,B.remove=function(e){e=w(e);for(var t=R.length;t--;)for(var r=R[t],n=r.animations,s=n.length;s--;)i(e,n[s].animatable.target)&&(n.splice(s,1),n.length||r.pause())},B.getValue=d,B.path=function(t,r){var n=j.str(t)?e(t)[0]:t,i=r||100;return function(e){return{el:n,property:e,totalLength:b(n)*(i/100)}}},B.setDashoffset=function(e){var t=b(e);return e.setAttribute("stroke-dasharray",t),t},B.bezier=T,B.easings=P,B.timeline=function(e){var t=B(e);return t.pause(),t.duration=0,t.add=function(r){return t.children.forEach((function(e){e.began=!0,e.completed=!0})),n(r).forEach((function(r){var n=l(r,o(O,e||{}));n.targets=n.targets||e.targets,r=t.duration;var i=n.offset;n.autoplay=!1,n.direction=t.direction,n.offset=j.und(i)?r:m(i,r),t.began=!0,t.completed=!0,t.seek(n.offset),(n=B(n)).began=!0,n.completed=!0,n.duration>r&&(t.duration=n.duration),t.children.push(n)})),t.seek(0),t.reset(),t.autoplay&&t.restart(),t},t},B.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},B})?n.apply(t,[]):n)&&(e.exports=n)}).call(this,r(18))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);t=r(100);var n=r.n(t);const i=/translate\(\s*([^\s,\)]+)[ ,]+([^\s,\)]+)/;function s(e,t){e.textContent=t}function a(e){e.style.opacity=0}function o(e){e.style.opacity=1}const l={hide:Symbol(),show:Symbol()};class u{constructor(e){this.svg=e,this.elements={dot:e.getElementById("Data-Dot"),lineRight:e.getElementById("Line-Right"),lineLeft:e.getElementById("Line-Left"),textRight:[e.getElementById("Text-Right-1"),e.getElementById("Text-Right-2"),e.getElementById("Text-Right-3")],textLeft:[e.getElementById("Text-Left-1"),e.getElementById("Text-Left-2"),e.getElementById("Text-Left-3")],check:e.getElementById("Check"),countdown:e.querySelector("#Countdown tspan"),touchCircles:e.getElementById("Touch-Circles")},this.states={},a(this.elements.check),this.elements.textRight.forEach(e=>s(e," ")),this.elements.textLeft.forEach(e=>s(e," ")),a(this.elements.countdown),a(this.elements.touchCircles),a(this.elements.dot),this.checkY=function(e){return e=e.getAttribute("transform"),(e=i.exec(e))?{x:parseFloat(e[1]),y:parseFloat(e[2])}:{x:0,y:0}}(this.elements.check).y}addState(e,t){this.states[e]=t}async trigger(e){if(!(e=this.states[e]))throw new Error("Unknown state");for(const t of e)await this.run(t)}async run(e){var t=[];if(e.dot&&(o(this.elements.dot),t.push(n()(Object.assign({targets:this.elements.dot,duration:1e3,easing:"easeOutQuad"},e.dot)).finished.then(()=>a(this.elements.dot)))),e.check&&t.push(n()(Object.assign({targets:this.elements.check,translateY:this.checkY,duration:0,easing:"linear"},e.check)).finished),e.textRight){let t=e.textRight.split("\n");t.length=3,t=t.map(e=>e||" ");for(let e=0;e<t.length;++e)s(this.elements.textRight[e],t[e])}if(e.textLeft){let t=e.textLeft.split("\n");t.length=3,t=t.map(e=>e||" ");for(let e=0;e<t.length;++e)s(this.elements.textLeft[e],t[e])}if(e.touchCircles&&(e.touchCircles===l.show?o:a)(this.elements.touchCircles),e.countdown===l.hide)a(this.elements.countdown),clearInterval(this.countdownInterval);else if("number"==typeof e.countdown&&0<e.countdown){let t=e.countdown;o(this.elements.countdown),s(this.elements.countdown,t),this.countdownInterval=setInterval(()=>{--t,s(this.elements.countdown,t),0===t&&(a(this.elements.countdown),clearInterval(this.countdownInterval))},1e3)}return e.wait&&t.push(new Promise(t=>setTimeout(t,e.wait))),Promise.all(t)}reset(){var e=this.svg.parentElement.parentElement.innerHTML;this.svg.parentElement.parentElement.innerHTML=e}static get symbols(){return l}static get offsets(){return{dot:{leftStart:0,leftEnd:216.5,rightStart:335,rightEnd:551.5},check:{center:388,left:{x:30,y:56},right:730}}}}var c={challenge:[{check:{translateX:u.offsets.check.center,opacity:1}},{dot:{translateX:[u.offsets.dot.rightStart,u.offsets.dot.rightEnd]},textRight:"CHALLENGE"},{check:{translateX:u.offsets.check.right,opacity:1}},{wait:1e3},{dot:{translateX:u.offsets.dot.rightStart}},{check:{translateX:u.offsets.check.center,opacity:1},textRight:" "}],register:[{wait:1e3},{dot:{translateX:[u.offsets.dot.leftEnd,u.offsets.dot.leftStart]},textLeft:"CHALLENGE"},{textLeft:" "}]},h={"push-button":[{countdown:30,touchCircles:u.symbols.show}],response:[{countdown:u.symbols.hide,touchCircles:u.symbols.hide,dot:{translateX:[u.offsets.dot.leftStart,u.offsets.dot.leftEnd]},textLeft:"- SIGNATURE\n- PUBLIC KEY\n- RAW ID"},{check:{translateX:u.offsets.check.center,opacity:1},textLeft:" "}],"send-to-relying-party":[{wait:1e3},{dot:{translateX:[u.offsets.dot.rightStart,u.offsets.dot.rightEnd]},textRight:"- CHALLENGE + SIGNATURE\n- PUBLIC KEY\n- RAW ID"},{check:{translateX:u.offsets.check.right,opacity:1},wait:1e3},{dot:{translateX:[u.offsets.dot.rightEnd,u.offsets.dot.rightStart]},textRight:"VALIDATED"},{check:{translateX:u.offsets.check.center,opacity:1},textRight:" "}]};function f(e){e=document.querySelector(e).getBoundingClientRect().top+window.scrollY-130,window.scrollTo({top:e,behavior:"smooth"})}function d(e){document.querySelector(`.tutorial-step-${e}-container`).classList.add("loaded")}function m(e){var t=document.querySelectorAll(".tutorial-step-container");e=document.querySelector(`.tutorial-step-${e}-container`);[].forEach.call(t,e=>{e.classList.remove("active")}),e.classList.add("active")}function p(e,t){let r=!1;const n=()=>(r=!0,t());if(e.onLoad=()=>{r||n()},!r){const t=window.setInterval(()=>{0<e.clientHeight&&e.clientHeight<=140&&(window.clearInterval(t),n())},250)}}var g={request:[{check:{translateX:u.offsets.check.center,opacity:1},dot:{translateX:[u.offsets.dot.rightStart,u.offsets.dot.rightEnd]},textRight:"USERNAME"},{check:{translateX:u.offsets.check.right},wait:1e3},{dot:{translateX:[u.offsets.dot.rightEnd,u.offsets.dot.rightStart]},textRight:"- RAWID\n- CHALLENGE"},{check:{translateX:u.offsets.check.center},textRight:" ",wait:1e3},{dot:{translateX:[u.offsets.dot.leftEnd,u.offsets.dot.leftStart]},textLeft:"- RAWID\n- CHALLENGE"},{check:{translateX:u.offsets.check.left.x,translateY:u.offsets.check.left.y},textLeft:" "}]},b=r(13),y={"push-button":[{countdown:30,touchCircles:u.symbols.show}],response:[{countdown:u.symbols.hide,touchCircles:u.symbols.hide,dot:{translateX:[u.offsets.dot.leftStart,u.offsets.dot.leftEnd]},textLeft:"CHALLENGE + SIGNATURE"},{check:{translateX:u.offsets.check.center,opacity:1},textLeft:" "}],"send-to-relying-party":[{wait:1e3},{dot:{translateX:[u.offsets.dot.rightStart,u.offsets.dot.rightEnd]},textRight:"CHALLENGE + SIGNATURE"},{check:{translateX:u.offsets.check.right,opacity:1},textRight:" "}]},v=r(11),w=(t=r(30),r.n(t));function S(e){var t=function(e=".modal"){const t=document.querySelector(e),r=t.querySelector(".modal-message"),n=(e=t.querySelector(".modal-header-close-button"),[]);var i=()=>{t.classList.remove("active"),n.forEach(e=>{e()})};return e.addEventListener("mouseup",i),{show:e=>{r.innerHTML=e,t.classList.add("active")},hide:i,onHide:e=>{n.push(e)}}}();t.show(e+". <br/><br/><strong>Close this modal reload the page so you can try again.</strong>"),t.onHide((function(){window.location.reload()}))}var A={validated:[{dot:{translateX:[u.offsets.dot.rightEnd,u.offsets.dot.rightStart]},textRight:"VALIDATED"},{check:{translateX:u.offsets.check.center,opacity:1},textRight:" "}]};let E,k,I,_;const B={object:document.getElementById("tutorial-step-4-animation-object"),id:document.querySelector(".tutorial-step-4-allow-credentials-id-code"),button:document.querySelector(".tutorial-step-4-login")};async function N(e){await _.trigger("request"),async function(e){f(".tutorial-step-5-container"),m(5);try{k.trigger("push-button"),t=e,3e4,r=new Uint8Array(32),crypto.getRandomValues(r),await navigator.credentials.get({publicKey:{challenge:r,timeout:3e4,allowCredentials:[{type:"public-key",id:t}]}}),await k.trigger("response"),await k.trigger("send-to-relying-party"),async function(){f(".tutorial-step-6-container"),m(6),await E.trigger("validated")}()}catch(e){S(e)}var t,r}(I),e.target.disabled=!0}let C,O;const x={object:document.getElementById("tutorial-step-3-animation-object"),rawId:document.getElementById("tutorial-step-3-data-raw-id"),publicKey:document.getElementById("tutorial-step-3-data-public-key")};let j,T;async function P(e){f(".tutorial-step-2-container"),m(2);try{j.trigger("push-button"),r=e,3e4,n=new Uint8Array(32),i=new Uint8Array(32),crypto.getRandomValues(n),crypto.getRandomValues(i);var t=await navigator.credentials.create({publicKey:{rp:{name:"Auth0 WebAuthn Playground"},user:{id:i,name:r,displayName:r},challenge:n,pubKeyCredParams:[{type:"public-key",alg:-7}],timeout:3e4}});await j.trigger("response"),await j.trigger("send-to-relying-party"),async function(e){O=e.rawId;var t=JSON.stringify(function(e){if(!e||!e.response||!e.response.attestationObject)throw new Error("No public-key");if("string"==typeof(e=Object(v.c)(e.response.attestationObject)))throw new Error("Error parsing attestationObject: ",e);try{return w()(e.authData.attestedCredentialData.credentialPublicKey)}catch(e){throw new Error("No public-key: ",e)}}(e),null,2).replace(/\{\n|\n\}|  /g,"");e=e,Object(v.a)(e)||document.querySelector(".tutorial-step-3-up-warning").classList.remove("hidden"),x.rawId.textContent=Object(b.a)(O),x.publicKey.textContent=t,C.run({check:{translateX:u.offsets.check.center,opacity:1}}),f(".tutorial-step-3-container"),m(3)}(t)}catch(e){S(e)}var r,n,i}async function D(e){m(1),await T.trigger("challenge"),await T.trigger("register"),P(document.querySelector(".tutorial-step-1-input").value),e.target.disabled=!0}navigator.credentials&&navigator.credentials.get&&navigator.credentials.create||(document.querySelector("#tutorial").classList.add("hidden"),document.querySelector("#tutorial-error-message").classList.remove("hidden"));{const e=document.querySelector("#tutorial-step-1-animation-object");p(e,()=>{document.querySelector(".tutorial-step-1-register").onclick=D;var t;t=e.contentDocument.firstChild,T=new u(t);for(const e of Object.keys(c))T.addState(e,c[e]);d(1),m(1)})}{const e=document.getElementById("tutorial-step-2-animation-object");p(e,()=>{d(2);var t;t=e.contentDocument.firstChild,j=new u(t);for(const e of Object.keys(h))j.addState(e,h[e])})}p(x.object,()=>{var e;document.querySelector(".tutorial-step-3-next").onclick=e=>{O&&(async function(e){I=e,B.id.textContent=Object(b.a)(I),f(".tutorial-step-4-container"),m(4)}(O),e.target.disabled=!0)},e=(e=x.object).contentDocument.firstChild,C=new u(e),d(3)}),p(B.object,()=>{B.button.onclick=N;var e=B.object;e=e.contentDocument.firstChild,_=new u(e);for(const e of Object.keys(g))_.addState(e,g[e]);d(4)});{const e=document.getElementById("tutorial-step-5-animation-object");p(e,()=>{var t;t=e.contentDocument.firstChild,k=new u(t);for(const e of Object.keys(y))k.addState(e,y[e]);d(5)})}{const e=document.getElementById("tutorial-step-6-animation-object");p(e,()=>{var t;t=e.contentDocument.firstChild,E=new u(t);for(const e of Object.keys(A))E.addState(e,A[e]);d(6)})}document.querySelector("[data-learn-more]").addEventListener("mousedown",()=>{scrollTo(".tutorial-step-1-container"),window.setTimeout(()=>{document.querySelector(".tutorial-step-1-input").focus()},1e3)})}]);